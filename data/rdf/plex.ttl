# baseURI: http://purl.org/plex

@prefix : <http://purl.org/plex#> .
@prefix bpmn: <http://dkm.fbk.eu/index.php/BPMN2_Ontology#> .
@prefix dc: <http://purl.org/dc/terms/> .
@prefix dcat: <http://www.w3.org/ns/dcat#> .
@prefix dul: <http://www.ontologydesignpatterns.org/ont/dul/DUL.owl#> .
@prefix edam: <http://edamontology.org/> .
@prefix fabio: <http://purl.org/spar/fabio/> .
@prefix mls: <http://www.w3.org/ns/mls#> .
@prefix opmw: <http://www.opmw.org/ontology/> .
@prefix opredict: <http://purl.org/plex/Instances/OpenPREDICT#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix p-plan: <http://purl.org/net/p-plan#> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix pwo: <http://purl.org/spar/pwo#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix reprod: <https://w3id.org/reproduceme#> .
@prefix schema: <http://schema.org#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

bpmn:ManualTask
  rdf:type owl:Class ;
  rdfs:isDefinedBy "http://dkm.fbk.eu/index.php/BPMN2_Ontology#manualTask" ;
  rdfs:subClassOf p-plan:Step ;
.
bpmn:ScriptTask
  rdf:type owl:Class ;
  rdfs:isDefinedBy "http://dkm.fbk.eu/index.php/BPMN2_Ontology#scriptTask" ;
  rdfs:subClassOf p-plan:Step ;
.
edam:format_1915
  rdf:type owl:Class ;
  rdfs:label "Data format" ;
  rdfs:seeAlso "http://edamontology.org/format_1915" ;
  rdfs:subClassOf owl:Thing ;
.
edam:format_2330
  rdf:type owl:Class ;
  rdfs:label "Plain text format" ;
  rdfs:seeAlso "http://edamontology.org/format_2330" ;
  rdfs:subClassOf edam:format_1915 ;
.
edam:format_2376
  rdf:type owl:Class ;
  rdfs:label "Resource Description Framework (RDF)" ;
  rdfs:seeAlso "http://edamontology.org/format_2376" ;
  rdfs:subClassOf edam:format_1915 ;
.
edam:format_3256
  rdf:type owl:Class ;
  rdfs:label "N-Triples" ;
  rdfs:seeAlso "http://edamontology.org/format_3256" ;
  rdfs:subClassOf edam:format_2376 ;
.
edam:operation_2409
  rdf:type owl:Class ;
  rdfs:label "Data handling" ;
  rdfs:seeAlso "http://edamontology.org/operation_2409" ;
  rdfs:subClassOf p-plan:Step ;
.
dc:LinguisticSystem
  rdf:type owl:Class ;
  rdfs:subClassOf owl:Thing ;
.
dc:created
  rdf:type rdf:Property ;
  rdfs:range rdfs:Literal ;
  rdfs:seeAlso "http://purl.org/dc/terms/created" ;
.
dc:creator
  rdf:type rdf:Property ;
  rdfs:seeAlso "http://purl.org/dc/elements/1.1/creator" ;
.
dc:description
  rdf:type rdf:Property ;
  rdfs:isDefinedBy "http://purl.org/dc/terms/description" ;
.
dc:hasVersion
  rdf:type rdf:Property ;
  rdfs:isDefinedBy "http://purl.org/dc/terms/hasVersion" ;
.
dc:language
  rdf:type rdf:Property ;
  rdfs:isDefinedBy dc:language ;
  rdfs:range dc:LinguisticSystem ;
.
dc:modified
  rdf:type rdf:Property ;
  rdfs:range rdfs:Literal ;
  rdfs:seeAlso "http://purl.org/dc/terms/modified" ;
.
dc:publisher
  rdf:type rdf:Property ;
  rdfs:seeAlso "http://purl.org/dc/elements/1.1/publisher" ;
.
dc:title
  rdf:type rdf:Property ;
.
p-plan:Activity
  rdf:type owl:Class ;
  rdfs:comment "A p-plan:Activity represents the execution of the process planned in a p-plan:Step. p-plan:Activity is a subclass of prov:Activity" ;
  rdfs:seeAlso "http://purl.org/net/p-plan#Activity" ;
  rdfs:subClassOf prov:Activity ;
.
p-plan:Plan
  rdf:type owl:Class ;
  rdfs:isDefinedBy "http://purl.org/net/p-plan#Plan" ;
  rdfs:subClassOf prov:Plan ;
  rdfs:subClassOf [
      rdf:type owl:Restriction ;
      owl:allValuesFrom p-plan:Step ;
      owl:onProperty pwo:hasFirstStep ;
    ] ;
.
p-plan:Step
  rdf:type owl:Class ;
  rdfs:isDefinedBy "http://purl.org/net/p-plan#Step" ;
  rdfs:subClassOf owl:Thing ;
  rdfs:subClassOf [
      rdf:type owl:Restriction ;
      owl:onClass p-plan:Plan ;
      owl:onProperty dul:isDescribedBy ;
      owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
    ] ;
.
p-plan:Variable
  rdf:type owl:Class ;
  rdfs:isDefinedBy "http://purl.org/net/p-plan#Variable" ;
  rdfs:subClassOf owl:Thing ;
.
p-plan:correspondsToStep
  rdf:type owl:AnnotationProperty ;
  rdfs:domain p-plan:Activity ;
  rdfs:range p-plan:Step ;
  rdfs:seeAlso "http://purl.org/net/p-plan#correspondsToStep" ;
.
p-plan:hasInputVar
  rdf:type rdf:Property ;
  rdfs:domain p-plan:Step ;
  rdfs:isDefinedBy "http://purl.org/net/p-plan#hasInputVar" ;
  rdfs:range p-plan:Variable ;
.
p-plan:hasOutputVar
  rdf:type rdf:Property ;
  rdfs:domain p-plan:Step ;
  rdfs:isDefinedBy "http://purl.org/net/p-plan#hasOutputVar" ;
  rdfs:range p-plan:Variable ;
.
p-plan:isStepOfPlan
  rdf:type rdf:Property ;
  rdfs:domain p-plan:Step ;
  rdfs:isDefinedBy p-plan:isStepOfPlan ;
  rdfs:range p-plan:Plan ;
.
<http://purl.org/plex>
  rdf:type owl:Ontology ;
  owl:versionInfo "Created with TopBraid Composer" ;
.
<http://purl.org/plex#ComputerLanguage_Python_3.7>
  rdf:type schema:ComputerLanguage ;
  rdfs:label "Python 3.7" ;
  owl:versionInfo "3.7" ;
.
:LinguisticSystem_xsd_language_English
  rdf:type dc:LinguisticSystem ;
  rdfs:label "en" ;
  rdfs:seeAlso "http://www.datypic.com/sc/xsd/t-xsd_language.html" ;
.
:opredict_Link_variable_to_triplestore_for_input_data
  rdf:type prov:Usage ;
  prov:entity opredict:Triplestore_endpoint_input_data ;
  prov:entity opredict:Variable_Triplestore_endpoint_for_input_data ;
.
:opredict_Variable_Context_Output_Cell0
  rdf:type p-plan:Variable ;
.
opredict:Activity_Feature_generation_01_Pipeline_Source_Cell01_Execution_1546300862
  rdf:type p-plan:Activity ;
  p-plan:correspondsToStep opredict:Step_Feature_generation_01_Pipeline_Source_Cell01 ;
  prov:generated opredict:WorkflowExecutionArtifact_Output_Step_Feature_generation_01_Pipeline_Source_Cell01_Execution_1546300862 ;
.
opredict:Activity_Feature_generation_01_Pipeline_Source_Cell02_Execution_1546300862
  rdf:type p-plan:Activity ;
  p-plan:correspondsToStep opredict:Step_Feature_generation_01_Pipeline_Source_Cell02 ;
  prov:generated opredict:WorkflowExecutionArtifact_Output_Step_Feature_generation_01_Pipeline_Source_Cell02_Execution_1546300862 ;
.
opredict:Activity_Feature_generation_01_Pipeline_Source_Cell03_Execution_1546300862
  rdf:type p-plan:Activity ;
  p-plan:correspondsToStep opredict:Step_Feature_generation_01_Pipeline_Source_Cell03 ;
  prov:generated opredict:WorkflowExecutionArtifact_Output_Step_Feature_generation_01_Pipeline_Source_Cell03_Execution_1546300862 ;
.
opredict:Activity_Feature_generation_01_Pipeline_Source_Cell04_Execution_1546300862
  rdf:type p-plan:Activity ;
  p-plan:correspondsToStep opredict:Step_Feature_generation_01_Pipeline_Source_Cell04 ;
  prov:generated opredict:WorkflowExecutionArtifact_Output_Step_Feature_generation_01_Pipeline_Source_Cell04_Execution_1546300862 ;
.
opredict:Activity_Feature_generation_01_Pipeline_Source_Cell05_Execution_1546300862
  rdf:type p-plan:Activity ;
  p-plan:correspondsToStep opredict:Step_Feature_generation_01_Pipeline_Source_Cell05 ;
  prov:generated opredict:WorkflowExecutionArtifact_Output_Step_Feature_generation_01_Pipeline_Source_Cell05_Execution_1546300862 ;
.
opredict:Activity_Feature_generation_01_Pipeline_Source_Cell08_Execution_1546300862
  rdf:type p-plan:Activity ;
  p-plan:correspondsToStep opredict:Step_Feature_generation_01_Pipeline_Source_Cell08 ;
  prov:generated opredict:WorkflowExecutionArtifact_Output_Step_Feature_generation_01_Pipeline_Source_Cell08_Execution_1546300862 ;
.
opredict:Activity_Feature_generation_01_Pipeline_Source_Cell10_Execution_1546300862
  rdf:type p-plan:Activity ;
  p-plan:correspondsToStep opredict:Step_Feature_generation_01_Pipeline_Source_Cell10 ;
  prov:generated opredict:WorkflowExecutionArtifact_Output_Step_Feature_generation_01_Pipeline_Source_Cell10_Execution_1546300862 ;
.
opredict:Activity_Feature_generation_Pipeline_OpenPREDICT_ipynb_v02_FeatureGeneration_Execution_1546335555
  rdf:type p-plan:Activity ;
  p-plan:correspondsToStep opredict:Step_Feature_generation_Pipeline_OpenPREDICT_ipynb_v02_FeatureGeneration ;
  prov:generated opredict:WorkflowExecutionArtifact_Output_Step_Feature_generation_Pipeline_OpenPREDICT_ipynb_v02_FeatureGeneration_Execution_1546335555 ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Activity_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell01_Execution_1546302862>
  rdf:type p-plan:Activity ;
  p-plan:correspondsToStep <http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell01> ;
  prov:generated <http://purl.org/plex/Instances/OpenPREDICT#WorkflowExecutionArtifact_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell01_Execution_1546302862> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Activity_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell05_Execution_1546302862>
  rdf:type p-plan:Activity ;
  p-plan:correspondsToStep <http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell05> ;
  prov:generated <http://purl.org/plex/Instances/OpenPREDICT#WorkflowExecutionArtifact_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell05_Execution_1546302862> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Activity_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell08_Execution_1546302862>
  rdf:type p-plan:Activity ;
  p-plan:correspondsToStep <http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell08> ;
  prov:generated <http://purl.org/plex/Instances/OpenPREDICT#WorkflowExecutionArtifact_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell08_Execution_1546302862> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Activity_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell09_Execution_1546302862>
  rdf:type p-plan:Activity ;
  p-plan:correspondsToStep <http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell09> ;
  prov:generated <http://purl.org/plex/Instances/OpenPREDICT#WorkflowExecutionArtifact_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell09_Execution_1546302862> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Activity_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Execution_1546302862>
  rdf:type p-plan:Activity ;
  p-plan:correspondsToStep opredict:Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb ;
  prov:generated <http://purl.org/plex/Instances/OpenPREDICT#ModelEvaluation_Accuracy_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Execution_1546302862> ;
  prov:generated <http://purl.org/plex/Instances/OpenPREDICT#ModelEvaluation_AveragePrecision_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Execution_1546302862> ;
  prov:generated <http://purl.org/plex/Instances/OpenPREDICT#ModelEvaluation_F1_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Execution_1546302862> ;
  prov:generated <http://purl.org/plex/Instances/OpenPREDICT#ModelEvaluation_Precision_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Execution_1546302862> ;
  prov:generated <http://purl.org/plex/Instances/OpenPREDICT#ModelEvaluation_Recall_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Execution_1546302862> ;
  prov:generated <http://purl.org/plex/Instances/OpenPREDICT#ModelEvaluation_RocAuc_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Execution_1546302862> ;
.
opredict:Activity_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02_Execution_1546335555
  rdf:type p-plan:Activity ;
  p-plan:correspondsToStep opredict:Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02 ;
  prov:generated opredict:ModelEvaluation_Accuracy_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02_Execution_1546335555 ;
  prov:generated opredict:ModelEvaluation_AveragePrecision_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02_Execution_1546335555 ;
  prov:generated opredict:ModelEvaluation_F1_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02_Execution_1546335555 ;
  prov:generated opredict:ModelEvaluation_Precision_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02_Execution_1546335555 ;
  prov:generated opredict:ModelEvaluation_Recall_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02_Execution_1546335555 ;
  prov:generated opredict:ModelEvaluation_RocAuc_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02_Execution_1546335555 ;
  prov:generated opredict:WorkflowExecutionArtifact_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02_Execution_1546335555 ;
.
opredict:Agent_Ahmed
  rdf:type prov:Agent ;
.
opredict:Agent_Joao
  rdf:type prov:Agent ;
.
opredict:Agent_Remzi
  rdf:type prov:Agent ;
  rdfs:label "Remzi" ;
.
opredict:Association_AhmedAsDeveloper
  rdf:type prov:Association ;
  prov:agent opredict:Agent_Ahmed ;
  prov:hadPlan opredict:Plan_Execute_FAIRifier_process_to_human_interactome_barabasi ;
  prov:hadPlan opredict:Plan_Execute_FAIRifier_process_to_phenotype_annotations ;
  prov:hadPlan <http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb> ;
  prov:hadRole opredict:Role_Developer ;
.
opredict:Association_JoaoAsExecutor
  rdf:type prov:Association ;
  rdfs:label "Joao as executor of OpenPREDICT plan" ;
  prov:agent opredict:Agent_Joao ;
  prov:hadPlan opredict:Plan_Download_Drugbank_dataset ;
  prov:hadPlan opredict:Plan_Download_Kegg_dataset ;
  prov:hadPlan opredict:Plan_Download_SIDER_dataset ;
  prov:hadPlan opredict:Plan_Download_and_save_Drugbank_dataset ;
  prov:hadPlan opredict:Plan_Download_and_save_Kegg_dataset ;
  prov:hadPlan opredict:Plan_Download_and_save_SIDER_dataset ;
  prov:hadPlan opredict:Plan_Download_and_save_human_interactome_barabasi ;
  prov:hadPlan opredict:Plan_Download_and_save_phenotype_annotations ;
  prov:hadPlan opredict:Plan_Download_human_interactome_barabasi ;
  prov:hadPlan opredict:Plan_Download_phenotype_annotations ;
  prov:hadPlan opredict:Plan_Execute_query_DRUG_SIDE_EFFECTS_from_SIDER ;
  prov:hadPlan opredict:Plan_Execute_query_DRUG_SMILES_from_DRUGBANK ;
  prov:hadPlan opredict:Plan_Execute_query_DRUG_TARGETS_-from_DRUGBANK_and_KEGG ;
  prov:hadPlan opredict:Plan_Feature_generation_01_Pipeline_OpenPREDICT_ipynb ;
  prov:hadPlan <http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb> ;
  prov:hadPlan opredict:Plan_Prepare_Input_Data_Files ;
  prov:hadPlan opredict:Plan_Prepare_triplestore_for_input_data ;
  prov:hadPlan opredict:Plan_Save_Drugbank_dataset ;
  prov:hadPlan opredict:Plan_Save_Kegg_dataset ;
  prov:hadPlan opredict:Plan_Save_SIDER_dataset ;
  prov:hadPlan opredict:Plan_Save_as_drugbank-drug-smiles_tab ;
  prov:hadPlan opredict:Plan_Save_as_drugbank-drug-target_tab ;
  prov:hadPlan opredict:Plan_Save_as_drugbank-sider-se_tab ;
  prov:hadPlan opredict:Plan_Save_files_in_triplestore ;
  prov:hadPlan opredict:Plan_Save_human_interactome_barabasi ;
  prov:hadPlan opredict:Plan_Save_phenotype_annotations ;
  prov:hadRole opredict:Role_Executor ;
.
opredict:Association_RemziAsDeveloper
  rdf:type prov:Association ;
  rdfs:label "Remzi as developer of OpenPREDICT plan" ;
  prov:agent opredict:Agent_Remzi ;
  prov:hadPlan opredict:Plan_Add_files_to_triplestore_and_execute_queries ;
  prov:hadPlan opredict:Plan_Download_Drugbank_dataset ;
  prov:hadPlan opredict:Plan_Download_Kegg_dataset ;
  prov:hadPlan opredict:Plan_Download_SIDER_dataset ;
  prov:hadPlan opredict:Plan_Download_and_save_Drugbank_dataset ;
  prov:hadPlan opredict:Plan_Download_and_save_Kegg_dataset ;
  prov:hadPlan opredict:Plan_Download_and_save_SIDER_dataset ;
  prov:hadPlan opredict:Plan_Download_and_save_human_interactome_barabasi ;
  prov:hadPlan opredict:Plan_Download_and_save_phenotype_annotations ;
  prov:hadPlan opredict:Plan_Download_human_interactome_barabasi ;
  prov:hadPlan opredict:Plan_Download_phenotype_annotations ;
  prov:hadPlan opredict:Plan_Execute_FAIRifier_process_to_human_interactome_barabasi ;
  prov:hadPlan opredict:Plan_Execute_FAIRifier_process_to_phenotype_annotations ;
  prov:hadPlan opredict:Plan_Execute_query_DRUG_SIDE_EFFECTS_from_SIDER ;
  prov:hadPlan opredict:Plan_Execute_query_DRUG_SMILES_from_DRUGBANK ;
  prov:hadPlan opredict:Plan_Execute_query_DRUG_TARGETS_-from_DRUGBANK_and_KEGG ;
  prov:hadPlan opredict:Plan_Feature_generation_01_Pipeline_OpenPREDICT_ipynb ;
  prov:hadPlan opredict:Plan_Feature_generation_01_Pipeline_Source_Cell00 ;
  prov:hadPlan opredict:Plan_Feature_generation_01_Pipeline_Source_Cell01 ;
  prov:hadPlan opredict:Plan_Format_results_for_presentation ;
  prov:hadPlan opredict:Plan_Main_Protocol_v01 ;
  prov:hadPlan <http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb> ;
  prov:hadPlan opredict:Plan_Prepare_Input_Data_Files ;
  prov:hadPlan opredict:Plan_Prepare_triplestore_for_input_data ;
  prov:hadPlan opredict:Plan_Save_Drugbank_dataset ;
  prov:hadPlan opredict:Plan_Save_Kegg_dataset ;
  prov:hadPlan opredict:Plan_Save_SIDER_dataset ;
  prov:hadPlan opredict:Plan_Save_as_drugbank-drug-smiles_tab ;
  prov:hadPlan opredict:Plan_Save_as_drugbank-drug-target_tab ;
  prov:hadPlan opredict:Plan_Save_as_drugbank-sider-se_tab ;
  prov:hadPlan opredict:Plan_Save_files_in_triplestore ;
  prov:hadPlan opredict:Plan_Save_human_interactome_barabasi ;
  prov:hadPlan opredict:Plan_Save_phenotype_annotations ;
  prov:hadPlan opredict:Plan_Upload_files_to_a_triplestore ;
  prov:hadRole opredict:Role_Developer ;
.
opredict:Association_RemziAsExecutor
  rdf:type prov:Association ;
  rdfs:label "Remzi as executor (tester?) of OpenPREDICT plan" ;
  prov:agent opredict:Agent_Remzi ;
  prov:hadPlan opredict:Plan_Add_files_to_triplestore_and_execute_queries ;
  prov:hadPlan opredict:Plan_Download_Drugbank_dataset ;
  prov:hadPlan opredict:Plan_Download_Kegg_dataset ;
  prov:hadPlan opredict:Plan_Download_SIDER_dataset ;
  prov:hadPlan opredict:Plan_Download_and_save_Drugbank_dataset ;
  prov:hadPlan opredict:Plan_Download_and_save_Kegg_dataset ;
  prov:hadPlan opredict:Plan_Download_and_save_SIDER_dataset ;
  prov:hadPlan opredict:Plan_Download_and_save_human_interactome_barabasi ;
  prov:hadPlan opredict:Plan_Download_and_save_phenotype_annotations ;
  prov:hadPlan opredict:Plan_Download_human_interactome_barabasi ;
  prov:hadPlan opredict:Plan_Download_phenotype_annotations ;
  prov:hadPlan opredict:Plan_Execute_FAIRifier_process_to_human_interactome_barabasi ;
  prov:hadPlan opredict:Plan_Execute_FAIRifier_process_to_phenotype_annotations ;
  prov:hadPlan opredict:Plan_Execute_query_DRUG_SIDE_EFFECTS_from_SIDER ;
  prov:hadPlan opredict:Plan_Execute_query_DRUG_SMILES_from_DRUGBANK ;
  prov:hadPlan opredict:Plan_Execute_query_DRUG_TARGETS_-from_DRUGBANK_and_KEGG ;
  prov:hadPlan opredict:Plan_Feature_generation_01_Pipeline_OpenPREDICT_ipynb ;
  prov:hadPlan opredict:Plan_Feature_generation_01_Pipeline_Source_Cell00 ;
  prov:hadPlan opredict:Plan_Feature_generation_01_Pipeline_Source_Cell01 ;
  prov:hadPlan opredict:Plan_Format_results_for_presentation ;
  prov:hadPlan opredict:Plan_Main_Protocol_v01 ;
  prov:hadPlan <http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb> ;
  prov:hadPlan opredict:Plan_Prepare_Input_Data_Files ;
  prov:hadPlan opredict:Plan_Prepare_triplestore_for_input_data ;
  prov:hadPlan opredict:Plan_Save_Drugbank_dataset ;
  prov:hadPlan opredict:Plan_Save_Kegg_dataset ;
  prov:hadPlan opredict:Plan_Save_SIDER_dataset ;
  prov:hadPlan opredict:Plan_Save_as_drugbank-drug-smiles_tab ;
  prov:hadPlan opredict:Plan_Save_as_drugbank-drug-target_tab ;
  prov:hadPlan opredict:Plan_Save_as_drugbank-sider-se_tab ;
  prov:hadPlan opredict:Plan_Save_files_in_triplestore ;
  prov:hadPlan opredict:Plan_Save_human_interactome_barabasi ;
  prov:hadPlan opredict:Plan_Save_phenotype_annotations ;
  prov:hadPlan opredict:Plan_Upload_files_to_a_triplestore ;
  prov:hadRole opredict:Role_Executor ;
.
opredict:DataFormat_Textfile_tab
  rdf:type edam:format_1915 ;
  rdfs:label ".tab with tabular separator" ;
.
opredict:DataFormat_Textfile_txt
  rdf:type edam:format_2330 ;
  rdfs:label ".txt with comma separator" ;
.
opredict:DataFormat_nq_compressed_gz
  rdf:type edam:format_3256 ;
  rdfs:label ".nq compressed as .gz" ;
.
opredict:Dataset_OpenPREDICT_InputDatasetPrepared
  rdf:type dcat:Dataset ;
  dcat:distribution opredict:Triplestore_endpoint_input_data ;
.
opredict:Dataset_Phenotype_annotations_HPO_team_Build_1263
  rdf:type dcat:Dataset ;
  dc:hasVersion "Build 1263" ;
  rdfs:label "Phenotype annotations HPO team (Build #1263)" ;
  dcat:distribution <http://purl.org/plex/Instances/OpenPREDICT#Distribution_phenotype_annotation_hpoteam.tab_Build_1263> ;
.
opredict:Distribution_Phenotype_annotations_file_local
  rdf:type dcat:Distribution ;
  rdfs:label "Phenotype annotations file local" ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Distribution_gold_standard_drug_indications_msb201126-s4.xls>
  rdf:type dcat:Distribution ;
  rdfs:label "msb201126-s4.xls" ;
  dcat:downloadURL "https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3159979/bin/msb201126-s4.xls" ;
  dcat:mediaType opredict:DataFormat_Textfile_tab ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Distribution_mesh_annotation_mim2mesh.tsv>
  rdf:type dcat:Distribution ;
  rdfs:label "mim2mesh.tsv" ;
  dcat:downloadURL "http://www.paccanarolab.org/static_content/disease_similarity/mim2mesh.tsv" ;
  dcat:mediaType opredict:DataFormat_Textfile_tab ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Distribution_phenotype_annotation_hpoteam.tab_Build_1263>
  rdf:type dcat:Distribution ;
  rdfs:label "phenotype_annotation_hpoteam.tab (Build #1263)" ;
  dcat:downloadURL "http://compbio.charite.de/jenkins/job/hpo.annotations/1263/artifact/misc/phenotype_annotation_hpoteam.tab" ;
  dcat:mediaType opredict:DataFormat_Textfile_tab ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Distribution_phenotype_annotation_hpoteam.tab_Build_1266>
  rdf:type dcat:Distribution ;
  rdfs:label "phenotype_annotation_hpoteam.tab (Build #1263)" ;
  dcat:downloadURL "http://compbio.charite.de/jenkins/job/hpo.annotations/1266/artifact/misc/phenotype_annotation_hpoteam.tab" ;
  dcat:mediaType opredict:DataFormat_Textfile_tab ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Distribution_pubchem_to_drugbank_pubchem.tsv>
  rdf:type dcat:Distribution ;
  rdfs:label "mim2mesh.tsv" ;
  dcat:downloadURL "https://raw.githubusercontent.com/dhimmel/drugbank/3e87872db5fca5ac427ce27464ab945c0ceb4ec6/data/mapping/pubchem.tsv" ;
  dcat:mediaType opredict:DataFormat_Textfile_tab ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Distribution_release-4-drugbank-drugbank.nq.gz>
  rdf:type dcat:Distribution ;
  rdfs:label "release/4/drugbank/drugbank.nq.gz" ;
  dcat:downloadURL "http://download.bio2rdf.org/files/release/4/drugbank/drugbank.nq.gz" ;
  dcat:mediaType opredict:DataFormat_nq_compressed_gz ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Distribution_release-4-drugbank-drugbank.nq.gz_local>
  rdf:type dcat:Distribution ;
  rdfs:label "release/4/drugbank/drugbank.nq.gz local" ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Distribution_release-4-kegg-kegg-drug.nq.gz>
  rdf:type dcat:Distribution ;
  rdfs:label "release/4/kegg/kegg-drug.nq.gz" ;
  dcat:downloadURL "http://download.bio2rdf.org/files/release/4/kegg/kegg-drug.nq.gz" ;
  dcat:mediaType opredict:DataFormat_nq_compressed_gz ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Distribution_release-4-kegg-kegg-drug.nq.gz_local>
  rdf:type dcat:Distribution ;
  rdfs:label "release/4/kegg/kegg-drug.nq.gz local" ;
  dcat:downloadURL "http://download.bio2rdf.org/files/release/4/kegg/kegg-drug.nq.gz" ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Distribution_release-4-sider-sider-se.nq.gz>
  rdf:type dcat:Distribution ;
  rdfs:label "release/4/sider/sider-se.nq.gz" ;
  dcat:downloadURL "http://download.bio2rdf.org/files/release/4/sider/sider-se.nq.gz" ;
  dcat:mediaType opredict:DataFormat_nq_compressed_gz ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Distribution_release-4-sider-sider-se.nq.gz_local>
  rdf:type dcat:Distribution ;
  rdfs:label "release/4/sider/sider-se.nq.gz local" ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Distribution_srep-2016-161017-srep35241-extref-srep35241-s3.txt>
  rdf:type dcat:Distribution ;
  rdfs:label "srep/2016/161017/srep35241/extref/srep35241-s3.txt" ;
  dcat:downloadURL "https://media.nature.com/full/nature-assets/srep/2016/161017/srep35241/extref/srep35241-s3.txt" ;
  dcat:mediaType opredict:DataFormat_Textfile_txt ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Distribution_srep35241-s3.txt_local>
  rdf:type dcat:Distribution ;
  rdfs:label "srep35241-s3.txt local" ;
.
opredict:EvaluationMeasure_PredictiveAccuracy
  rdf:type mls:EvaluationMeasure ;
.
opredict:EvaluationMeasure_PredictiveAveragePrecision
  rdf:type mls:EvaluationMeasure ;
.
opredict:EvaluationMeasure_PredictiveF1
  rdf:type mls:EvaluationMeasure ;
.
opredict:EvaluationMeasure_PredictivePrecision
  rdf:type mls:EvaluationMeasure ;
.
opredict:EvaluationMeasure_PredictiveRecall
  rdf:type mls:EvaluationMeasure ;
.
opredict:EvaluationMeasure_PredictiveRocAuc
  rdf:type mls:EvaluationMeasure ;
.
opredict:Generation_Output_Step_Feature_generation_01_Pipeline_Source_Cell01_Execution_1546300862
  rdf:type prov:Generation ;
  dc:description "This instance can describe information about the generation of the output of the cell, for example here we could have properties for different roles (generator) for each format (html x text), information provided by the user (e.g., data seem to be correct or no data found, etc), etc." ;
  prov:atTime "2019-01-01T00:01:15.761"^^xsd:dateTime ;
.
opredict:Generation_Output_Step_Feature_generation_01_Pipeline_Source_Cell02_Execution_1546300862
  rdf:type prov:Generation ;
  prov:atTime "2019-01-01T00:01:15.961"^^xsd:dateTime ;
.
opredict:Generation_Output_Step_Feature_generation_01_Pipeline_Source_Cell03_Execution_1546300862
  rdf:type prov:Generation ;
  prov:atTime "2019-01-01T00:01:16.961"^^xsd:dateTime ;
.
opredict:Generation_Output_Step_Feature_generation_01_Pipeline_Source_Cell04_Execution_1546300862
  rdf:type prov:Generation ;
  prov:atTime "2019-01-01T00:01:16.961"^^xsd:dateTime ;
.
opredict:Generation_Output_Step_Feature_generation_01_Pipeline_Source_Cell05_Execution_1546300862
  rdf:type prov:Generation ;
  prov:atTime "2019-01-01T00:01:16.961"^^xsd:dateTime ;
.
opredict:Generation_Output_Step_Feature_generation_01_Pipeline_Source_Cell08_Execution_1546300862
  rdf:type prov:Generation ;
  prov:atTime "2019-01-01T00:01:17.961"^^xsd:dateTime ;
.
opredict:Generation_Output_Step_Feature_generation_01_Pipeline_Source_Cell10_Execution_1546300862
  rdf:type prov:Generation ;
  prov:atTime "2019-01-01T00:01:17.961"^^xsd:dateTime ;
.
opredict:Generation_Output_Step_Feature_generation_Pipeline_OpenPREDICT_ipynb_v02_FeatureGeneration_Execution_1546335555
  rdf:type prov:Generation ;
  prov:atTime "2019-05-21T00:02:11.011"^^xsd:dateTime ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Generation_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell01_Execution_1546302862>
  rdf:type prov:Generation ;
  prov:atTime "2019-01-01T00:01:17.961"^^xsd:dateTime ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Generation_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell05_Execution_1546302862>
  rdf:type prov:Generation ;
  prov:atTime "2019-01-01T00:02:01.011"^^xsd:dateTime ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Generation_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell08_Execution_1546302862>
  rdf:type prov:Generation ;
  prov:atTime "2019-01-01T00:02:11.011"^^xsd:dateTime ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Generation_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell09_Execution_1546302862>
  rdf:type prov:Generation ;
  prov:atTime "2019-01-01T00:02:31.011"^^xsd:dateTime ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Generation_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Execution_1546302862>
  rdf:type prov:Generation ;
  prov:atTime "2019-01-01T00:02:31.011"^^xsd:dateTime ;
.
opredict:Generation_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02_Execution_1546335555
  rdf:type prov:Generation ;
  prov:atTime "2019-05-21T00:02:31.011"^^xsd:dateTime ;
.
opredict:Link_Pipeline_Source_Cell0_Variable
  rdf:type prov:Usage ;
  prov:entity :opredict_Variable_Context_Output_Cell0 ;
.
opredict:Link_results_to_variable_Input_file_drugbank-drug-smiles_tab
  rdf:type prov:Usage ;
  prov:entity opredict:Variable_Input_file_drugbank-drug-smiles_tab ;
  prov:entity opredict:Variable_Query_results_DRUG_SMILES_from_DRUGBANK ;
.
opredict:Link_results_to_variable_Input_file_drugbank-drug-target_tab
  rdf:type prov:Usage ;
  prov:entity opredict:Variable_Input_file_drugbank-drug-target_tab ;
  prov:entity opredict:Variable_Query_results_DRUG_TARGETS_from_DRUGBANK_and_KEGG ;
.
opredict:Link_results_to_variable_Input_file_drugbank-sider-se_tab
  rdf:type prov:Usage ;
  prov:entity opredict:Variable_Input_file_drugbank-sider-se_tab ;
  prov:entity opredict:Variable_Query_results_DRUG_SIDE_EFFECTS_from_SIDER ;
.
opredict:Link_variable_to_local_Drugbank_dataset
  rdf:type prov:Usage ;
  rdfs:label "Link variable to local Drugbank dataset" ;
  prov:entity <http://purl.org/plex/Instances/OpenPREDICT#Distribution_release-4-drugbank-drugbank.nq.gz_local> ;
  prov:entity opredict:Variable_Drugbank_dataset_local ;
.
opredict:Link_variable_to_local_Human_interactome_barabasi
  rdf:type prov:Usage ;
  rdfs:label "Link variable to local Human interactome barabasi" ;
  prov:entity <http://purl.org/plex/Instances/OpenPREDICT#Distribution_srep35241-s3.txt_local> ;
  prov:entity opredict:Variable_Human_interactome_barabasi_local ;
.
opredict:Link_variable_to_local_Kegg_dataset
  rdf:type prov:Usage ;
  rdfs:label "Link variable to local Kegg dataset" ;
  prov:entity <http://purl.org/plex/Instances/OpenPREDICT#Distribution_release-4-kegg-kegg-drug.nq.gz_local> ;
  prov:entity opredict:Variable_Kegg_dataset_online ;
.
opredict:Link_variable_to_local_SIDER_dataset
  rdf:type prov:Usage ;
  rdfs:label "Link variable to local SIDER dataset" ;
  prov:entity <http://purl.org/plex/Instances/OpenPREDICT#Distribution_release-4-sider-sider-se.nq.gz_local> ;
  prov:entity opredict:Variable_SIDER_dataset_local ;
.
opredict:Link_variable_to_local_phenotype_annotations
  rdf:type prov:Usage ;
  rdfs:label "Link variable to local phenotype annotations" ;
  prov:entity opredict:Distribution_Phenotype_annotations_file_local ;
  prov:entity opredict:Variable_Phenotype_annotations_file_local ;
.
<http://purl.org/plex/Instances/OpenPREDICT#ModelEvaluation_Accuracy_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Execution_1546302862>
  rdf:type mls:ModelEvaluation ;
  dc:description "0.833336" ;
  mls:specifiedBy opredict:EvaluationMeasure_PredictiveAccuracy ;
  prov:qualifiedGeneration <http://purl.org/plex/Instances/OpenPREDICT#Generation_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Execution_1546302862> ;
.
opredict:ModelEvaluation_Accuracy_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02_Execution_1546335555
  rdf:type mls:ModelEvaluation ;
  dc:description "0.6803722301090722" ;
  mls:specifiedBy opredict:EvaluationMeasure_PredictiveAccuracy ;
  prov:qualifiedGeneration opredict:Generation_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02_Execution_1546335555 ;
.
<http://purl.org/plex/Instances/OpenPREDICT#ModelEvaluation_AveragePrecision_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Execution_1546302862>
  rdf:type mls:ModelEvaluation ;
  dc:description "0.810000" ;
  mls:specifiedBy opredict:EvaluationMeasure_PredictiveAveragePrecision ;
  prov:qualifiedGeneration <http://purl.org/plex/Instances/OpenPREDICT#Generation_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Execution_1546302862> ;
.
opredict:ModelEvaluation_AveragePrecision_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02_Execution_1546335555
  rdf:type mls:ModelEvaluation ;
  dc:description "0.0" ;
  mls:specifiedBy opredict:EvaluationMeasure_PredictiveAveragePrecision ;
  prov:qualifiedGeneration opredict:Generation_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02_Execution_1546335555 ;
.
<http://purl.org/plex/Instances/OpenPREDICT#ModelEvaluation_F1_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Execution_1546302862>
  rdf:type mls:ModelEvaluation ;
  dc:description "0.685671" ;
  mls:specifiedBy opredict:EvaluationMeasure_PredictiveF1 ;
  prov:qualifiedGeneration <http://purl.org/plex/Instances/OpenPREDICT#Generation_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Execution_1546302862> ;
.
opredict:ModelEvaluation_F1_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02_Execution_1546335555
  rdf:type mls:ModelEvaluation ;
  dc:description "0.0" ;
  mls:specifiedBy opredict:EvaluationMeasure_PredictiveF1 ;
  prov:qualifiedGeneration opredict:Generation_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02_Execution_1546335555 ;
.
<http://purl.org/plex/Instances/OpenPREDICT#ModelEvaluation_Precision_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Execution_1546302862>
  rdf:type mls:ModelEvaluation ;
  dc:description "0.918820" ;
  mls:specifiedBy opredict:EvaluationMeasure_PredictivePrecision ;
  prov:qualifiedGeneration <http://purl.org/plex/Instances/OpenPREDICT#Generation_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Execution_1546302862> ;
.
opredict:ModelEvaluation_Precision_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02_Execution_1546335555
  rdf:type mls:ModelEvaluation ;
  dc:description "0.0" ;
  mls:specifiedBy opredict:EvaluationMeasure_PredictivePrecision ;
  prov:qualifiedGeneration opredict:Generation_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02_Execution_1546335555 ;
.
<http://purl.org/plex/Instances/OpenPREDICT#ModelEvaluation_Recall_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Execution_1546302862>
  rdf:type mls:ModelEvaluation ;
  dc:description "0.549804" ;
  mls:specifiedBy opredict:EvaluationMeasure_PredictiveRecall ;
  prov:qualifiedGeneration <http://purl.org/plex/Instances/OpenPREDICT#Generation_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Execution_1546302862> ;
.
opredict:ModelEvaluation_Recall_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02_Execution_1546335555
  rdf:type mls:ModelEvaluation ;
  dc:description "0.0" ;
  mls:specifiedBy opredict:EvaluationMeasure_PredictiveRecall ;
  prov:qualifiedGeneration opredict:Generation_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02_Execution_1546335555 ;
.
<http://purl.org/plex/Instances/OpenPREDICT#ModelEvaluation_RocAuc_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Execution_1546302862>
  rdf:type mls:ModelEvaluation ;
  dc:description "0.549804" ;
  mls:specifiedBy opredict:EvaluationMeasure_PredictiveRocAuc ;
  prov:qualifiedGeneration <http://purl.org/plex/Instances/OpenPREDICT#Generation_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Execution_1546302862> ;
.
opredict:ModelEvaluation_RocAuc_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02_Execution_1546335555
  rdf:type mls:ModelEvaluation ;
  dc:description "0.7155250305250306" ;
  mls:specifiedBy opredict:EvaluationMeasure_PredictiveRocAuc ;
  prov:qualifiedGeneration opredict:Generation_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02_Execution_1546335555 ;
.
opredict:NodeShape_DRUG_SIDE_EFFECTS_from_SIDER
  rdf:type sh:NodeShape ;
  sh:sparql opredict:SPARQLConstraint_DRUG_SIDE_EFFECTS_from_SIDER ;
  sh:targetClass opredict:QueryExecution_DRUG_SIDE_EFFECTS_from_SIDER ;
.
opredict:NodeShape_DRUG_SMILES_from_DRUGBANK
  rdf:type sh:NodeShape ;
  sh:sparql opredict:SPARQLConstraint_DRUG_SMILES_from_DRUGBANK ;
  sh:targetClass opredict:QueryExecution_DRUG_SMILES_from_DRUGBANK ;
.
opredict:NodeShape_DRUG_TARGETS_from_DRUGBANK_and_KEGG
  rdf:type sh:NodeShape ;
  sh:sparql opredict:SPARQLConstraint_DRUG_TARGETS_from_DRUGBANK_and_KEGG ;
  sh:targetClass opredict:QueryExecution_DRUG_TARGETS_from_DRUGBANK_and_KEGG ;
.
opredict:Plan_Add_files_to_triplestore_and_execute_queries
  rdf:type p-plan:Plan ;
  dc:description "Add files to triplestore and execute queries" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  pwo:hasFirstStep opredict:Step_Upload_files_to_a_triplestore ;
  rdfs:label "Add files to triplestore and execute queries" ;
.
opredict:Plan_Download_Drugbank_dataset
  rdf:type p-plan:Plan ;
  dc:description "Download Drugbank dataset" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  rdfs:label "Download Drugbank dataset" ;
  prov:qualifiedUsage opredict:Usage_Fetch_download_Drugbank_dataset_to_variable ;
.
opredict:Plan_Download_Kegg_dataset
  rdf:type p-plan:Plan ;
  dc:description "Download Kegg dataset" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  rdfs:label "Download Kegg dataset" ;
  prov:qualifiedUsage opredict:Usage_Fetch_download_Kegg_dataset_to_variable ;
.
opredict:Plan_Download_SIDER_dataset
  rdf:type p-plan:Plan ;
  dc:description "Download SIDER dataset" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  rdfs:label "Download SIDER dataset" ;
  prov:qualifiedUsage opredict:Usage_Fetch_download_SIDER_dataset_to_variable ;
.
opredict:Plan_Download_and_save_Drugbank_dataset
  rdf:type p-plan:Plan ;
  dc:description "Download and save Drugbank dataset" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  pwo:hasFirstStep opredict:Step_Download_Drugbank_dataset ;
  rdfs:label "Download and save Drugbank dataset" ;
.
opredict:Plan_Download_and_save_Kegg_dataset
  rdf:type p-plan:Plan ;
  dc:description "Download and save Kegg dataset" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  pwo:hasFirstStep opredict:Step_Download_Kegg_dataset ;
  rdfs:label "Download and save Kegg dataset" ;
.
opredict:Plan_Download_and_save_SIDER_dataset
  rdf:type p-plan:Plan ;
  dc:description "Download and save SIDER dataset" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  pwo:hasFirstStep opredict:Step_Download_SIDER_dataset ;
  rdfs:label "Download and save SIDER dataset" ;
.
opredict:Plan_Download_and_save_gold_standard_drug_indications
  rdf:type p-plan:Plan ;
  dc:description """#!/usr/bin/env python
# coding: utf-8

\"\"\"
RDF generator for the PREDICT drug indication gold standard (https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3159979/bin/msb201126-s4.xls)
@version 1.0
@author Remzi Celebi
\"\"\"


import pandas as pd
from csv import reader
import utils
from utils import Dataset, DataResource
from rdflib import Graph, URIRef, Literal, RDF, ConjunctiveGraph
from rdflib import Namespace
import datetime


DC = Namespace(\"http://purl.org/dc/terms/\")

mapping_df = pd.read_excel('https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3159979/bin/msb201126-s4.xls')
#save the original file
mapping_df.to_csv('../data/external/msb201126-s4.csv', index=False)


mapping_df['OMIM disease name'].replace({'Neuropathy, Hereditary Sensory And Autonomic, Type I, With Cough And':
                                         'Neuropathy, Hereditary Sensory And Autonomic, Type I, With Cough And Gastroesophageal Reflux'}, inplace=True)

goldstd_df = pd.read_excel('https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3159979/bin/msb201126-s1.xls')
# save the file
goldstd_df.to_csv('../data/external/msb201126-s1.csv', sep='\\t', index=False)

goldstd_df['Drug name'].replace({'Divalproex Sodium':'Valproic Acid',
                                 'Bismuth':'Bismuth subsalicylate',
                                'Clobetasol':'Clobetasol propionate',
                               'Guanadrel Sulfate':'Guanadrel',
                                 'Marinol':'Dronabinol',
                               'Medroxyprogesterone':'Medroxyprogesterone acetate',
                                'Megestrol':'Megestrol acetate',
                                'Propoxyphene':'Dextropropoxyphene',
                                 'Salicyclic Acid':'Salicylic acid',
                                'Ipratropium':'Ipratropiumbromid',
                                'Adenosine Monophosphate':'Adenosine monophosphate',
                                'Arsenic Trioxide':'Arsenic trioxide',
                                'Ethacrynic Acid':'Ethacrynic acid',
                                'Fondaparinux Sodium':'Fondaparinux sodium',
                                 'Meclofenamic Acid':'Meclofenamic acid',
                                'Methyl Aminolevulinate':'Methyl aminolevulinate'},inplace=True)




merged_df = goldstd_df.merge(mapping_df, left_on='Disease name', right_on='OMIM disease name')


drug_synonym_df = pd.read_csv('../data/input/drugbank-drug-synonym.csv')
merged_df = merged_df.merge(drug_synonym_df, left_on='Drug name', right_on='name')

print ('# of drug-disease associations',len(merged_df[['drugid','OMIM ID']].drop_duplicates()))


gold_std_mapped_df = merged_df[['drugid','OMIM ID']].drop_duplicates()
gold_std_mapped_df['drugid'] = gold_std_mapped_df['drugid'].map(lambda x: 'http://bio2rdf.org/drugbank:'+str(x))
gold_std_mapped_df['OMIM ID'] = gold_std_mapped_df['OMIM ID'].map(lambda x: 'http://bio2rdf.org/omim:'+str(x))
gold_std_mapped_df.rename(columns={'OMIM ID':'http://bio2rdf.org/openpredict_vocabulary:indication'},inplace=True)
gold_std_mapped_df= gold_std_mapped_df.set_index('drugid', drop=True)

column_types ={'http://bio2rdf.org/openpredict_vocabulary:indication':'URI'}
graphURI ='http://fairworkflows.org/openpredict_resource:fairworkflows.dataset.openpredict.predict.R1'
g = ConjunctiveGraph(identifier = URIRef(graphURI))  
g=  utils.to_rdf(g, gold_std_mapped_df, column_types, 'http://bio2rdf.org/drugbank:Drug' )



def addMetaData(g, graphURI):
    #generate dataset
    data_source = Dataset(qname=graphURI, graph = g)
    data_source.setURI(graphURI)
    data_source.setTitle('Supplementary data used in the PREDICT')
    data_source.setDescription('Drug indications gold standard and mappings used in the study of \"PREDICT: a method for inferring novel drug indications with application to personalized medicine\" ')
    data_source.setPublisher('https://www.embopress.org/journal/17444292')
    data_source.setPublisherName('Molecular Systems Biology')
    data_source.addRight('use-share-modify')
    data_source.addTheme('http://www.wikidata.org/entity/Q56863002')
    data_source.setLicense('https://www.embopress.org/page/journal/17444292/about')
    data_source.setHomepage('https://dx.doi.org/10.1038%2Fmsb.2011.26')
    data_source.setVersion('1.0')


    #generate dataset distribution
    data_dist1 = DataResource(qname=graphURI, graph = data_source.toRDF())
    data_dist1.setURI('https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3159979/bin/msb201126-s4.xls')
    data_dist1.setTitle('Mapping between OMIM diseases and UMLS concepts used in the PREDICT study (msb201126-s4.xls)')
    data_dist1.setDescription('This file contains the mappings between OMIM diseases and UMLS concepts used in the PREDICT study')
    data_dist1.setLicense('https://creativecommons.org/publicdomain/zero/1.0/')
    data_dist1.setVersion('1.0')
    data_dist1.setFormat('application/vnd.ms-excel')
    data_dist1.setMediaType('application/vnd.ms-excel')
    data_dist1.setPublisher('https://www.embopress.org/journal/17444292')
    data_dist1.addRight('use-share-modify')
    data_dist1.setRetrievedDate(datetime.datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\"))
    data_dist1.setDataset(data_source.getURI())
    
    
    #generate dataset distribution
    data_dist2 = DataResource(qname=graphURI, graph = data_dist1.toRDF())
    data_dist2.setURI('https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3159979/bin/msb201126-s1.xls')
    data_dist2.setTitle('Drug indications gold standard used in the PREDICT study (msb201126-s1.xls)')
    data_dist2.setDescription('This file contains the gold standard drug indications used in the PREDICT study')
    data_dist2.setLicense('https://creativecommons.org/publicdomain/zero/1.0/')
    data_dist2.setVersion('1.0')
    data_dist2.setFormat('application/vnd.ms-excel')
    data_dist2.setMediaType('application/vnd.ms-excel')
    data_dist2.setPublisher('https://www.embopress.org/journal/17444292')
    data_dist2.addRight('use-share-modify')
    data_dist2.setRetrievedDate(datetime.datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\"))
    data_dist2.setDataset(data_source.getURI())
     

    #generate RDF data distrubtion
    rdf_dist = DataResource(qname=graphURI, graph = data_dist2.toRDF() )
    rdf_dist.setURI('https://github.com/fair-workflows/openpredict/blob/master/data/rdf/predict-gold-standard-omim.nq.gz')
    rdf_dist.setTitle('RDF version of PREDICT drug indication gold standard')
    rdf_dist.setDescription('This file is the RDF version of PREDICT drug indication gold standard')
    rdf_dist.setLicense('http://creativecommons.org/licenses/by/3.0/')
    rdf_dist.setVersion('1.0')
    rdf_dist.setFormat('application/n-quads')
    rdf_dist.setMediaType('application/n-quads')
    rdf_dist.addRight('use-share-modify')
    rdf_dist.addRight('by-attribution')
    rdf_dist.addRight('restricted-by-source-license')
    rdf_dist.setCreateDate(datetime.datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\"))
    rdf_dist.setCreator('https://github.com/fair-workflows/openpredict/src/MappingPREDICTGoldstandard.py')
    rdf_dist.setDownloadURL('https://github.com/fair-workflows/openpredict/known_associations/predict-gold-standard-omim.nq.gz')
    rdf_dist.setDataset(data_dist2.getURI())
    rdf_dist.addSource('https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3159979/bin/msb201126-s1.xls')
    rdf_dist.addSource('https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3159979/bin/msb201126-s4.xls')
      
    return rdf_dist.toRDF()

g= addMetaData(g, graphURI)

outfile ='../data/rdf/predict-gold-standard-omim.nq'
g.serialize(outfile, format='nquads')
print('RDF is generated at '+outfile)



""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
  rdfs:label "Download and save the mappings between OMIM diseases and UMLS concepts used in the PREDICT study (msb201126-s4.xls)" ;
  dcat:downloadURL "https://github.com/fair-workflows/openpredict/blob/2e1bb7b6ba12e2df3e80d2b0a89a116703ce7180/src/MappingPREDICTGoldstandard.py" ;
  prov:qualifiedUsage opredict:Usage_Fetch_download_gold_standard_drug_indications ;
.
opredict:Plan_Download_and_save_human_interactome_barabasi
  rdf:type p-plan:Plan ;
  dc:description "Download and save human interactome barabasi" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  pwo:hasFirstStep opredict:Step_Download_human_interactome_barabasi ;
  rdfs:label "Download and save human interactome barabasi" ;
.
opredict:Plan_Download_and_save_human_interactome_barabasi_v02
  rdf:type p-plan:Plan ;
  dc:description """#!/usr/bin/env python
# coding: utf-8

\"\"\"
RDF generator for the Human Interactome (https://media.nature.com/full/nature-assets/srep/2016/161017/srep35241/extref/srep35241-s3.txt)
@version 1.0
@author Remzi Celebi
\"\"\"

import pandas as pd
import utils
from utils import Dataset, DataResource

from rdflib import Namespace
from rdflib import Graph, URIRef, Literal, RDF, ConjunctiveGraph
import datetime

DC = Namespace(\"http://purl.org/dc/terms/\")


def download():
    url = 'https://media.nature.com/full/nature-assets/srep/2016/161017/srep35241/extref/srep35241-s3.txt'
    return pd.read_csv(url,skiprows=25,sep='\\t')


interactome_df = download()

interactome_df.rename(columns={'# gene_ID_1':'gene_id_1',' gene_ID_2':'gene_id_2','data_source(s)':'source'}, inplace=True)

# save the file
interactome_df.to_csv('../data/external/human_interactome.tsv', sep='\\t', index=False)


interactome_df.index =interactome_df.apply(lambda row: 'http://bio2rdf.org/openpredict_resource:'+str(row['gene_id_1'])+'_'+str(row['gene_id_2']), axis=1)

interactome_df['gene_id_1'] = interactome_df['gene_id_1'].map(lambda x: 'http://bio2rdf.org/ncbigene:'+str(x))
interactome_df['gene_id_2'] = interactome_df['gene_id_2'].map(lambda x: 'http://bio2rdf.org/ncbigene:'+str(x))
interactome_df.rename(columns={'gene_id_1':'http://bio2rdf.org/irefindex_vocabulary:interactor_a'},inplace=True)

interactome_df.rename(columns={'gene_id_2':'http://bio2rdf.org/irefindex_vocabulary:interactor_b'},inplace=True)
interactome_df.rename(columns={'source':'http://bio2rdf.org/irefindex_vocabulary:source'},inplace=True)


column_types ={'http://bio2rdf.org/irefindex_vocabulary:interactor_a':'URI','http://bio2rdf.org/irefindex_vocabulary:interactor_b':'URI','http://bio2rdf.org/irefindex_vocabulary:source':'Literal'}
graphURI = URIRef('http://fairworkflows.org/openpredict_resource:fairworkflows.dataset.openpredict.interactome.R1')
g =  ConjunctiveGraph(identifier = graphURI)     
g=  utils.to_rdf(g, interactome_df, column_types, 'http://edamontology.org/topic_0128' )

def addMetaData(g, graphURI):
    #generate dataset
    data_source = Dataset(qname=graphURI, graph = g)
    data_source.setURI(graphURI)
    data_source.setTitle('The Human Interactome Dataset')
    data_source.setDescription('Human Interactome data used in \"Uncovering Disease-Disease Relationships Through The Human Interactome\" study')
    data_source.setPublisher('https://science.sciencemag.org/')
    data_source.setPublisherName('American Association for the Advancement of Science')
    data_source.addRight('no-commercial')
    data_source.addRight('use')
    data_source.addTheme('http://www.wikidata.org/entity/Q896177')
    data_source.addTheme('http://www.wikidata.org/entity/Q25113323')
    data_source.setLicense('https://www.sciencemag.org/about/terms-service')
    data_source.setHomepage('https://dx.doi.org/10.1126%2Fscience.1257601')
    data_source.setVersion('1.0')


    #generate dataset distribution
    data_dist = DataResource(qname=graphURI, graph = data_source.toRDF())
    data_dist.setURI('https://media.nature.com/full/nature-assets/srep/2016/161017/srep35241/extref/srep35241-s3.txt')
    data_dist.setTitle('The Human Interactome Dataset (srep35241-s3.txt)')
    data_dist.setLicense('https://www.sciencemag.org/about/terms-service')
    data_dist.setVersion('1.0')
    data_dist.setFormat('text/tab-separated-value')
    data_dist.setMediaType('text/tab-separated-value')
    data_dist.setPublisher('https://science.sciencemag.org/')
    data_dist.addRight('no-commercial')
    data_dist.addRight('use')
    data_dist.setRetrievedDate(datetime.datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\"))
    data_dist.setDataset(data_source.getURI())

    #generate RDF data distrubtion
    rdf_dist = DataResource(qname=graphURI, graph = data_dist.toRDF() )
    rdf_dist.setURI('https://github.com/fair-workflows/openpredict/blob/master/data/rdf/human_interactome.nq.gz')
    rdf_dist.setTitle('RDF Version of the Human Interactome')
    rdf_dist.setLicense('http://creativecommons.org/licenses/by/3.0/')
    rdf_dist.setVersion('1.0')
    rdf_dist.setFormat('application/n-quads')
    rdf_dist.setMediaType('application/n-quads')
    rdf_dist.addRight('use-share-modify')
    rdf_dist.addRight('by-attribution')
    rdf_dist.addRight('restricted-by-source-license')
    rdf_dist.setCreateDate(datetime.datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\"))
    rdf_dist.setCreator('https://github.com/fair-workflows/openpredict/src/HumanInteractome.py')
    rdf_dist.setDownloadURL('https://github.com/fair-workflows/openpredict/blob/master/data/rdf/human_interactome.nq.gz')
    rdf_dist.setDataset(data_dist.getURI())
      
    return rdf_dist.toRDF()

g = addMetaData(g, graphURI)


outfile ='../data/rdf/human_interactome.nq'
g.serialize(outfile, format='nquads')
print('RDF is generated at '+outfile)



""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
  rdfs:label "Download and save human interactome barabasi" ;
  dcat:downloadURL "https://github.com/fair-workflows/openpredict/blob/2e1bb7b6ba12e2df3e80d2b0a89a116703ce7180/src/HumanInteractome.py" ;
  prov:qualifiedUsage opredict:Usage_Fetch_download_Human_interactome_barabasi_to_variable ;
  prov:wasRevisionOf opredict:Plan_Download_and_save_human_interactome_barabasi ;
.
opredict:Plan_Download_and_save_mesh_annotation
  rdf:type p-plan:Plan ;
  dc:description """#!/usr/bin/env python
# coding: utf-8
\"\"\"
RDF generator for the PREDICT drug indication gold standard (http://www.paccanarolab.org/static_content/disease_similarity/mim2mesh.tsv)
@version 1.0
@author Remzi Celebi
\"\"\"


import pandas as pd
from csv import reader
import utils
from utils import Dataset, DataResource
from rdflib import Graph, URIRef, Literal, RDF, ConjunctiveGraph
from rdflib import Namespace
import datetime


DC = Namespace(\"http://purl.org/dc/terms/\")


url = 'http://www.paccanarolab.org/static_content/disease_similarity/mim2mesh.tsv'
df = pd.read_csv(url,header=None)
#save the original file
df.to_csv('../data/external/mim2mesh.tsv', sep=',', index=False, header=None)


omim_annots =[]
with open('../data/external/mim2mesh.tsv','r') as mim2mesh_file:
    for row in mim2mesh_file:
        line = row.strip().split('\\t')
        omim =line[0]
        for i in range(1,len(line)):
            omim_annots.append([omim,line[i]])

mim2mesh_df = pd.DataFrame(omim_annots, columns=['disease','annotation'])

mim2mesh_df['disease'] = mim2mesh_df['disease'].map(lambda x: 'http://bio2rdf.org/omim:'+str(x))
mim2mesh_df['annotation'] = mim2mesh_df['annotation'].map(lambda x: 'http://bio2rdf.org/mesh:'+str(x))
mim2mesh_df = mim2mesh_df.set_index('disease', drop=True)
mim2mesh_df.rename(columns={'annotation':'http://semanticscience.org/resource/SIO_000255'},inplace=True)
column_types ={'http://semanticscience.org/resource/SIO_000255':'URI'}
graphURI = URIRef('http://fairworkflows.org/openpredict_resource:fairworkflows.dataset.openpredict.meshannot.R1')
    
g = ConjunctiveGraph(identifier = graphURI )     
g =  utils.to_rdf(g, mim2mesh_df, column_types, 'http://bio2rdf.org/omim_vocabulary:Phenotype' )

def addMetaData(g, graphURI):
    #generate dataset
    data_source = Dataset(qname=graphURI, graph = g)
    data_source.setURI(graphURI)
    data_source.setTitle('Mesh Annotations for OMIM diseases')
    data_source.setDescription('This dataset contains the MeSH terms associated with the publications referenced in OMIM. This dataset is used in  \" https://doi.org/10.1038/srep17658\"')
    data_source.setPublisher('http://www.paccanarolab.org')
    data_source.setPublisherName('the Paccanaro Lab')
    data_source.addRight('use-share-modify')
    data_source.addTheme('http://www.wikidata.org/entity/Q199897')
    data_source.addTheme('http://www.wikidata.org/entity/Q857525')
    data_source.setLicense('http://creativecommons.org/licenses/by/4.0/')
    data_source.setHomepage('http://www.paccanarolab.org/disease_similarity/')
    data_source.setVersion('1.0')


    #generate dataset distribution
    data_dist = DataResource(qname=graphURI, graph = data_source.toRDF())
    data_dist.setURI('http://www.paccanarolab.org/static_content/disease_similarity/mim2mesh.tsv')
    data_dist.setTitle('Mesh Annotations by the Paccanaro Lab(mim2mesh.tsv)')
    data_dist.setLicense('http://creativecommons.org/licenses/by/4.0/')
    data_dist.setVersion('1.0')
    data_dist.setFormat('text/tab-separated-value')
    data_dist.setMediaType('text/tab-separated-value')
    data_dist.setPublisher('http://www.paccanarolab.org')
    data_dist.addRight('use-share-modify')
    data_dist.setRetrievedDate(datetime.datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\"))
    data_dist.setDataset(data_source.getURI())

    #generate RDF data distrubtion
    rdf_dist = DataResource(qname=graphURI, graph = data_dist.toRDF() )
    rdf_dist.setURI('https://github.com/fair-workflows/openpredict/blob/master/data/rdf/omim_mesh_annotations.nq.gz')
    rdf_dist.setTitle('RDF Version of the MESH Annotations for OMIM diseases')
    rdf_dist.setLicense('http://creativecommons.org/licenses/by/3.0/')
    rdf_dist.setVersion('1.0')
    rdf_dist.setFormat('application/n-quads')
    rdf_dist.setMediaType('application/n-quads')
    rdf_dist.addRight('use-share-modify')
    rdf_dist.addRight('by-attribution')
    rdf_dist.addRight('restricted-by-source-license')
    rdf_dist.setCreateDate(datetime.datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\"))
    rdf_dist.setCreator('https://github.com/fair-workflows/openpredict/src/RDFConversionOfMeshAnnotation.py')
    rdf_dist.setDownloadURL('https://github.com/fair-workflows/openpredict/blob/master/data/rdf/omim_mesh_annotations.nq.gz')
    rdf_dist.setDataset(data_dist.getURI())
      
    return rdf_dist.toRDF()


g= addMetaData(g, graphURI)

outfile ='../data/rdf/omim_mesh_annotations.nq'
g.serialize(outfile, format='nquads')
print('RDF is generated at '+outfile)


""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
  rdfs:label "Download and save drug indication gold standard (http://www.paccanarolab.org/static_content/disease_similarity/mim2mesh.tsv)" ;
  dcat:downloadURL "https://github.com/fair-workflows/openpredict/blob/2e1bb7b6ba12e2df3e80d2b0a89a116703ce7180/src/RDFConversionOfMeshAnnotation.py" ;
  prov:qualifiedUsage opredict:Usage_Fetch_download_mesh_annotation_to_variable ;
.
opredict:Plan_Download_and_save_phenotype_annotations
  rdf:type p-plan:Plan ;
  dc:description """1-Download from:
http://compbio.charite.de/jenkins/job/hpo.annotations/lastStableBuild/artifact/misc/phenotype_annotation_hpoteam.tab
2-Save file as:
/input/phenotype_annotation_hpoteam.tab""" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  pwo:hasFirstStep opredict:Step_Download_phenotype_annotations ;
  rdfs:label "Download and save phenotype annotations " ;
.
opredict:Plan_Download_and_save_phenotype_annotations_v02
  rdf:type p-plan:Plan ;
  dc:description """#!/usr/bin/env python
# coding: utf-8

\"\"\"
RDF generator for the OMIM HPO Annotations (http://compbio.charite.de/jenkins/job/hpo.annotations/lastSuccessfulBuild/artifact/misc/phenotype_annotation_hpoteam.tab)
@version 1.0
@author Remzi Celebi
\"\"\"


import pandas as pd
from csv import reader
import utils
from utils import Dataset, DataResource
from rdflib import Graph, URIRef, Literal, RDF, ConjunctiveGraph
from rdflib import Namespace
import datetime

DC = Namespace(\"http://purl.org/dc/terms/\")


url = 'http://compbio.charite.de/jenkins/job/hpo.annotations/lastSuccessfulBuild/artifact/misc/phenotype_annotation_hpoteam.tab'
hpoannot_df = pd.read_csv(url,sep='\\t', header=None)

#save the file
hpoannot_df.to_csv('../data/external/phenotype_annotation_hpoteam.tab', sep='\\t', index=False, header=None)

#preprocessing
hpoannot_df.rename(columns={0:'DB',1:'DB_Object_ID',4:'HPO_ID'}, inplace=True)
hpoannot_df = hpoannot_df[['DB','DB_Object_ID','HPO_ID']]
hpoannot_df= hpoannot_df[hpoannot_df.DB =='OMIM']
hpoannot_df.drop(columns=['DB'], inplace=True)

hpoannot_df['DB_Object_ID'] = hpoannot_df['DB_Object_ID'].map(lambda x: 'http://bio2rdf.org/omim:'+str(x))
hpoannot_df['HPO_ID']= hpoannot_df['HPO_ID'].map(lambda x: 'http://bio2rdf.org/hpo:'+str(x[3:]))
hpoannot_df = hpoannot_df.set_index('DB_Object_ID', drop=True)
hpoannot_df.rename(columns={'HPO_ID':'http://semanticscience.org/resource/SIO_000255'},inplace=True)

column_types ={'http://semanticscience.org/resource/SIO_000255':'URI'}
graphURI = URIRef('http://fairworkflows.org/openpredict_resource:fairworkflows.dataset.openpredict.hpoannot.R1')
g = ConjunctiveGraph(identifier = graphURI)     

g=  utils.to_rdf(g, hpoannot_df, column_types, 'http://bio2rdf.org/omim_vocabulary:Phenotype' )

def addMetaData(g, graphURI):
    #generate dataset
    data_source = Dataset(qname=graphURI, graph = g)
    data_source.setURI(graphURI)
    data_source.setTitle('Phenotype annotatations by the HPO-team')
    data_source.setDescription('This dataset contains manual and semi-automated annotations created by the HPO-team. These are annotations of OMIM-, Orphanet-, and DECIPHER-entries')
    data_source.setPublisher('https://monarchinitiative.org/')
    data_source.setPublisherName('Monarch Initiative')
    data_source.addRight('use')
    data_source.addTheme('http://www.wikidata.org/entity/Q17027854')
    data_source.addTheme('http://www.wikidata.org/entity/Q45314346')
    data_source.setLicense('https://hpo.jax.org/app/license')
    data_source.setHomepage('https://hpo.jax.org/app/download/annotation')
    data_source.setVersion('1.0')


    #generate dataset distribution
    data_dist = DataResource(qname=graphURI, graph = data_source.toRDF())
    data_dist.setURI('http://compbio.charite.de/jenkins/job/hpo.annotations/lastStableBuild/artifact/misc/phenotype_annotation.tab')
    data_dist.setTitle('Phenotypes annotated by the HPO-team (phenotype_annotation_hpoteam.tab)')
    data_dist.setLicense('https://hpo.jax.org/app/license')
    data_dist.setVersion('1.0')
    data_dist.setFormat('text/tab-separated-value')
    data_dist.setMediaType('text/tab-separated-value')
    data_dist.setPublisher('https://monarchinitiative.org/')
    data_dist.addRight('use')
    data_dist.setRetrievedDate(datetime.datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\"))
    data_dist.setDataset(data_source.getURI())

    #generate RDF data distrubtion
    rdf_dist = DataResource(qname=graphURI, graph = data_dist.toRDF() )
    rdf_dist.setURI('https://github.com/fair-workflows/openpredict/blob/master/data/rdf/hpo_annotations.nq.gz')
    rdf_dist.setTitle('RDF Version of the OMIM HPO Annotations')
    rdf_dist.setLicense('http://creativecommons.org/licenses/by/3.0/')
    rdf_dist.setVersion('1.0')
    rdf_dist.setFormat('application/n-quads')
    rdf_dist.setMediaType('application/n-quads')
    rdf_dist.addRight('use-share-modify')
    rdf_dist.addRight('by-attribution')
    rdf_dist.addRight('restricted-by-source-license')
    rdf_dist.setCreateDate(datetime.datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\"))
    rdf_dist.setCreator('https://github.com/fair-workflows/openpredict/src/OMIMHpoAnnotations.py')
    rdf_dist.setDownloadURL('https://github.com/fair-workflows/openpredict/blob/master/data/rdf/hpo_annotations.nq.gz')
    rdf_dist.setDataset(data_dist.getURI())
      
    return rdf_dist.toRDF()

g = addMetaData(g, graphURI)
outfile ='../data/rdf/hpo_annotations.nq'
g.serialize(outfile, format='nquads')
print('RDF is generated at '+outfile)

""" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  rdfs:label "Download and save phenotype annotations " ;
  dcat:downloadURL "https://raw.githubusercontent.com/fair-workflows/openpredict/master/src/OMIMHpoAnnotations.py?token=AB7DEPUIR4M6G6AKGFIIBF25H4GWC" ;
  prov:qualifiedUsage opredict:Usage_Fetch_download-_phenotype_annotations_to_variable_v02 ;
  prov:wasRevisionOf opredict:Plan_Download_and_save_phenotype_annotations ;
.
opredict:Plan_Download_and_save_pubchem_to_drugbank
  rdf:type p-plan:Plan ;
  dc:description """#!/usr/bin/env python
# coding: utf-8
\"\"\"
RDF generator for the mappings from Pubchem ids to Drugbank ids (https://raw.githubusercontent.com/dhimmel/drugbank/3e87872db5fca5ac427ce27464ab945c0ceb4ec6/data/mapping/pubchem.tsv)
@version 1.0
@author Remzi Celebi
\"\"\"


import pandas as pd
from csv import reader
import utils
from utils import Dataset, DataResource
from rdflib import Graph, URIRef, Literal, RDF, ConjunctiveGraph
from rdflib import Namespace
import datetime


DC = Namespace(\"http://purl.org/dc/terms/\")


url = 'https://raw.githubusercontent.com/dhimmel/drugbank/3e87872db5fca5ac427ce27464ab945c0ceb4ec6/data/mapping/pubchem.tsv'
drugbank_map_df = pd.read_csv(url, sep='\\t')

#save the original file
drugbank_map_df.to_csv('../data/external/pubchem.tsv', sep='\\t', index=False)


drugbank_map_df['drugbank_id'] = drugbank_map_df['drugbank_id'].map(lambda x: 'http://bio2rdf.org/drugbank:'+str(x))
drugbank_map_df['pubchem_id'] = drugbank_map_df['pubchem_id'].map(lambda x: 'http://bio2rdf.org/pubchem.compound:'+str(x))
drugbank_map_df = drugbank_map_df.set_index('drugbank_id', drop=True)
drugbank_map_df.rename(columns={'pubchem_id':'http://bio2rdf.org/openpredict_vocabulary:x-pubchemcompound'},inplace=True)

column_types ={'http://bio2rdf.org/openpredict_vocabulary:x-pubchemcompound':'URI'}
graphURI = URIRef('http://fairworkflows.org/openpredict_resource:fairworkflows.dataset.openpredict.pubchem.R1')
g = ConjunctiveGraph(identifier = graphURI)     

g = utils.to_rdf(g, drugbank_map_df, column_types, 'http://bio2rdf.org/drugbank:Drug' )


def addMetaData(g, graphURI):
    #generate dataset
    data_source = Dataset(qname=graphURI, graph = g)
    data_source.setURI(graphURI)
    data_source.setTitle('Pubchem mappings for Drugbank drugs')
    data_source.setDescription('DrugBank to PubChem mapping using InChI strings created by Daniel Himmelstein.')
    data_source.setPublisher('https://github.com/dhimmel')
    data_source.setPublisherName('Daniel Himmelstein')
    data_source.addRight('use-share-modify')
    data_source.addTheme('http://www.wikidata.org/entity/Q278487')
    data_source.addTheme('http://www.wikidata.org/entity/Q1122544')
    data_source.setLicense('http://creativecommons.org/licenses/by/4.0/')
    data_source.setHomepage('https://github.com/dhimmel/drugbank/blob/gh-pages/pubchem-map.ipynb')
    data_source.setVersion('1.0')


    #generate dataset distribution
    data_dist = DataResource(qname=graphURI, graph = data_source.toRDF())
    data_dist.setURI('https://raw.githubusercontent.com/dhimmel/drugbank/3e87872db5fca5ac427ce27464ab945c0ceb4ec6/data/mapping/pubchem.tsv')
    data_dist.setTitle('Pubchem mappings for Drugbank drugs (pubchem.tsv)')
    data_dist.setLicense('http://creativecommons.org/licenses/by/4.0/')
    data_dist.setVersion('1.0')
    data_dist.setFormat('text/tab-separated-value')
    data_dist.setMediaType('text/tab-separated-value')
    data_dist.setPublisher('https://github.com/dhimmel')
    data_dist.addRight('use-share-modify')
    data_dist.setRetrievedDate(datetime.datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\"))
    data_dist.setDataset(data_source.getURI())

    #generate RDF data distrubtion
    rdf_dist = DataResource(qname=graphURI, graph = data_dist.toRDF() )
    rdf_dist.setURI('https://github.com/fair-workflows/openpredict/blob/master/data/rdf/pubchem_mapping.nq.gz')
    rdf_dist.setTitle('RDF Version of the Pubchem mappings for Drugbank drugs')
    rdf_dist.setLicense('http://creativecommons.org/licenses/by/3.0/')
    rdf_dist.setVersion('1.0')
    rdf_dist.setFormat('application/n-quads')
    rdf_dist.setMediaType('application/n-quads')
    rdf_dist.addRight('use-share-modify')
    rdf_dist.addRight('by-attribution')
    rdf_dist.addRight('restricted-by-source-license')
    rdf_dist.setCreateDate(datetime.datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\"))
    rdf_dist.setCreator('https://github.com/fair-workflows/openpredict/src/RDFConversionOfPubchemMapping.py')
    rdf_dist.setDownloadURL('https://github.com/fair-workflows/openpredict/blob/master/data/rdf/pubchem_mapping.nq.gz')
    rdf_dist.setDataset(data_dist.getURI())
      
    return rdf_dist.toRDF()


g = addMetaData(g, graphURI)

outfile ='../data/rdf/pubchem_mapping.nq'
g.serialize(outfile, format='nquads')
print('RDF is generated at '+outfile)



""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
  rdfs:label "Download and save the mappings from Pubchem ids to Drugbank ids (https://raw.githubusercontent.com/dhimmel/drugbank/3e87872db5fca5ac427ce27464ab945c0ceb4ec6/data/mapping/pubchem.tsv)" ;
  dcat:downloadURL "https://github.com/fair-workflows/openpredict/blob/2e1bb7b6ba12e2df3e80d2b0a89a116703ce7180/src/RDFConversionOfPubchemMapping.py" ;
  prov:qualifiedUsage opredict:Usage_Fetch_download_pubchem_to_drugbank ;
.
opredict:Plan_Download_human_interactome_barabasi
  rdf:type p-plan:Plan ;
  dc:description "Download human interactome barabasi" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  rdfs:label "Download human interactome barabasi" ;
  prov:qualifiedUsage opredict:Usage_Fetch_download_Human_interactome_barabasi_to_variable ;
.
opredict:Plan_Download_phenotype_annotations
  rdf:type p-plan:Plan ;
  dc:description "Download phenotype annotations" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  rdfs:label "Download phenotype annotations" ;
  prov:qualifiedUsage opredict:Usage_Fetch_download-_phenotype_annotations_to_variable ;
  prov:used <http://purl.org/plex/Instances/OpenPREDICT#Distribution_phenotype_annotation_hpoteam.tab_Build_1263> ;
.
opredict:Plan_Execute_FAIRifier_process_to_human_interactome_barabasi
  rdf:type p-plan:Plan ;
  dc:description "Execute FAIRifier process to human interactome barabasi" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  rdfs:label "Execute FAIRifier process to human interactome barabasi" ;
.
opredict:Plan_Execute_FAIRifier_process_to_phenotype_annotations
  rdf:type p-plan:Plan ;
  dc:description "Execute FAIRifier process to phenotype annotations" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  rdfs:label "Execute FAIRifier process to phenotype annotations" ;
.
opredict:Plan_Execute_queries_and_create_input_files_tab
  rdf:type rdfs:Resource ;
  pwo:hasFirstStep opredict:Step_Execute_query_DRUG_SIDE_EFFECTS_from_SIDER ;
  pwo:hasFirstStep opredict:Step_Execute_query_DRUG_SMILES_from_DRUGBANK ;
  pwo:hasFirstStep opredict:Step_Execute_query_DRUG_TARGETS_from_DRUGBANK_and_KEGG ;
.
opredict:Plan_Execute_query_DRUG_SIDE_EFFECTS_from_SIDER
  rdf:type p-plan:Plan ;
  dc:description "Execute query DRUG SIDE EFFECTS from SIDER" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  rdfs:label "Execute query DRUG SIDE EFFECTS from SIDER" ;
  prov:qualifiedUsage opredict:QueryExecution_DRUG_SIDE_EFFECTS_from_SIDER ;
.
opredict:Plan_Execute_query_DRUG_SMILES_from_DRUGBANK
  rdf:type p-plan:Plan ;
  dc:description "Execute query DRUG SMILES from DRUGBANK" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  rdfs:label "Execute query DRUG SMILES from DRUGBANK" ;
  prov:qualifiedUsage opredict:QueryExecution_DRUG_SMILES_from_DRUGBANK ;
.
opredict:Plan_Execute_query_DRUG_TARGETS_-from_DRUGBANK_and_KEGG
  rdf:type p-plan:Plan ;
  dc:description "Execute query DRUG TARGETS -from DRUGBANK and KEGG" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  rdfs:label "Execute query DRUG TARGETS -from DRUGBANK and KEGG" ;
  prov:qualifiedUsage opredict:QueryExecution_DRUG_TARGETS_from_DRUGBANK_and_KEGG ;
.
opredict:Plan_Feature_generation_01_Pipeline_OpenPREDICT_Spec
  rdf:type p-plan:Plan ;
  pwo:hasFirstStep opredict:Step_Feature_generation_01_Pipeline_Source_Cell01_Spec ;
  rdfs:label "Specification of feature generation" ;
.
opredict:Plan_Feature_generation_01_Pipeline_OpenPREDICT_ipynb
  rdf:type p-plan:Plan ;
  dc:description "Feature generation: Pipeline OpenPREDICT.ipynb" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
  pwo:hasFirstStep opredict:Step_Feature_generation_01_Pipeline_Source_Cell00 ;
  rdfs:label "Feature generation: Pipeline OpenPREDICT.ipynb" ;
  dcat:downloadURL "https://github.com/fair-workflows/openpredict/blob/975324eb5263bc0d5d709f833baca31952817844/FeatureGeneration.ipynb" ;
.
opredict:Plan_Feature_generation_01_Pipeline_Source_Cell00
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """import itertools
import math
import numpy as np
import pandas as pd""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
  prov:qualifiedUsage opredict:Link_Pipeline_Source_Cell0_Variable ;
.
opredict:Plan_Feature_generation_01_Pipeline_Source_Cell01
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """drug_target = pd.read_csv('data/input/drugbank-drug-target.csv')
target_seq = pd.read_csv('data/input/drugbank-target-seq.csv')
drug_goa = pd.read_csv('data/input/drugbank-drug-goa.csv')
drug_smiles = pd.read_csv('data/input/drugbank-drug-smiles.csv')
drug_se = pd.read_csv('data/input/drugbank-sider-se.csv')
drug_smiles.head()""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell01_Spec ;
.
opredict:Plan_Feature_generation_01_Pipeline_Source_Cell01_Spec
  rdf:type p-plan:Plan ;
  dc:description "Load input datasets" ;
  dc:language :LinguisticSystem_xsd_language_English ;
.
opredict:Plan_Feature_generation_01_Pipeline_Source_Cell02
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """print (\"%d drugs have all Target feature \"%len(  drug_target.drugid.unique()))
print (\"%d drugs have Target GOA feature \"%len( drug_goa.drugid.unique()))
print (\"%d drugs have Fingerprint feature \"%len(  drug_smiles.drugid.unique()))
print (\"%d drugs have Sideeffect feature \"%len( drug_se.drugid.unique()))""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell01_Spec ;
.
opredict:Plan_Feature_generation_01_Pipeline_Source_Cell03
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """drug_target_seq = drug_target.merge(target_seq, on= ['geneid'])
print (\"%d drugs have Target SEQ feature \"%len( drug_target_seq.drugid.unique()))""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell01_Spec ;
.
opredict:Plan_Feature_generation_01_Pipeline_Source_Cell04
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """a=drug_goa['drugid'].unique()
b=drug_target['drugid'].unique()
c=drug_smiles['drugid'].unique()
d=drug_se['drugid'].unique()
commonDrugs= set(a).intersection(b).intersection(c).intersection(d)
print (len(a),len(b),len(c),len(d))
print (len(commonDrugs))""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell01_Spec ;
.
opredict:Plan_Feature_generation_01_Pipeline_Source_Cell05
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description "drug_se.head()" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell01_Spec ;
.
opredict:Plan_Feature_generation_01_Pipeline_Source_Cell06
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """# ## Drug side effect similarity¶
# ## calculating Jaccard coefficient based on drug sideefects

drugSEDict = {k: g[\"umlsid\"].tolist() for k,g in drug_se.groupby(\"drugid\")}
scores = []

for comb in itertools.combinations(commonDrugs,2):
    drug1 =comb[0]
    drug2 =comb[1]

    sideeffects1 = drugSEDict[drug1]
    sideeffects2 = drugSEDict[drug2]
    c = set(sideeffects1).intersection(sideeffects2)
    u = set(sideeffects1).union(sideeffects2)
    score = len(c)/float(len(u))
    scores.append([drug1, drug2, score])""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell06_Spec ;
.
opredict:Plan_Feature_generation_01_Pipeline_Source_Cell06_Spec
  rdf:type p-plan:Plan ;
  dc:description "Calculate scores between pairs of drugs and compute similarity feature" ;
  dc:language :LinguisticSystem_xsd_language_English ;
.
opredict:Plan_Feature_generation_01_Pipeline_Source_Cell07
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description "drug_se_df = pd.DataFrame(scores, columns =['Drug1','Drug2','SE-SIM'])" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell06_Spec ;
.
opredict:Plan_Feature_generation_01_Pipeline_Source_Cell08
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description "drug_se_df.head()" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell06_Spec ;
.
opredict:Plan_Feature_generation_01_Pipeline_Source_Cell09
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description "drug_se_df.to_csv('data/features/drugs-se-sim.csv', index=False)" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell06_Spec ;
.
opredict:Plan_Feature_generation_01_Pipeline_Source_Cell10
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """# ## PPI based drug-drug similarity
# ###  calculate distance between drugs on protein-protein interaction network
#!pip install -q networkx==1.11

# calcuate pairwise distance between proteins in the human PPI network
import networkx as nx
G= nx.Graph()
with open('data/input/human-interactome.csv') as ppiFile: # human PPI network
    next(ppiFile) # skip first line
    drugs=set()
    for line in ppiFile:
        line=line.replace(\"'\",\"\").strip().split(',')
        G.add_edge(line[0],line[1])

ppi=nx.shortest_path_length(G)

def grapDistance(ppi, target1, target2):
    \"\"\"
    return the shortest path between two proteins in the PPI network
    ppi : dictonary that contains distance of PPI 
    target1 : first protein name
    target2 : second protein name
    \"\"\"
    maxValue = 9999
    if target1 not in ppi:
        return maxValue
    else:
        if target2 not in ppi[target1]:
            return maxValue
        else:
            return ppi[target1][target2]

drug_targetlist = {k: g[\"geneid\"].tolist() for k,g in drug_target.groupby(\"drugid\")}
values = []

# calculate PPI-based pairwise drug similarity (Closeness)
# First distances between proteins were transformed to similarity values using the formula described in Perlman et al (2011)
# A, b were chosen according to Perlman et al (2011) to be 0.9 × e and 1, respectively.
# Self similarity was assigned a value of 1.

# For drugs similarities, maximal values between the two lists of associated genes were averaged 
# (taking into account both sides for symmetry).

A = 0.9
b = 1
for comb in itertools.combinations(commonDrugs,2) :
    drug1 = comb[0]
    drug2 = comb[1]
    targetList1 = drug_targetlist[drug1]
    targetList2 = drug_targetlist[drug2]
    allscores =[]
    for target1 in sorted(targetList1):
        genescores = []
        for target2 in sorted(targetList2):
            target1 =str(target1)
            target2 =str(target2)    
            if target1 == target2:
                score=1.0
            else:
                score = A*math.exp(-b* grapDistance(ppi, target1, target2))
            genescores.append(score)
    # add maximal values between the two lists of associated genes 
    allscores.append(max(genescores))
    if len(allscores) ==0: continue
    #average the maximal scores 
    maxScore =np.mean(allscores)
    if maxScore >= 0:
        values.append([drug1, drug2, maxScore])

drug_ppi_df = pd.DataFrame(values, columns =['Drug1','Drug2','PPI-SIM'])

drug_ppi_df.head()

drug_ppi_df.to_csv('data/features/drugs-ppi-sim.csv', index=False)""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell10_Spec ;
.
opredict:Plan_Feature_generation_01_Pipeline_Source_Cell10_Spec
  rdf:type p-plan:Plan ;
  dc:description "Install NetworkX version 1.11" ;
  dc:language :LinguisticSystem_xsd_language_English ;
.
opredict:Plan_Feature_generation_01_Pipeline_Source_Cell11
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """## Drug fingerprint similarity
### calculating MACS based fingerprint (substructure) similarity

# install following packages oddt and openbabel using conda
#!conda install -c oddt oddt
#!conda install -c openbabel openbabel

from oddt import toolkit
from oddt import fingerprints

import pandas as pd
import numpy as np
import itertools

drug_smiles = drug_smiles[drug_smiles.drugid.isin(commonDrugs)]
drug_smiles.head()

drug_smiles.head()

#Create a dictionary of chemicals to be compared:
input_dict = dict()
for index,line in drug_smiles.iterrows():
    id = line['drugid']
    
    smiles = line['smiles']
    mol = toolkit.readstring(format='smiles',string=smiles)
    fp =mol.calcfp(fptype='MACCS').raw
    input_dict[id] = fp

def tanimoto_score(fp1, fp2):
    return np.sum(fp1 &  fp2) / np.sum(fp1 | fp2)

sim_values=[]
for chemical1, chemical2 in itertools.combinations(input_dict.keys(),2):
    TC= tanimoto_score(input_dict[chemical1], input_dict[chemical2])
    if chemical1 != chemical2:
        sim_values.append([chemical1, chemical2, TC])

chem_sim_df = pd.DataFrame(sim_values, columns=['Drug1','Drug2','TC'])
chem_sim_df.head()

chem_sim_df.to_csv('data/features/drugs-fingerprint-sim.csv', index=False)""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
.
opredict:Plan_Feature_generation_01_Pipeline_Source_Cell12
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """## Drug target sequence similarity
### Calculation of SmithWaterman sequence alignment scores

def fasta2seq(lines):
    lines = lines[lines.index('\\n')+1:]
    lines =lines.replace('\\n','')
    return lines

target_seq.seq =target_seq.seq.map(fasta2seq)
target_seq = target_seq[target_seq.geneid.isin(drug_target.geneid)]

target_seq.head()

target_seq_file=\"data/intermediate/drugbank-target-seq-trimmed.tab\"
target_seq.to_csv(target_seq_file,'\\t',index=False,header=None)

target_seq_file=\"data/intermediate/drugbank-target-seq-trimmed.tab\"
target_seq_sim_file=\"data/intermediate/target-target-seq-sim-biojava.tab\"

!java -cp .:lib/smithwaterman.jar:lib/biojava-alignment-4.0.0.jar:lib/biojava-core-4.0.0.jar:lib/slf4j-api-1.7.10.jar biojava.targetseq.CalcLocalAlign {target_seq_file} > {target_seq_sim_file}

targetSeqSim=dict()
target_seq_sim_file=\"data/intermediate/target-target-seq-sim-biojava.tab\"
with open(target_seq_sim_file) as tarSimfile:
    for row in tarSimfile:
        row = row.strip().split(\"\\t\")
        t1 =row[0]
        t2 = row[1]
        sim = float(row[2])
        targetSeqSim[(t1,t2)]=sim
        targetSeqSim[(t2,t1)]=sim

drug_targetlist = {k: g[\"geneid\"].tolist() for k,g in drug_target_seq.groupby(\"drugid\")}
values = []

for comb in itertools.combinations(commonDrugs,2) :
    drug1 = comb[0]
    drug2 = comb[1]
    targetList1 = drug_targetlist[drug1]
    targetList2 = drug_targetlist[drug2]
    allscores =[]
    for target1 in sorted(targetList1):
        genescores = []
        for target2 in sorted(targetList2):
            target1 =str(target1)
            target2 =str(target2)    
            if target1 == target2:
                score=1.0
            else:
                score = targetSeqSim[(target1,target2)] / (math.sqrt(targetSeqSim[(target1,target1)]) * math.sqrt(targetSeqSim[(target2,target2)]))
            genescores.append(score)
    # add maximal values between the two lists of associated genes 
    allscores.append(max(genescores))
    if len(allscores) ==0: continue
    #average the maximal scores 
    maxScore =np.mean(allscores)
    values.append([drug1, drug2, maxScore])

drug_seq_df = pd.DataFrame(values, columns =['Drug1','Drug2','TARGETSEQ-SIM'])

drug_seq_df.head()

drug_seq_df.to_csv('data/features/drugs-target-seq-sim.csv', index=False)""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
.
opredict:Plan_Feature_generation_01_Pipeline_Source_Cell13
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """## GO based drug-drug similarity

drug_goa.drugid = drug_goa.drugid.map(lambda d: 'http://purl.obolibrary.org/obo/'+d)
drug_goa.to_csv('data/intermediate/drug_goa.txt',sep='\\t', header=False, index=False)

#cleaning GO annotations
rows = []
for comb in itertools.combinations(commonDrugs,2):
    t1=comb[0]
    t2=comb[1]
    rows.append(['http://purl.obolibrary.org/obo/'+str(t1),'http://purl.obolibrary.org/obo/'+str(t2)])

drug_query_df = pd.DataFrame(rows, columns =['Drug1','Drug2'])
drug_query_df.to_csv('data/intermediate/drug.gene.go.query',sep='\\t', header=False, index=False)

### run the semantic relatedness library with given query and anotation file it will produce a file named: gene.go.sim.out
!java -jar lib/sml-toolkit-0.9.jar -t sm -xmlconf data/conf/sml.gene.go.conf

go_sim_df = pd.read_csv('data/intermediate/drug.gene.go.sim.out',sep='\\t')
go_sim_df.head()

go_sim_df.rename(columns={'e1':'Drug1','e2':'Drug2','bma':'GO-SIM'}, inplace=True)

go_sim_df.Drug1 = go_sim_df.Drug1.str.replace('http://purl.obolibrary.org/obo/','')
go_sim_df.Drug2 = go_sim_df.Drug2.str.replace('http://purl.obolibrary.org/obo/','')
go_sim_df.head()

go_sim_df.to_csv('data/features/drugs-target-go-sim.csv')""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
.
opredict:Plan_Feature_generation_01_Pipeline_Source_Cell14
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """## Disease Phenotype Similarity
### MESH term based Similarity

predict_df = pd.read_csv('data/input/openpredict-omim-drug.csv')
predict_df.head()

predict_df.rename(columns={'drugid':'Drug','omimid':'Disease'}, inplace=True)

gold_diseases = set( predict_df.Disease.unique())
print ('Gold std. diseases',len(gold_diseases))

mesh_ann = {}
allmeshterm = []
with open('data/input/omim-disease-mesh.csv') as meshfile:
    next(meshfile)
    for line in meshfile:
        line = line.strip().split(',')
        if len(line) != 2: continue
        di = line[0]
        mesh = line[1].split(',')
        mesh_ann[di]=mesh
        allmeshterm.extend(mesh)

vocabulary = list(set(allmeshterm))
len(vocabulary)

# create a co-occurrence matrix
co_mat = np.zeros((len(mesh_ann),len(vocabulary)))

commonDiseases = mesh_ann.keys()
mesh2id= { di:i for i,di in enumerate(mesh_ann.keys())}
# fill in the co-occurrence matrix
for key in mesh_ann:
    annotations = mesh_ann[key]
    col_index = [vocabulary.index(a) for a in annotations]
    co_mat[mesh2id[key],col_index] =1

def cosine_similarity(a,b):
    return  np.dot(a, b)/(np.linalg.norm(a)*np.linalg.norm(b))

values = []
for comb in itertools.combinations(commonDiseases,2) :
    disease1 = comb[0]
    disease2 = comb[1]
    sim = cosine_similarity(co_mat[mesh2id[disease1],:], co_mat[mesh2id[disease2],:])
    values.append([disease1, disease2, sim])

disease_pheno_df = pd.DataFrame(values, columns =['Disease1','Disease2','PHENO-SIM'])

disease_pheno_df.head()

disease_pheno_df.to_csv('data/features/diseases-pheno-sim.csv',index=False)
""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
.
opredict:Plan_Feature_generation_01_Pipeline_Source_Cell15
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """## HPO based disease-disease similarity

# reading the hpo annotation file taken from compbio.charite.de/jennkins/jobs/hpo.annotations/
disease_hpo = pd.read_csv('data/input/omim-disease-hpo.csv')
disease_hpo.head()

disease_hpo.rename(columns={'diseaseid':'Disease','hpoid':'HPO'}, inplace=True)
disease_hpo.HPO= disease_hpo.HPO.str.replace('hpo','hp')

#disease_hpo[\"Disease\"] = disease_hpo[\"Disease\"].astype(str)

disease_hpo.head()

#gold_diseases = set(gold_ind_dc[\"OMIMID\"].unique()).union(gold_ind_sider[\"OMIMID\"].unique()).union(gold_ind.Disease.unique())
diseasesWithFeatures= set(disease_hpo.Disease.unique()).intersection( gold_diseases )
print (len(diseasesWithFeatures))
rows = []
for comb in itertools.combinations(diseasesWithFeatures,2):
    t1=comb[0]
    t2=comb[1]
    rows.append(['omim:'+str(t1),'omim:'+str(t2)])

disease_hpo[\"Disease\"]=disease_hpo[\"Disease\"].map(lambda d: 'omim:'+str(d))
disease_hpo.to_csv('data/intermediate/disease_hpo.txt',sep='\\t', header=False, index=False)

disease_query_df = pd.DataFrame(rows, columns =['Disease1','Disease2'])
disease_query_df.to_csv('data/intermediate/hpo.sml.omim.query',sep='\\t', header=False, index=False)

### run the semantic relatedness library with given query and anotation file it will produce a file named: hpo.sim.out
!java -jar lib/sml-toolkit-0.9.jar -t sm -xmlconf data/conf/sml.omim.hpo.conf

hpo_sim_df = pd.read_csv('data/intermediate/omim.hpo.sim.out',sep='\\t')

hpo_sim_df.head()

hpo_sim_df.rename(columns={'e1':'Disease1','e2':'Disease2','bma':'HPO-SIM'}, inplace=True)

hpo_sim_df.Disease1 = hpo_sim_df.Disease1.str.replace('omim:','')
hpo_sim_df.Disease2 = hpo_sim_df.Disease2.str.replace('omim:','')
hpo_sim_df.head()

hpo_sim_df.to_csv('data/features/diseases-hpo-sim.csv', index=False)""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
.
opredict:Plan_Feature_generation_Pipeline_OpenPREDICT_ipynb_v02
  rdf:type p-plan:Plan ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
  pwo:hasFirstStep opredict:Step_Feature_generation_Pipeline_OpenPREDICT_ipynb_v02_Download_and_Save_Input ;
  rdfs:label "Feature generation: Download and Save Input.ipynb and FeatureGeneration.ipynb" ;
.
opredict:Plan_Feature_generation_Pipeline_OpenPREDICT_ipynb_v02_Download_and_Save_Input
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """# Download and Save Input Data

sparql_endpoint=\"https://graphdb.dumontierlab.com/repositories/openpredict\"
!curl -H \"Accept: text/csv\" --data-urlencode query@data/sparql/drugbank-drug-target.rq {sparql_endpoint} > data/input/drugbank-drug-target.csv

!curl -H \"Accept: text/csv\" --data-urlencode query@data/sparql/drugbank-target-seq.rq {sparql_endpoint} > data/input/drugbank-target-seq.csv

!curl -H \"Accept: text/csv\" --data-urlencode query@data/sparql/drugbank-drug-smiles.rq {sparql_endpoint} > data/input/drugbank-drug-smiles.csv

!curl -H \"Accept: text/csv\" --data-urlencode query@data/sparql/drugbank-drug-goa.rq {sparql_endpoint} > data/input/drugbank-drug-goa.csv

!curl -H \"Accept: text/csv\" --data-urlencode query@data/sparql/drugbank-sider-sideeffects.rq {sparql_endpoint} > data/input/drugbank-sider-se.csv

!curl -H \"Accept: text/csv\" --data-urlencode query@data/sparql/openpredict-omim-drug.rq {sparql_endpoint} > data/input/openpredict-omim-drug.csv

!curl -H \"Accept: text/csv\" --data-urlencode query@data/sparql/human-interactome.rq {sparql_endpoint} > data/input/human-interactome.csv

!curl -H \"Accept: text/csv\" --data-urlencode query@data/sparql/omim-disease-mesh.rq {sparql_endpoint} > data/input/omim-disease-mesh.csv

!curl -H \"Accept: text/csv\" --data-urlencode query@data/sparql/omim-disease-hpo.rq {sparql_endpoint} > data/input/omim-disease-hpo.csv

!curl -H \"Accept: text/csv\" --data-urlencode query@data/sparql/drugbank-drug-synonym.rq {sparql_endpoint} > data/input/drugbank-drug-synonym.csv

# Create Feature Matrix

import pandas as pd
drug_target = pd.read_csv('data/input/drugbank-drug-target.csv')
target_seq = pd.read_csv('data/input/drugbank-target-seq.csv')
drug_goa = pd.read_csv('data/input/drugbank-drug-goa.csv')
drug_smiles = pd.read_csv('data/input/drugbank-drug-smiles.csv')
drug_se = pd.read_csv('data/input/drugbank-sider-se.csv')
drug_smiles.head()

target_seq.head()

drug_se.head()

drug_goa.head()

a=drug_goa['drugid'].unique()
b=drug_target['drugid'].unique()
c=drug_smiles['drugid'].unique()
d=drug_se['drugid'].unique()
commonDrugs= set(a).intersection(b).intersection(c).intersection(d)
print (len(a),len(b),len(c),len(d))
print (len(commonDrugs))

gold_ind =pd.read_csv('data/input/openpredict-omim-drug.csv')
gold_ind.head()

gold_ind.rename(columns={'drugid':'Drug','omimid':'Disease'}, inplace=True)

print (\"%d drugs have all features \"%len( commonDrugs.intersection( gold_ind.Drug.unique())))
print (\"%d drugs have GOA feature \"%len( set(a).intersection( gold_ind.Drug.unique())))
print (\"%d drugs have Target feature \"%len( set(b).intersection( gold_ind.Drug.unique())))
print (\"%d drugs have Fingerprint feature \"%len( set(c).intersection( gold_ind.Drug.unique())))
print (\"%d drugs have Sideeffect feature \"%len( set(d).intersection( gold_ind.Drug.unique())))

disease_hpo = pd.read_csv('data/input/omim-disease-hpo.csv')
disease_mesh = pd.read_csv('data/input/omim-disease-mesh.csv')

dis1 = disease_mesh['diseaseid'].unique()
dis2 = disease_hpo['diseaseid'].unique()

disease_mesh.head()

commonDiseases = set(dis1).intersection(dis2)
print (\"%d drugs that have all features \"%len( commonDiseases.intersection( gold_ind.Disease.unique())))
print (\"%d drugs that have MESH feature \"%len( set(dis1).intersection( gold_ind.Disease.unique())))
print (\"%d drugs that have HPO feature \"%len( set(dis2).intersection( gold_ind.Disease.unique())))""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
  dcat:downloadURL "https://github.com/fair-workflows/openpredict/blob/975324eb5263bc0d5d709f833baca31952817844/Download%20and%20Save%20Input.ipynb" ;
.
opredict:Plan_Feature_generation_Pipeline_OpenPREDICT_ipynb_v02_FeatureGeneration
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """import itertools
import math
import numpy as np
import pandas as pd

drug_target = pd.read_csv('data/input/drugbank-drug-target.csv')
target_seq = pd.read_csv('data/input/drugbank-target-seq.csv')
drug_goa = pd.read_csv('data/input/drugbank-drug-goa.csv')
drug_smiles = pd.read_csv('data/input/drugbank-drug-smiles.csv')
drug_se = pd.read_csv('data/input/drugbank-sider-se.csv')
drug_smiles.head()

## Get the drug data

print (\"%d drugs have all Target feature \"%len(  drug_target.drugid.unique()))
print (\"%d drugs have Target GOA feature \"%len( drug_goa.drugid.unique()))
print (\"%d drugs have Fingerprint feature \"%len(  drug_smiles.drugid.unique()))
print (\"%d drugs have Sideeffect feature \"%len( drug_se.drugid.unique()))

drug_target_seq = drug_target.merge(target_seq, on= ['geneid'])
print (\"%d drugs have Target SEQ feature \"%len( drug_target_seq.drugid.unique()))

a=drug_goa['drugid'].unique()
b=drug_target['drugid'].unique()
c=drug_smiles['drugid'].unique()
d=drug_se['drugid'].unique()
commonDrugs= set(a).intersection(b).intersection(c).intersection(d)
print (len(a),len(b),len(c),len(d))
print (len(commonDrugs))

drug_se.head()

## Drug side effect similarity
## calculating Jaccard coefficient based on drug sideefects

drugSEDict = {k: g[\"umlsid\"].tolist() for k,g in drug_se.groupby(\"drugid\")}
scores = []

for comb in itertools.combinations(commonDrugs,2):
    drug1 =comb[0]
    drug2 =comb[1]

    sideeffects1 = drugSEDict[drug1]
    sideeffects2 = drugSEDict[drug2]
    c = set(sideeffects1).intersection(sideeffects2)
    u = set(sideeffects1).union(sideeffects2)
    score = len(c)/float(len(u))
    scores.append([drug1, drug2, score])

drug_se_df = pd.DataFrame(scores, columns =['Drug1','Drug2','SE-SIM'])

drug_se_df.head()

drug_se_df.to_csv('data/features/drugs-se-sim.csv', index=False)

## PPI based drug-drug similarity
###  calculate distance between drugs on protein-protein interaction network

#!pip install -q networkx==1.11

# calcuate pairwise distance between proteins in the human PPI network
import networkx as nx
G= nx.Graph()
with open('data/input/human-interactome.csv') as ppiFile: # human PPI network
    next(ppiFile) # skip first line
    drugs=set()
    for line in ppiFile:
        line=line.replace(\"'\",\"\").strip().split(',')
        G.add_edge(line[0],line[1])

ppi=nx.shortest_path_length(G)

def grapDistance(ppi, target1, target2):
    \"\"\"
    return the shortest path between two proteins in the PPI network
    ppi : dictonary that contains distance of PPI 
    target1 : first protein name
    target2 : second protein name
    \"\"\"
    maxValue = 9999
    if target1 not in ppi:
        return maxValue
    else:
        if target2 not in ppi[target1]:
            return maxValue
        else:
            return ppi[target1][target2]

drug_targetlist = {k: g[\"geneid\"].tolist() for k,g in drug_target.groupby(\"drugid\")}
values = []

# calculate PPI-based pairwise drug similarity (Closeness)
# First distances between proteins were transformed to similarity values using the formula described in Perlman et al (2011)
# A, b were chosen according to Perlman et al (2011) to be 0.9 × e and 1, respectively.
# Self similarity was assigned a value of 1.

# For drugs similarities, maximal values between the two lists of associated genes were averaged 
# (taking into account both sides for symmetry).

A = 0.9
b = 1
for comb in itertools.combinations(commonDrugs,2) :
    drug1 = comb[0]
    drug2 = comb[1]
    targetList1 = drug_targetlist[drug1]
    targetList2 = drug_targetlist[drug2]
    allscores =[]
    for target1 in sorted(targetList1):
        genescores = []
        for target2 in sorted(targetList2):
            target1 =str(target1)
            target2 =str(target2)    
            if target1 == target2:
                score=1.0
            else:
                score = A*math.exp(-b* grapDistance(ppi, target1, target2))
            genescores.append(score)
    # add maximal values between the two lists of associated genes 
    allscores.append(max(genescores))
    if len(allscores) ==0: continue
    #average the maximal scores 
    maxScore =np.mean(allscores)
    if maxScore >= 0:
        values.append([drug1, drug2, maxScore])

drug_ppi_df = pd.DataFrame(values, columns =['Drug1','Drug2','PPI-SIM'])

drug_ppi_df.head()

drug_ppi_df.to_csv('data/features/drugs-ppi-sim.csv', index=False)

##Drug fingerprint similarity
###calculating MACS based fingerprint (substructure) similarity

# install following packages oddt and openbabel using conda
#!conda install -c oddt oddt
#!conda install -c openbabel openbabel

from oddt import toolkit
from oddt import fingerprints

import pandas as pd
import numpy as np
import itertools

drug_smiles = drug_smiles[drug_smiles.drugid.isin(commonDrugs)]
drug_smiles.head()

drug_smiles.head()

#Create a dictionary of chemicals to be compared:
input_dict = dict()
for index,line in drug_smiles.iterrows():
    id = line['drugid']
    
    smiles = line['smiles']
    mol = toolkit.readstring(format='smiles',string=smiles)
    fp =mol.calcfp(fptype='MACCS').raw
    input_dict[id] = fp

def tanimoto_score(fp1, fp2):
    return np.sum(fp1 &  fp2) / np.sum(fp1 | fp2)

sim_values=[]
for chemical1, chemical2 in itertools.combinations(input_dict.keys(),2):
    TC= tanimoto_score(input_dict[chemical1], input_dict[chemical2])
    if chemical1 != chemical2:
        sim_values.append([chemical1, chemical2, TC])

chem_sim_df = pd.DataFrame(sim_values, columns=['Drug1','Drug2','TC'])
chem_sim_df.head()

chem_sim_df.to_csv('data/features/drugs-fingerprint-sim.csv', index=False)

##Drug target sequence similarity
###Calculation of SmithWaterman sequence alignment scores

def fasta2seq(lines):
    lines = lines[lines.index('\\n')+1:]
    lines =lines.replace('\\n','')
    return lines

target_seq.seq =target_seq.seq.map(fasta2seq)
target_seq = target_seq[target_seq.geneid.isin(drug_target.geneid)]

target_seq.head()

target_seq_file=\"data/intermediate/drugbank-target-seq-trimmed.tab\"
target_seq.to_csv(target_seq_file,'\\t',index=False,header=None)

target_seq_file=\"data/intermediate/drugbank-target-seq-trimmed.tab\"
target_seq_sim_file=\"data/intermediate/target-target-seq-sim-biojava.tab\"

!java -cp .:lib/smithwaterman.jar:lib/biojava-alignment-4.0.0.jar:lib/biojava-core-4.0.0.jar:lib/slf4j-api-1.7.10.jar biojava.targetseq.CalcLocalAlign {target_seq_file} > {target_seq_sim_file}

targetSeqSim=dict()
target_seq_sim_file=\"data/intermediate/target-target-seq-sim-biojava.tab\"
with open(target_seq_sim_file) as tarSimfile:
    for row in tarSimfile:
        row = row.strip().split(\"\\t\")
        t1 =row[0]
        t2 = row[1]
        sim = float(row[2])
        targetSeqSim[(t1,t2)]=sim
        targetSeqSim[(t2,t1)]=sim

drug_targetlist = {k: g[\"geneid\"].tolist() for k,g in drug_target_seq.groupby(\"drugid\")}
values = []

for comb in itertools.combinations(commonDrugs,2) :
    drug1 = comb[0]
    drug2 = comb[1]
    targetList1 = drug_targetlist[drug1]
    targetList2 = drug_targetlist[drug2]
    allscores =[]
    for target1 in sorted(targetList1):
        genescores = []
        for target2 in sorted(targetList2):
            target1 =str(target1)
            target2 =str(target2)    
            if target1 == target2:
                score=1.0
            else:
                score = targetSeqSim[(target1,target2)] / (math.sqrt(targetSeqSim[(target1,target1)]) * math.sqrt(targetSeqSim[(target2,target2)]))
            genescores.append(score)
    # add maximal values between the two lists of associated genes 
    allscores.append(max(genescores))
    if len(allscores) ==0: continue
    #average the maximal scores 
    maxScore =np.mean(allscores)
    values.append([drug1, drug2, maxScore])

drug_seq_df = pd.DataFrame(values, columns =['Drug1','Drug2','TARGETSEQ-SIM'])

drug_seq_df.head()

drug_seq_df.to_csv('data/features/drugs-target-seq-sim.csv', index=False)

##GO based drug-drug similarity

drug_goa.drugid = drug_goa.drugid.map(lambda d: 'http://purl.obolibrary.org/obo/'+d)
drug_goa.to_csv('data/intermediate/drug_goa.txt',sep='\\t', header=False, index=False)

#cleaning GO annotations
rows = []
for comb in itertools.combinations(commonDrugs,2):
    t1=comb[0]
    t2=comb[1]
    rows.append(['http://purl.obolibrary.org/obo/'+str(t1),'http://purl.obolibrary.org/obo/'+str(t2)])

drug_query_df = pd.DataFrame(rows, columns =['Drug1','Drug2'])
drug_query_df.to_csv('data/intermediate/drug.gene.go.query',sep='\\t', header=False, index=False)

### run the semantic relatedness library with given query and anotation file it will produce a file named: gene.go.sim.out
!java -jar lib/sml-toolkit-0.9.jar -t sm -xmlconf data/conf/sml.gene.go.conf

go_sim_df = pd.read_csv('data/intermediate/drug.gene.go.sim.out',sep='\\t')
go_sim_df.head()

go_sim_df.rename(columns={'e1':'Drug1','e2':'Drug2','bma':'GO-SIM'}, inplace=True)

go_sim_df.Drug1 = go_sim_df.Drug1.str.replace('http://purl.obolibrary.org/obo/','')
go_sim_df.Drug2 = go_sim_df.Drug2.str.replace('http://purl.obolibrary.org/obo/','')
go_sim_df.head()

go_sim_df.to_csv('data/features/drugs-target-go-sim.csv')

##Disease Phenotype Similarity
###MESH term based Similarity

predict_df = pd.read_csv('data/input/openpredict-omim-drug.csv')
predict_df.head()

predict_df.rename(columns={'drugid':'Drug','omimid':'Disease'}, inplace=True)

gold_diseases = set( predict_df.Disease.unique())
print ('Gold std. diseases',len(gold_diseases))

mesh_ann = {}
allmeshterm = []
with open('data/input/omim-disease-mesh.csv') as meshfile:
    next(meshfile)
    for line in meshfile:
        line = line.strip().split(',')
        if len(line) != 2: continue
        di = line[0]
        mesh = line[1].split(',')
        mesh_ann[di]=mesh
        allmeshterm.extend(mesh)

vocabulary = list(set(allmeshterm))
len(vocabulary)

# create a co-occurrence matrix
co_mat = np.zeros((len(mesh_ann),len(vocabulary)))

commonDiseases = mesh_ann.keys()
mesh2id= { di:i for i,di in enumerate(mesh_ann.keys())}
# fill in the co-occurrence matrix
for key in mesh_ann:
    annotations = mesh_ann[key]
    col_index = [vocabulary.index(a) for a in annotations]
    co_mat[mesh2id[key],col_index] =1

def cosine_similarity(a,b):
    return  np.dot(a, b)/(np.linalg.norm(a)*np.linalg.norm(b))

values = []
# calculate cosine similarity between diseases using mesh annotation vector
for comb in itertools.combinations(commonDiseases,2) :
    disease1 = comb[0]
    disease2 = comb[1]
    sim = cosine_similarity(co_mat[mesh2id[disease1],:], co_mat[mesh2id[disease2],:])
    values.append([disease1, disease2, sim])

disease_pheno_df = pd.DataFrame(values, columns =['Disease1','Disease2','PHENO-SIM'])

disease_pheno_df.head()

disease_pheno_df.to_csv('data/features/diseases-pheno-sim.csv',index=False)

##HPO based disease-disease similarity

# reading the hpo annotation file taken from compbio.charite.de/jennkins/jobs/hpo.annotations/
disease_hpo = pd.read_csv('data/input/omim-disease-hpo.csv')
disease_hpo.head()

disease_hpo.rename(columns={'diseaseid':'Disease','hpoid':'HPO'}, inplace=True)
disease_hpo.HPO= disease_hpo.HPO.str.replace('hpo','hp')

disease_hpo.head()

diseasesWithFeatures= set(disease_hpo.Disease.unique()).intersection( gold_diseases )
print (len(diseasesWithFeatures))
rows = []
for comb in itertools.combinations(diseasesWithFeatures,2):
    t1=comb[0]
    t2=comb[1]
    rows.append(['omim:'+str(t1),'omim:'+str(t2)])

disease_hpo[\"Disease\"]=disease_hpo[\"Disease\"].map(lambda d: 'omim:'+str(d))
disease_hpo.to_csv('data/intermediate/disease_hpo.txt',sep='\\t', header=False, index=False)

disease_query_df = pd.DataFrame(rows, columns =['Disease1','Disease2'])
disease_query_df.to_csv('data/intermediate/hpo.sml.omim.query',sep='\\t', header=False, index=False)

### run the semantic relatedness library with given query and anotation file it will produce a file named: hpo.sim.out
!java -jar lib/sml-toolkit-0.9.jar -t sm -xmlconf data/conf/sml.omim.hpo.conf

hpo_sim_df = pd.read_csv('data/intermediate/omim.hpo.sim.out',sep='\\t')

hpo_sim_df.head()

hpo_sim_df.rename(columns={'e1':'Disease1','e2':'Disease2','bma':'HPO-SIM'}, inplace=True)

hpo_sim_df.Disease1 = hpo_sim_df.Disease1.str.replace('omim:','')
hpo_sim_df.Disease2 = hpo_sim_df.Disease2.str.replace('omim:','')
hpo_sim_df.head()

hpo_sim_df.to_csv('data/features/diseases-hpo-sim.csv', index=False)""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
  dcat:downloadURL "https://github.com/fair-workflows/openpredict/blob/74d3d7ae2b3182c071f490e8353d5dfdbf9f3f08/FeatureGeneration.ipynb" ;
.
opredict:Plan_Format_results_for_presentation
  rdf:type p-plan:Plan ;
  dc:description "Format results for presentation" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  rdfs:label "Format results for presentation" ;
.
opredict:Plan_Main_Protocol_v01
  rdf:type p-plan:Plan ;
  rdf:type dul:Workflow ;
  dc:created "2018-11-27" ;
  dc:creator opredict:Agent_Remzi ;
  dc:description "OpenPREDICT Main Protocol v.0.1" ;
  dc:hasVersion "0.1" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  dc:modified "2019-05-15" ;
  pwo:hasFirstStep opredict:Step_Prepare_Input_Data_Files ;
  rdfs:label "Main Protocol v.0.1" ;
  prov:wasAttributedTo opredict:Agent_Remzi ;
.
opredict:Plan_Main_Protocol_v02
  rdf:type p-plan:Plan ;
  rdf:type dul:Workflow ;
  dc:created "2019-05-15" ;
  dc:creator opredict:Agent_Remzi ;
  dc:description "OpenPREDICT Main Protocol v.0.2" ;
  dc:hasVersion "0.2" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  dc:modified "2019-07-03" ;
  pwo:hasFirstStep opredict:Step_Prepare_Input_Data_Files_v02 ;
  rdfs:label "Main Protocol v.0.2" ;
  prov:wasAttributedTo opredict:Agent_Remzi ;
  prov:wasRevisionOf opredict:Plan_Main_Protocol_v01 ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb>
  rdf:type p-plan:Plan ;
  dc:description "Model preparation, train and evaluation Workflow: OpenPREDCIT - ML.ipynb" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
  pwo:hasFirstStep <http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell00> ;
  rdfs:label "Model preparation, train and evaluation Workflow: OpenPREDCIT - ML.ipynb" ;
  dcat:downloadURL "https://github.com/fair-workflows/openpredict/blob/f60431d37cf3ac80e5245ded143f03f368017489/OpenPREDCIT%20-%20ML.ipynb" ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell00>
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """import random
import numpy as np
from sklearn import model_selection
from sklearn.model_selection import GroupKFold
import pandas as pd
import math
import time""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
  rdfs:label "Jupyter Notebook Cell00" ;
  prov:qualifiedUsage opredict:Link_Pipeline_Source_Cell0_Variable ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell01>
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """# Get the features and gold standard 

drugfeatfiles = ['features/drugs-fingerprint-sim.txt','features/drugs-se-sim.txt', 
                 'features/drugs-ppi-sim.txt', 'features/drugs-target-go-sim.txt','features/drugs-target-seq-sim.txt']
diseasefeatfiles =['features/diseases-hpo-sim.txt',  'features/diseases-pheno-sim.txt' ]

goldindfile = 'known_associations/predict-gold-standard-omim.txt'
drugDiseaseKnown = pd.read_csv(goldindfile,delimiter='\\t') 
drugDiseaseKnown.Disease = drugDiseaseKnown.Disease.astype(str)
drugDiseaseKnown.head()""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell02>
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """# Merge feature matrix

def adjcencydict2matrix(df, name1, name2):
    df1 = df.copy()
    df1= df1.rename(index=str, columns={name1: name2, name2: name1})
    print (len(df))
    df =df.append(df1)
    print (len(df))
    return df.pivot(index=name1, columns=name2)

def mergeFeatureMatrix(drugfeatfiles, diseasefeatfiles):
    for i,featureFilename in enumerate(drugfeatfiles):
        df = pd.read_csv(featureFilename, delimiter='\\t')
        cond = df.Drug1 > df.Drug2
        df.loc[cond, ['Drug1', 'Drug2']] = df.loc[cond, ['Drug2', 'Drug1']].values
        if i != 0:
            drug_df=drug_df.merge(df,on=['Drug1','Drug2'],how='inner')
            #drug_df=drug_df.merge(temp,how='outer',on='Drug')
        else:
            drug_df =df
    drug_df.fillna(0, inplace=True)
    
    drug_df = adjcencydict2matrix(drug_df, 'Drug1', 'Drug2')
    drug_df = drug_df.fillna(1.0)

    
    for i,featureFilename in enumerate(diseasefeatfiles):
        print (featureFilename)
        df=pd.read_csv(featureFilename, delimiter='\\t')
        cond = df.Disease1 > df.Disease2
        df.loc[cond, ['Disease1','Disease2']] = df.loc[cond, ['Disease2','Disease1']].values
        if i != 0:
            disease_df = disease_df.merge(df,on=['Disease1','Disease2'], how='inner')
            #drug_df=drug_df.merge(temp,how='outer',on='Drug')
        else:
            disease_df = df
    disease_df.fillna(0, inplace=True)
    disease_df.Disease1 = disease_df.Disease1.astype(str)
    disease_df.Disease2 = disease_df.Disease2.astype(str)
    
    disease_df = adjcencydict2matrix(disease_df, 'Disease1', 'Disease2')
    disease_df = disease_df.fillna(1.0)
    
    return drug_df, disease_df

drug_df, disease_df = mergeFeatureMatrix(drugfeatfiles, diseasefeatfiles)

drug_df.head()

disease_df.head()""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell03>
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """# Generate positive and negative pairs

def generatePairs(drug_df, disease_df, drugDiseaseKnown):
    drugwithfeatures = set(drug_df.columns.levels[1])
    diseaseswithfeatures = set(disease_df.columns.levels[1])
    
    drugDiseaseDict  = set([tuple(x) for x in  drugDiseaseKnown[['Drug','Disease']].values])

    commonDrugs= drugwithfeatures.intersection( drugDiseaseKnown.Drug.unique())
    commonDiseases=  diseaseswithfeatures.intersection(drugDiseaseKnown.Disease.unique() )
    print (\"commonDrugs: %d commonDiseases : %d\"%(len(commonDrugs),len(commonDiseases)))

    #abridged_drug_disease = [(dr,di)  for  (dr,di)  in drugDiseaseDict if dr in drugwithfeatures and di in diseaseswithfeatures ]

    #commonDrugs = set( [ dr  for dr,di in  abridged_drug_disease])
    #commonDiseases  =set([ di  for dr,di in  abridged_drug_disease])

    print (\"Gold standard, associations: %d drugs: %d diseases: %d\"%(len(drugDiseaseKnown),len(drugDiseaseKnown.Drug.unique()),len(drugDiseaseKnown.Disease.unique())))
    print (\"Drugs with features: %d Diseases with features: %d\"%(len(drugwithfeatures),len(diseaseswithfeatures)))
    print (\"commonDrugs: %d commonDiseases : %d\"%(len(commonDrugs),len(commonDiseases)))

    pairs=[]
    classes=[]
    for dr in commonDrugs:
        for di in commonDiseases:
            cls = (1 if (dr,di) in drugDiseaseDict else 0)
            pairs.append((dr,di))
            classes.append(cls)
            
    return pairs, classes

pairs, classes = generatePairs(drug_df, disease_df, drugDiseaseKnown)""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell04>
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """# Balance negative samples/postives

from sklearn.model_selection import GroupKFold
from sklearn.model_selection import StratifiedKFold
def balance_data(pairs, classes, n_proportion):
    classes = np.array(classes)
    pairs = np.array(pairs)
    
    indices_true = np.where(classes == 1)[0]
    indices_false = np.where(classes == 0)[0]

    np.random.shuffle(indices_false)
    indices = indices_false[:(n_proportion*indices_true.shape[0])]
    print (\"+/-:\", len(indices_true), len(indices), len(indices_false))
    pairs = np.concatenate((pairs[indices_true], pairs[indices]), axis=0)
    classes = np.concatenate((classes[indices_true], classes[indices]), axis=0) 
    
 
    return pairs, classes

n_proportion = 2
pairs, classes= balance_data(pairs, classes, n_proportion)""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell05>
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """# Train-Test Splitting

pairs_train, pairs_test, classes_train, classes_test = model_selection.train_test_split(pairs, classes, stratify=classes, test_size=0.2, shuffle=True)

len(pairs_train), len(pairs_test)""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell06>
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """# Feature extraction (Best Combined similarity)

def geometricMean(drug, disease, knownDrugDisease, drugDF, diseaseDF):
    #print (drug, disease)
    a  = drugDF.loc[knownDrugDisease[:,0]][drug].values
    b  = diseaseDF.loc[knownDrugDisease[:,1]][disease].values
    #print (a,b)
    c = np.sqrt( np.multiply(a,b) )
    ix2 = (knownDrugDisease == [drug, disease])
    c[ix2[:,1]& ix2[:,0]]=0.0
    return float(np.max(c))


def createFeatureDF(pairs, classes, knownDrugDisease, drugDFs, diseaseDFs):
    totalNumFeatures = len(drugDFs)*len(diseaseDFs)
    #featureMatri x= np.empty((len(classes),totalNumFeatures), float)
    df =pd.DataFrame(list(zip(pairs[:,0], pairs[:,1], classes)), columns =['Drug','Disease','Class'])
    index = 0
    for i,drug_col in enumerate(drugDFs.columns.levels[0]):
        for j,disease_col in enumerate(diseaseDFs.columns.levels[0]):
            drugDF = drugDFs[drug_col]
            diseaseDF = diseaseDFs[disease_col]
            df[\"Feature_\"+str(drug_col)+'_'+str(disease_col)] = df.apply(lambda row: geometricMean( row.Drug, row.Disease, knownDrugDisease, drugDF, diseaseDF), axis=1)
    return df

def calculateCombinedSimilarity(pairs_train, pairs_test, classes_train, classes_test, drug_df, disease_df, knownDrugDisease):
    train_df  = createFeatureDF(pairs_train, classes_train, knownDrugDisease, drug_df, disease_df)
    test_df = createFeatureDF(pairs_test, classes_test, knownDrugDisease, drug_df, disease_df)
    return train_df, test_df

knownDrugDisease= pairs_train[classes_train==1]
train_df, test_df = calculateCombinedSimilarity(pairs_train, pairs_test, classes_train, classes_test, drug_df, disease_df, knownDrugDisease)""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell07>
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """# Model Training

from sklearn import tree, ensemble
from sklearn import svm, linear_model, neighbors

def trainModel(train_df, clf):
    features = list(train_df.columns.difference(['Drug','Disease','Class']))
    X = train_df[features]
    y = train_df['Class']
    print ('fiting classifier...')
    clf.fit(X, y)
    return clf

n_seed = 100
clf = linear_model.LogisticRegression(penalty='l2', dual=False, tol=0.0001, C=1.0, random_state=n_seed) 
clf = trainModel(train_df, clf)""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell08>
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """# Evaulation

from sklearn import metrics
import numbers
def multimetric_score(estimator, X_test, y_test, scorers):
    \"\"\"Return a dict of score for multimetric scoring\"\"\"
    scores = {}
    for name, scorer in scorers.items():
        if y_test is None:
            score = scorer(estimator, X_test)
        else:
            score = scorer(estimator, X_test, y_test)

        if hasattr(score, 'item'):
            try:
                # e.g. unwrap memmapped scalars
                score = score.item()
            except ValueError:
                # non-scalar?
                pass
        scores[name] = score

        if not isinstance(score, numbers.Number):
            raise ValueError(\"scoring must return a number, got %s (%s) \"
                             \"instead. (scorer=%s)\"
                             % (str(score), type(score), name))
    return scores

def evaluate(test_df, clf):
    features = list(train_df.columns.difference(['Drug','Disease','Class']))
    X_test =  test_df[features]
    y_test = test_df['Class']

    scoring = ['precision', 'recall', 'accuracy', 'roc_auc', 'f1', 'average_precision']
    scorers, multimetric = metrics.scorer._check_multimetric_scoring(clf, scoring=scoring)
    scores = multimetric_score(clf, X_test, y_test, scorers)
    return scores

scores = evaluate(test_df, clf)
print (\"Test:\",scores)""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell09>
  rdf:type p-plan:Plan ;
  rdf:type reprod:Cell ;
  dc:description """# 10-fold drug-disjoint cross-validation (PREDICT - CV scheme )

disjoint = True
n_fold = 10

if disjoint:
    print ('Disjoint')
    groups = pairs[:,0] # group by drug
    group_kfold = GroupKFold(n_splits=n_fold)
    cv = group_kfold.split(pairs, classes, groups)
else:
    print ('Non-disjoint')
    skf = StratifiedKFold(n_splits=n_fold, shuffle=True, random_state=n_seed)
    cv = skf.split(pairs, classes)

n_seed = 100
cv_results = pd.DataFrame()
clf = linear_model.LogisticRegression(penalty='l2', dual=False, tol=0.0001, C=1.0, random_state=n_seed) 
  
for i, (train, test) in enumerate(cv):
    print ('Fold',i+1)
    start_time = time.time()
    pairs_train = pairs[train]
    classes_train = classes[train] 
    pairs_test = pairs[test]
    classes_test = classes[test]
    knownDrugDisease= pairs_train[classes_train==1]
    
    train_df, test_df = calculateCombinedSimilarity(pairs_train, pairs_test, classes_train, classes_test, drug_df, disease_df, knownDrugDisease)
    elapsed_time = time.time() - start_time
    print ('Time elapsed to generate features:',time.strftime(\"%H:%M:%S\", time.gmtime(elapsed_time)))

    clf = trainModel(train_df, clf)
    
    scores = evaluate(test_df, clf)
    print (\"Scores:\",scores)
    cv_results = cv_results.append(scores, ignore_index=True)

cv_results.mean()

cv_results.to_csv('results/DCV_runs_transd.csv')""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
.
opredict:Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02
  rdf:type p-plan:Plan ;
  dc:description """import random
import numpy as np
from sklearn import model_selection
from sklearn.model_selection import GroupKFold
import pandas as pd
import math
import time

##Get the features and gold standard

drugfeatfiles = ['data/features/drugs-fingerprint-sim.csv','data/features/drugs-se-sim.csv', 
                 'data/features/drugs-ppi-sim.csv', 'data/features/drugs-target-go-sim.csv','data/features/drugs-target-seq-sim.csv']
diseasefeatfiles =['data/features/diseases-hpo-sim.csv',  'data/features/diseases-pheno-sim.csv' ]

goldindfile = 'data/input/openpredict-omim-drug.csv'
drugDiseaseKnown = pd.read_csv(goldindfile,delimiter=',') 
drugDiseaseKnown.head()

drugDiseaseKnown.rename(columns={'drugid':'Drug','omimid':'Disease'}, inplace=True)
drugDiseaseKnown.Disease = drugDiseaseKnown.Disease.astype(str)
drugDiseaseKnown.head()

##Merge feature matrix

def adjcencydict2matrix(df, name1, name2):
    df1 = df.copy()
    df1= df1.rename(index=str, columns={name1: name2, name2: name1})
    print (len(df))
    df =df.append(df1)
    print (len(df))
    return df.pivot(index=name1, columns=name2)

def mergeFeatureMatrix(drugfeatfiles, diseasefeatfiles):
    for i,featureFilename in enumerate(drugfeatfiles):
        print (featureFilename)
        df = pd.read_csv(featureFilename, delimiter=',')
        cond = df.Drug1 > df.Drug2
        df.loc[cond, ['Drug1', 'Drug2']] = df.loc[cond, ['Drug2', 'Drug1']].values
        if i != 0:
            drug_df=drug_df.merge(df,on=['Drug1','Drug2'],how='inner')
            #drug_df=drug_df.merge(temp,how='outer',on='Drug')
        else:
            drug_df =df
    drug_df.fillna(0, inplace=True)
    
    drug_df = adjcencydict2matrix(drug_df, 'Drug1', 'Drug2')
    drug_df = drug_df.fillna(1.0)

    
    for i,featureFilename in enumerate(diseasefeatfiles):
        print (featureFilename)
        df=pd.read_csv(featureFilename, delimiter=',')
        cond = df.Disease1 > df.Disease2
        df.loc[cond, ['Disease1','Disease2']] = df.loc[cond, ['Disease2','Disease1']].values
        if i != 0:
            disease_df = disease_df.merge(df,on=['Disease1','Disease2'], how='inner')
            #drug_df=drug_df.merge(temp,how='outer',on='Drug')
        else:
            disease_df = df
    disease_df.fillna(0, inplace=True)
    disease_df.Disease1 = disease_df.Disease1.astype(str)
    disease_df.Disease2 = disease_df.Disease2.astype(str)
    
    disease_df = adjcencydict2matrix(disease_df, 'Disease1', 'Disease2')
    disease_df = disease_df.fillna(1.0)
    
    return drug_df, disease_df

drug_df, disease_df = mergeFeatureMatrix(drugfeatfiles, diseasefeatfiles)

drug_df.head()

disease_df.head()

def generatePairs(drug_df, disease_df, drugDiseaseKnown):
    drugwithfeatures = set(drug_df.columns.levels[1])
    diseaseswithfeatures = set(disease_df.columns.levels[1])
    
    drugDiseaseDict  = set([tuple(x) for x in  drugDiseaseKnown[['Drug','Disease']].values])

    commonDrugs= drugwithfeatures.intersection( drugDiseaseKnown.Drug.unique())
    commonDiseases=  diseaseswithfeatures.intersection(drugDiseaseKnown.Disease.unique() )
    print (\"commonDrugs: %d commonDiseases : %d\"%(len(commonDrugs),len(commonDiseases)))

    #abridged_drug_disease = [(dr,di)  for  (dr,di)  in drugDiseaseDict if dr in drugwithfeatures and di in diseaseswithfeatures ]

    #commonDrugs = set( [ dr  for dr,di in  abridged_drug_disease])
    #commonDiseases  =set([ di  for dr,di in  abridged_drug_disease])

    print (\"Gold standard, associations: %d drugs: %d diseases: %d\"%(len(drugDiseaseKnown),len(drugDiseaseKnown.Drug.unique()),len(drugDiseaseKnown.Disease.unique())))
    print (\"Drugs with features: %d Diseases with features: %d\"%(len(drugwithfeatures),len(diseaseswithfeatures)))
    print (\"commonDrugs: %d commonDiseases : %d\"%(len(commonDrugs),len(commonDiseases)))

    pairs=[]
    classes=[]
    for dr in commonDrugs:
        for di in commonDiseases:
            cls = (1 if (dr,di) in drugDiseaseDict else 0)
            pairs.append((dr,di))
            classes.append(cls)
            
    return pairs, classes

pairs, classes = generatePairs(drug_df, disease_df, drugDiseaseKnown)

##Balance negative samples/postives

from sklearn.model_selection import GroupKFold
from sklearn.model_selection import StratifiedKFold
def balance_data(pairs, classes, n_proportion):
    classes = np.array(classes)
    pairs = np.array(pairs)
    
    indices_true = np.where(classes == 1)[0]
    indices_false = np.where(classes == 0)[0]

    np.random.shuffle(indices_false)
    indices = indices_false[:(n_proportion*indices_true.shape[0])]
    print (\"+/-:\", len(indices_true), len(indices), len(indices_false))
    pairs = np.concatenate((pairs[indices_true], pairs[indices]), axis=0)
    classes = np.concatenate((classes[indices_true], classes[indices]), axis=0) 
    
 
    return pairs, classes

n_proportion = 2
pairs, classes= balance_data(pairs, classes, n_proportion)

##Train-Test Splitting
pairs_train, pairs_test, classes_train, classes_test = model_selection.train_test_split(pairs, classes, stratify=classes, test_size=0.2, shuffle=True)

len(pairs_train), len(pairs_test)

##Feature extraction (Best Combined similarity)

def geometricMean(drug, disease, knownDrugDisease, drugDF, diseaseDF):
    #print (drug, disease)
    a  = drugDF.loc[knownDrugDisease[:,0]][drug].values
    b  = diseaseDF.loc[knownDrugDisease[:,1]][disease].values
    #print (a,b)
    c = np.sqrt( np.multiply(a,b) )
    ix2 = (knownDrugDisease == [drug, disease])
    c[ix2[:,1]& ix2[:,0]]=0.0
    return float(np.max(c))


def createFeatureDF(pairs, classes, knownDrugDisease, drugDFs, diseaseDFs):
    totalNumFeatures = len(drugDFs)*len(diseaseDFs)
    #featureMatri x= np.empty((len(classes),totalNumFeatures), float)
    df =pd.DataFrame(list(zip(pairs[:,0], pairs[:,1], classes)), columns =['Drug','Disease','Class'])
    index = 0
    for i,drug_col in enumerate(drugDFs.columns.levels[0]):
        for j,disease_col in enumerate(diseaseDFs.columns.levels[0]):
            drugDF = drugDFs[drug_col]
            diseaseDF = diseaseDFs[disease_col]
            df[\"Feature_\"+str(drug_col)+'_'+str(disease_col)] = df.apply(lambda row: geometricMean( row.Drug, row.Disease, knownDrugDisease, drugDF, diseaseDF), axis=1)
    return df

def calculateCombinedSimilarity(pairs_train, pairs_test, classes_train, classes_test, drug_df, disease_df, knownDrugDisease):
    train_df  = createFeatureDF(pairs_train, classes_train, knownDrugDisease, drug_df, disease_df)
    test_df = createFeatureDF(pairs_test, classes_test, knownDrugDisease, drug_df, disease_df)
    return train_df, test_df

knownDrugDisease= pairs_train[classes_train==1]
train_df, test_df = calculateCombinedSimilarity(pairs_train, pairs_test, classes_train, classes_test, drug_df, disease_df, knownDrugDisease)

##Model Training

from sklearn import tree, ensemble
from sklearn import svm, linear_model, neighbors

def trainModel(train_df, clf):
    features = list(train_df.columns.difference(['Drug','Disease','Class']))
    X = train_df[features]
    y = train_df['Class']
    print ('fiting classifier...')
    clf.fit(X, y)
    return clf

n_seed = 100
clf = linear_model.LogisticRegression(penalty='l2', dual=False, tol=0.0001, C=1.0, random_state=n_seed) 
clf = trainModel(train_df, clf)

##Evaulation

from sklearn import metrics
import numbers
def multimetric_score(estimator, X_test, y_test, scorers):
    \"\"\"Return a dict of score for multimetric scoring\"\"\"
    scores = {}
    for name, scorer in scorers.items():
        if y_test is None:
            score = scorer(estimator, X_test)
        else:
            score = scorer(estimator, X_test, y_test)

        if hasattr(score, 'item'):
            try:
                # e.g. unwrap memmapped scalars
                score = score.item()
            except ValueError:
                # non-scalar?
                pass
        scores[name] = score

        if not isinstance(score, numbers.Number):
            raise ValueError(\"scoring must return a number, got %s (%s) \"
                             \"instead. (scorer=%s)\"
                             % (str(score), type(score), name))
    return scores

def evaluate(test_df, clf):
    features = list(train_df.columns.difference(['Drug','Disease','Class']))
    X_test =  test_df[features]
    y_test = test_df['Class']

    scoring = ['precision', 'recall', 'accuracy', 'roc_auc', 'f1', 'average_precision']
    scorers, multimetric = metrics.scorer._check_multimetric_scoring(clf, scoring=scoring)
    scores = multimetric_score(clf, X_test, y_test, scorers)
    return scores

scores = evaluate(test_df, clf)
print (\"Test:\",scores)

##10-fold drug-disjoint cross-validation (PREDICT - CV scheme )

disjoint = True
n_fold = 10

if disjoint:
    print ('Disjoint')
    groups = pairs[:,0] # group by drug
    group_kfold = GroupKFold(n_splits=n_fold)
    cv = group_kfold.split(pairs, classes, groups)
else:
    print ('Non-disjoint')
    skf = StratifiedKFold(n_splits=n_fold, shuffle=True, random_state=n_seed)
    cv = skf.split(pairs, classes)

n_seed = 100
cv_results = pd.DataFrame()
clf = linear_model.LogisticRegression(penalty='l2', solver='lbfgs', dual=False, tol=0.0001, C=1.0, random_state=n_seed) 
  
for i, (train, test) in enumerate(cv):
    print ('Fold',i+1)
    start_time = time.time()
    pairs_train = pairs[train]
    classes_train = classes[train] 
    pairs_test = pairs[test]
    classes_test = classes[test]
    knownDrugDisease= pairs_train[classes_train==1]
    
    train_df, test_df = calculateCombinedSimilarity(pairs_train, pairs_test, classes_train, classes_test, drug_df, disease_df, knownDrugDisease)
    elapsed_time = time.time() - start_time
    print ('Time elapsed to generate features:',time.strftime(\"%H:%M:%S\", time.gmtime(elapsed_time)))

    clf = trainModel(train_df, clf)
    
    scores = evaluate(test_df, clf)
    #print (\"Scores:\",scores)
    cv_results = cv_results.append(scores, ignore_index=True)

cv_results.mean()

cv_results.to_csv('data/results/disjoint_lr.csv')

import pandas as pd

cv_results = pd.read_csv('data/results/disjoint_lr.csv')

cv_results.head()

from rdflib import Graph, URIRef, Literal, RDF, ConjunctiveGraph, Namespace
from rdflib import Graph, URIRef, Literal, RDF, ConjunctiveGraph
def to_rdf(g, df, column_types, row_uri):
    \"\"\"
    Parameters
    ----------
    g : input rdflib.Graph  
    df: DataFrame to be converted into RDF Graph
    column_types: dictonary of column and its type, type can be URI or Literal
    row_uri: rdf:type value for row index, should be URI
    Returns
    -------
    g: rdflib.Graph generated from DataFrame object
    \"\"\"
    
    for (index, series) in df.iterrows():
        g.add((URIRef(index), RDF.type, URIRef(row_uri)) )
        for (column, value) in series.iteritems():
            if column_types[column] == 'URI':
                g.add((URIRef(index), URIRef(column), URIRef(value)))
            else:
                g.add((URIRef(index), URIRef(column), Literal(value)))
                
    return g

import time
def generateURI(prefix):
    uniqueID= int(round(time.time() * 1000))
    uri = URIRef(prefix+str(uniqueID))
    return uri

DC = Namespace(\"http://purl.org/dc/terms/\")
MLS = Namespace(\"http://www.w3.org/ns/mls#\")
RPC = Namespace(\"https://w3id.org/reproduceme#\")
RDFS = Namespace(\"http://www.w3.org/2000/01/rdf-schema#\")
def addProvanace(g):
    #graphURI = URIRef('http://bio2rdf.org/openpredict_resource:bio2rdf.output.openpredict.R1')

    runURI = generateURI('http://www.w3.org/ns/mls#Run')
    evalURI = generateURI('http://www.w3.org/ns/mls#ModelEvaluation')
    accURI = generateURI('http://www.w3.org/ns/mls#Accuracy')
    evalSpecURI = generateURI('http://www.w3.org/ns/mls#EvaluationSpecification')
    
    g.add((runURI, RDF['type'], MLS['Run']))
    g.add((runURI, MLS['achieves'], RPC['Pipeline_OpenPREDICT']))
          
    g.add((runURI, MLS['hasOutput'], evalURI))
    g.add((evalURI, RDF['type'], MLS['ModelEvaluation']))
    
    g.add((evalSpecURI, MLS['defines'],  RPC['Pipeline_OpenPREDICT']))
    g.add((evalSpecURI, MLS['hasPart'],  MLS['TenFoldCrossValidation']))
    g.add((MLS['TenFoldCrossValidation'], RDF['type'],  MLS['EvaluationProcedure']))
    g.add((MLS['TenFoldCrossValidation'], RDFS['label'],  Literal('10-fold CV')))
    
    g.add((evalSpecURI, MLS['hasPart'],  MLS['DrugwiseCrossValidation']))
    g.add((MLS['DrugwiseCrossValidation'], RDF['type'],  MLS['EvaluationProcedure']))
    g.add((MLS['DrugwiseCrossValidation'], RDFS['label'],  Literal('Drugwise CrossValidation')))
    g.add((MLS['DrugwiseCrossValidation'], DC['description'],  Literal('Split drugs in 10-fold, remove drugs of each fold in the gold standard and consequently remove all the known indication sassociated with them')))
    
    g.add((evalSpecURI, MLS['hasPart'],  accURI))      
    g.add((evalURI, MLS['specifiedBy'],accURI ))
    g.add((accURI, RDF['type'], MLS['EvaluationMeasure']))  
    g.add((accURI, RDFS['label'],  Literal('Accuracy')))
    g.add((accURI, MLS['hasValue'],  Literal('0.85')))
   
    return g

g =  ConjunctiveGraph(identifier = URIRef('http://bio2rdf.org/openpredict_resource:bio2rdf.dataset.openpredict.R1'))

g= addProvanace(g)

g.serialize('data/rdf/results_disjoint_lr.nq', format='nquads')""" ;
  dc:language <http://purl.org/plex#ComputerLanguage_Python_3.7> ;
  rdfs:label "Model preparation, train and evaluation Workflow: OpenPREDCIT - ML.ipynb v.0.2" ;
  dcat:downloadURL "https://github.com/fair-workflows/openpredict/blob/975324eb5263bc0d5d709f833baca31952817844/OpenPREDCIT%20-%20ML.ipynb" ;
.
opredict:Plan_Prepare_Input_Data_Files
  rdf:type p-plan:Plan ;
  dc:description "Prepare Input Data Files" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  pwo:hasFirstStep opredict:Step_Download_and_save_Drugbank_dataset ;
  pwo:hasFirstStep opredict:Step_Download_and_save_Kegg_dataset ;
  pwo:hasFirstStep opredict:Step_Download_and_save_SIDER_dataset ;
  pwo:hasFirstStep opredict:Step_Download_and_save_human_interactome_barabasi ;
  pwo:hasFirstStep opredict:Step_Download_and_save_phenotype_annotations ;
  rdfs:label "Prepare Input Data Files" ;
  prov:wasRevisionOf opredict:Plan_Prepare_Input_Data_Files_v02 ;
.
opredict:Plan_Prepare_Input_Data_Files_v02
  rdf:type p-plan:Plan ;
  dc:description "Prepare Input Data Files" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  pwo:hasFirstStep opredict:Step_Download_and_save_Drugbank_dataset ;
  pwo:hasFirstStep opredict:Step_Download_and_save_Kegg_dataset ;
  pwo:hasFirstStep opredict:Step_Download_and_save_SIDER_dataset ;
  pwo:hasFirstStep opredict:Step_Download_and_save_gold_standard_drug_indications ;
  pwo:hasFirstStep opredict:Step_Download_and_save_human_interactome_barabasi_v02 ;
  pwo:hasFirstStep opredict:Step_Download_and_save_mesh_annotation ;
  pwo:hasFirstStep opredict:Step_Download_and_save_phenotype_annotations_v02 ;
  pwo:hasFirstStep opredict:Step_Download_and_save_pubchem_to_drugbank ;
  rdfs:label "Prepare Input Data Files" ;
  prov:wasRevisionOf opredict:Plan_Prepare_Input_Data_Files ;
.
opredict:Plan_Prepare_triplestore_for_input_data
  rdf:type p-plan:Plan ;
  dc:description """Prepare a triplestore to load all input data as RDF. Steps performed by Remzi here, e.g.:
1- Install Virtuoso/GraphDB in environment XPTO
2- Configure SPARQL endpoints 
3- Configure insert data interface""" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  rdfs:label "Prepare triplestore for input data" ;
  prov:qualifiedUsage :opredict_Link_variable_to_triplestore_for_input_data ;
.
opredict:Plan_Save_Drugbank_dataset
  rdf:type p-plan:Plan ;
  dc:description "Save Drugbank dataset" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  rdfs:label "Save Drugbank dataset" ;
  prov:qualifiedUsage opredict:Link_variable_to_local_Drugbank_dataset ;
.
opredict:Plan_Save_Kegg_dataset
  rdf:type p-plan:Plan ;
  dc:description "Save Drugbank dataset file (.gz) and unzip into: D:\\Projects\\FAIR workflows\\POC\\OpenPREDICT\\Workflow\\input\\drugbank.nq" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  rdfs:label "Save Kegg dataset" ;
  prov:qualifiedUsage opredict:Link_variable_to_local_Kegg_dataset ;
.
opredict:Plan_Save_SIDER_dataset
  rdf:type p-plan:Plan ;
  dc:description "Save SIDER dataset" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  rdfs:label "Save SIDER dataset" ;
  prov:qualifiedUsage opredict:Link_variable_to_local_SIDER_dataset ;
.
opredict:Plan_Save_as_drugbank-drug-smiles_tab
  rdf:type p-plan:Plan ;
  dc:description "Save as drugbank-drug-smiles.tab" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  rdfs:label "Save as drugbank-drug-smiles.tab" ;
  prov:qualifiedUsage opredict:Link_results_to_variable_Input_file_drugbank-drug-smiles_tab ;
.
opredict:Plan_Save_as_drugbank-drug-target_tab
  rdf:type p-plan:Plan ;
  dc:description "Save as drugbank drug-target.tab" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  rdfs:label "Save as drugbank drug-target.tab" ;
  prov:qualifiedUsage opredict:Link_results_to_variable_Input_file_drugbank-drug-target_tab ;
.
opredict:Plan_Save_as_drugbank-sider-se_tab
  rdf:type p-plan:Plan ;
  dc:description "Save as drugbank-sider-se.tab" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  rdfs:label "Save as drugbank-sider-se.tab" ;
  prov:qualifiedUsage opredict:Link_results_to_variable_Input_file_drugbank-sider-se_tab ;
.
opredict:Plan_Save_files_in_triplestore
  rdf:type p-plan:Plan ;
  dc:description "Instructions to save the RDF files in the triplestore" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  rdfs:label "Save files in triplestore" ;
.
opredict:Plan_Save_human_interactome_barabasi
  rdf:type p-plan:Plan ;
  dc:description """1-Open file;
2-Remove header;
3-Save file as: human-interactome-barabasi.tab""" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  rdfs:label "Save human interactome barabasi" ;
  prov:qualifiedUsage opredict:Link_variable_to_local_Human_interactome_barabasi ;
.
opredict:Plan_Save_phenotype_annotations
  rdf:type p-plan:Plan ;
  dc:description "Save file as: /input/phenotype_annotation_hpoteam.tab" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  rdfs:label "Save phenotype annotations" ;
  prov:qualifiedUsage opredict:Link_variable_to_local_phenotype_annotations ;
.
opredict:Plan_Upload_files_to_a_triplestore
  rdf:type p-plan:Plan ;
  dc:description "Upload files to a triplestore" ;
  dc:language :LinguisticSystem_xsd_language_English ;
  p-plan:hasInputVar opredict:Variable_Drugbank_dataset_local ;
  p-plan:hasInputVar opredict:Variable_Kegg_dataset_local ;
  p-plan:hasInputVar opredict:Variable_SIDER_dataset_local ;
  pwo:hasFirstStep opredict:Step_Prepare_triplestore_for_input_data ;
  rdfs:label "Upload files to a triplestore" ;
.
opredict:QueryExecution_DRUG_SIDE_EFFECTS_from_SIDER
  rdf:type prov:Usage ;
  prov:entity opredict:Variable_Query_results_DRUG_SIDE_EFFECTS_from_SIDER ;
.
opredict:QueryExecution_DRUG_SMILES_from_DRUGBANK
  rdf:type prov:Usage ;
  prov:entity opredict:Variable_Query_results_DRUG_SMILES_from_DRUGBANK ;
.
opredict:QueryExecution_DRUG_TARGETS_from_DRUGBANK_and_KEGG
  rdf:type prov:Usage ;
  prov:entity opredict:Variable_Query_results_DRUG_TARGETS_from_DRUGBANK_and_KEGG ;
.
opredict:Role_Developer
  rdf:type prov:Role ;
  rdfs:label "Developer " ;
.
opredict:Role_Executor
  rdf:type prov:Role ;
  rdfs:label "Executor (tester?)" ;
.
opredict:SPARQLConstraint_DRUG_SIDE_EFFECTS_from_SIDER
  rdf:type sh:SPARQLConstraint ;
  sh:select """PREFIX dv: <http://bio2rdf.org/drugbank_vocabulary:>
PREFIX sider: <http://bio2rdf.org/sider_vocabulary:>

SELECT distinct ?drugid ?se
{
?dia <http://bio2rdf.org/sider_vocabulary:drug> ?stitch_flat .
?dia <http://bio2rdf.org/sider_vocabulary:effect> ?se .
{
?stitch_flat <http://bio2rdf.org/sider_vocabulary:x-pubchem.compound> ?pc .
}
UNION{
?stitch_flat <http://bio2rdf.org/sider_vocabulary:stitch-stereo> ?stitch_stereo .
?stitch_stereo <http://bio2rdf.org/sider_vocabulary:x-pubchem.compound> ?pc .
}
?d dv:x-pubchemcompound ?pc  .
BIND(STRAFTER( str(?d), \"http://bio2rdf.org/drugbank:\") AS ?drugid)
}""" ;
.
opredict:SPARQLConstraint_DRUG_SMILES_from_DRUGBANK
  rdf:type sh:SPARQLConstraint ;
  sh:select """PREFIX dv: <http://bio2rdf.org/drugbank_vocabulary:>

SELECT distinct ?drugid ?smiles
{
 ?d <http://bio2rdf.org/openpredict_vocabulary:indication> ?i .
 ?d dv:calculated-properties ?cp .
 ?cp a dv:SMILES .
 ?cp dv:value ?smiles .
 BIND( STRAFTER(str(?d), \"http://bio2rdf.org/drugbank:\") AS ?drugid)
}""" ;
.
opredict:SPARQLConstraint_DRUG_TARGETS_from_DRUGBANK_and_KEGG
  rdf:type sh:SPARQLConstraint ;
  sh:select """PREFIX iv: <http://bio2rdf.org/irefindex_vocabulary:>
PREFIX dv: <http://bio2rdf.org/drugbank_vocabulary:>
PREFIX hv: <http://bio2rdf.org/hgnc_vocabulary:>
PREFIX kv: <http://bio2rdf.org/kegg_vocabulary:>
SELECT distinct ?drugid ?geneid
WHERE
{
?drug <http://bio2rdf.org/openpredict_vocabulary:indication> ?i .
{
  ?d a kv:Drug .
  ?d kv:target ?l .
  ?l kv:link ?t .
  BIND (URI( REPLACE(str(?t),\"HSA\",\"hsa\")) AS ?target) .
  ?target a kv:Gene .
  ?target kv:x-ncbigene ?ncbi .
  #?target kv:x-uniprot ?ncbi .
  ?d kv:x-drugbank ?drug .
}
UNION
{
  ?drug a dv:Drug .
  ?drug dv:target ?target .
  ?target dv:x-hgnc ?hgnc .
  ?hgnc hv:x-ncbigene ?ncbi .
  #?hgnc hv:uniprot ?ncbi .
}
BIND ( STRAFTER(str(?ncbi),\"http://bio2rdf.org/ncbigene:\") AS ?geneid)
BIND( STRAFTER(str(?drug), \"http://bio2rdf.org/drugbank:\") AS ?drugid)
}""" ;
.
opredict:Step_Add_files_to_triplestore_and_execute_queries
  rdf:type bpmn:ManualTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v02 ;
  dul:isDescribedBy opredict:Plan_Add_files_to_triplestore_and_execute_queries ;
  rdfs:label "Add files to triplestore and execute queries" ;
.
opredict:Step_Download_Drugbank_dataset
  rdf:type bpmn:ManualTask ;
  rdf:type edam:operation_2409 ;
  rdf:type p-plan:Step ;
  p-plan:hasOutputVar opredict:Variable_Drugbank_dataset_online ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Download_Drugbank_dataset ;
  dul:precedes opredict:Step_Save_Drugbank_dataset ;
  rdfs:label "Download Drugbank dataset" ;
.
opredict:Step_Download_Kegg_dataset
  rdf:type bpmn:ManualTask ;
  rdf:type edam:operation_2409 ;
  rdf:type p-plan:Step ;
  p-plan:hasOutputVar opredict:Variable_Kegg_dataset_online ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v02 ;
  dul:isDescribedBy opredict:Plan_Download_Kegg_dataset ;
  dul:precedes opredict:Step_Save_Kegg_dataset ;
  rdfs:label "Download Kegg dataset" ;
.
opredict:Step_Download_SIDER_dataset
  rdf:type bpmn:ManualTask ;
  rdf:type edam:operation_2409 ;
  rdf:type p-plan:Step ;
  p-plan:hasOutputVar opredict:Variable_SIDER_dataset_online ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v02 ;
  dul:isDescribedBy opredict:Plan_Download_SIDER_dataset ;
  dul:precedes opredict:Step_Save_SIDER_dataset ;
  rdfs:label "Download SIDER dataset" ;
.
opredict:Step_Download_and_save_Drugbank_dataset
  rdf:type bpmn:ManualTask ;
  rdf:type edam:operation_2409 ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v02 ;
  dul:isDescribedBy opredict:Plan_Download_and_save_Drugbank_dataset ;
  dul:precedes opredict:Step_Add_files_to_triplestore_and_execute_queries ;
  rdfs:label "Download and save Drugbank dataset" ;
.
opredict:Step_Download_and_save_Kegg_dataset
  rdf:type bpmn:ManualTask ;
  rdf:type edam:operation_2409 ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v02 ;
  dul:isDescribedBy opredict:Plan_Download_and_save_Kegg_dataset ;
  dul:precedes opredict:Step_Add_files_to_triplestore_and_execute_queries ;
  rdfs:label "Download and save Kegg dataset" ;
.
opredict:Step_Download_and_save_SIDER_dataset
  rdf:type bpmn:ManualTask ;
  rdf:type edam:operation_2409 ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v02 ;
  dul:isDescribedBy opredict:Plan_Download_and_save_SIDER_dataset ;
  dul:precedes opredict:Step_Add_files_to_triplestore_and_execute_queries ;
  rdfs:label "Download and save SIDER dataset" ;
.
opredict:Step_Download_and_save_gold_standard_drug_indications
  rdf:type bpmn:ScriptTask ;
  rdf:type edam:operation_2409 ;
  rdf:type p-plan:Step ;
  p-plan:hasInputVar opredict:Variable_gold_standard_drug_indications_file_online ;
  p-plan:hasOutputVar opredict:Variable_gold_standard_drug_indications_local ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v02 ;
  dul:isDescribedBy opredict:Plan_Download_and_save_gold_standard_drug_indications ;
.
opredict:Step_Download_and_save_human_interactome_barabasi
  rdf:type bpmn:ManualTask ;
  rdf:type edam:operation_2409 ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Download_and_save_human_interactome_barabasi ;
  dul:precedes opredict:Step_Execute_FAIRifier_process_to_human_interactome_barabasi ;
  rdfs:label "Download and save human interactome barabasi" ;
.
opredict:Step_Download_and_save_human_interactome_barabasi_v02
  rdf:type bpmn:ScriptTask ;
  rdf:type edam:operation_2409 ;
  rdf:type p-plan:Step ;
  p-plan:hasInputVar opredict:Variable_Human_interactome_barabasi_online ;
  p-plan:hasOutputVar opredict:Variable_Human_interactome_barabasi_local ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v02 ;
  dul:isDescribedBy opredict:Plan_Download_and_save_human_interactome_barabasi_v02 ;
  rdfs:label "Download and save human interactome barabasi" ;
.
opredict:Step_Download_and_save_mesh_annotation
  rdf:type bpmn:ScriptTask ;
  rdf:type edam:operation_2409 ;
  rdf:type p-plan:Step ;
  p-plan:hasInputVar opredict:Variable_mesh_annotation_file_online ;
  p-plan:hasOutputVar opredict:Variable_mesh_annotation_file_local ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v02 ;
  dul:isDescribedBy opredict:Plan_Download_and_save_mesh_annotation ;
.
opredict:Step_Download_and_save_phenotype_annotations
  rdf:type bpmn:ManualTask ;
  rdf:type edam:operation_2409 ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Download_and_save_phenotype_annotations ;
  dul:precedes opredict:Step_Execute_FAIRifier_process_to_phenotype_annotations ;
  rdfs:label "Download and save phenotype annotations " ;
.
opredict:Step_Download_and_save_phenotype_annotations_v02
  rdf:type bpmn:ScriptTask ;
  rdf:type edam:operation_2409 ;
  rdf:type p-plan:Step ;
  p-plan:hasInputVar opredict:Variable_Phenotype_annotations_file_online ;
  p-plan:hasOutputVar opredict:Variable_Phenotype_annotations_file_local ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v02 ;
  dul:isDescribedBy opredict:Plan_Download_and_save_phenotype_annotations_v02 ;
  rdfs:label "Download and save phenotype annotations " ;
.
opredict:Step_Download_and_save_pubchem_to_drugbank
  rdf:type bpmn:ScriptTask ;
  rdf:type edam:operation_2409 ;
  rdf:type p-plan:Step ;
  p-plan:hasInputVar opredict:Variable_mesh_annotation_file_online ;
  p-plan:hasOutputVar opredict:Variable_pubchem_to_drugbank_file_local ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v02 ;
  dul:isDescribedBy opredict:Plan_Download_and_save_pubchem_to_drugbank ;
.
opredict:Step_Download_human_interactome_barabasi
  rdf:type bpmn:ManualTask ;
  rdf:type edam:operation_2409 ;
  rdf:type p-plan:Step ;
  p-plan:hasOutputVar opredict:Variable_Human_interactome_barabasi_online ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Download_human_interactome_barabasi ;
  dul:precedes opredict:Step_Save_human_interactome_barabasi ;
  rdfs:label "Download human interactome barabasi" ;
.
opredict:Step_Download_phenotype_annotations
  rdf:type bpmn:ManualTask ;
  rdf:type edam:operation_2409 ;
  rdf:type p-plan:Step ;
  p-plan:hasOutputVar opredict:Variable_Phenotype_annotations_file_online ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Download_phenotype_annotations ;
  dul:precedes opredict:Step_Save_phenotype_annotations ;
  rdfs:label "Download phenotype annotations" ;
.
opredict:Step_Execute_FAIRifier_process_to_human_interactome_barabasi
  rdf:type bpmn:ManualTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Execute_FAIRifier_process_to_human_interactome_barabasi ;
  rdfs:label "Execute FAIRifier process to human interactome barabasi" ;
.
opredict:Step_Execute_FAIRifier_process_to_phenotype_annotations
  rdf:type bpmn:ManualTask ;
  rdf:type p-plan:Step ;
  p-plan:hasInputVar opredict:Variable_Phenotype_annotations_file_local ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Execute_FAIRifier_process_to_phenotype_annotations ;
  rdfs:label "Execute FAIRifier process to phenotype annotations" ;
.
opredict:Step_Execute_queries_and_create_input_files_tab
  rdf:type bpmn:ManualTask ;
  rdf:type p-plan:Step ;
  p-plan:hasInputVar opredict:Variable_Triplestore_endpoint_for_input_data ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v02 ;
  dul:isDescribedBy opredict:Plan_Execute_queries_and_create_input_files_tab ;
.
opredict:Step_Execute_query_DRUG_SIDE_EFFECTS_from_SIDER
  rdf:type bpmn:ManualTask ;
  rdf:type p-plan:Step ;
  p-plan:hasOutputVar opredict:Variable_Query_results_DRUG_SIDE_EFFECTS_from_SIDER ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Execute_query_DRUG_SIDE_EFFECTS_from_SIDER ;
  dul:precedes opredict:Step_Save_as_drugbank-sider-se_tab ;
.
opredict:Step_Execute_query_DRUG_SMILES_from_DRUGBANK
  rdf:type bpmn:ManualTask ;
  rdf:type edam:operation_0224 ;
  rdf:type p-plan:Step ;
  p-plan:hasOutputVar opredict:Variable_Query_results_DRUG_SMILES_from_DRUGBANK ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Execute_query_DRUG_SMILES_from_DRUGBANK ;
  dul:precedes opredict:Step_Save_as_drugbank-drug-smiles_tab ;
.
opredict:Step_Execute_query_DRUG_TARGETS_from_DRUGBANK_and_KEGG
  rdf:type bpmn:ManualTask ;
  rdf:type edam:operation_0224 ;
  rdf:type p-plan:Step ;
  p-plan:hasOutputVar opredict:Variable_Query_results_DRUG_TARGETS_from_DRUGBANK_and_KEGG ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Execute_query_DRUG_TARGETS_-from_DRUGBANK_and_KEGG ;
  dul:precedes opredict:Step_Save_as_drugbank-drug-target_tab ;
.
opredict:Step_Feature_generation_01_Pipeline_Source_Cell00
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell00 ;
  dul:precedes opredict:Step_Feature_generation_01_Pipeline_Source_Cell01 ;
.
opredict:Step_Feature_generation_01_Pipeline_Source_Cell01
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell01 ;
  dul:precedes opredict:Step_Feature_generation_01_Pipeline_Source_Cell02 ;
.
opredict:Step_Feature_generation_01_Pipeline_Source_Cell01_Spec
  rdf:type bpmn:ManualTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell01_Spec ;
  dul:precedes opredict:Step_Feature_generation_01_Pipeline_Source_Cell06_Spec ;
.
opredict:Step_Feature_generation_01_Pipeline_Source_Cell02
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell02 ;
  dul:precedes opredict:Step_Feature_generation_01_Pipeline_Source_Cell03 ;
.
opredict:Step_Feature_generation_01_Pipeline_Source_Cell03
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell03 ;
  dul:precedes opredict:Step_Feature_generation_01_Pipeline_Source_Cell04 ;
.
opredict:Step_Feature_generation_01_Pipeline_Source_Cell04
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell04 ;
  dul:precedes opredict:Step_Feature_generation_01_Pipeline_Source_Cell05 ;
.
opredict:Step_Feature_generation_01_Pipeline_Source_Cell05
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell05 ;
  dul:precedes opredict:Step_Feature_generation_01_Pipeline_Source_Cell06 ;
.
opredict:Step_Feature_generation_01_Pipeline_Source_Cell06
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell06 ;
  dul:precedes opredict:Step_Feature_generation_01_Pipeline_Source_Cell07 ;
.
opredict:Step_Feature_generation_01_Pipeline_Source_Cell06_Spec
  rdf:type bpmn:ManualTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell06_Spec ;
  dul:precedes opredict:Step_Feature_generation_01_Pipeline_Source_Cell10_Spec ;
.
opredict:Step_Feature_generation_01_Pipeline_Source_Cell07
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell07 ;
  dul:precedes opredict:Step_Feature_generation_01_Pipeline_Source_Cell08 ;
.
opredict:Step_Feature_generation_01_Pipeline_Source_Cell08
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell08 ;
  dul:precedes opredict:Step_Feature_generation_01_Pipeline_Source_Cell09 ;
.
opredict:Step_Feature_generation_01_Pipeline_Source_Cell09
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell09 ;
  dul:precedes opredict:Step_Feature_generation_01_Pipeline_Source_Cell10 ;
.
opredict:Step_Feature_generation_01_Pipeline_Source_Cell10
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell10 ;
  dul:precedes opredict:Step_Feature_generation_01_Pipeline_Source_Cell11 ;
.
opredict:Step_Feature_generation_01_Pipeline_Source_Cell10_Spec
  rdf:type bpmn:ManualTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell10_Spec ;
.
opredict:Step_Feature_generation_01_Pipeline_Source_Cell11
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell11 ;
  dul:precedes opredict:Step_Feature_generation_01_Pipeline_Source_Cell12 ;
.
opredict:Step_Feature_generation_01_Pipeline_Source_Cell12
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell12 ;
  dul:precedes opredict:Step_Feature_generation_01_Pipeline_Source_Cell13 ;
.
opredict:Step_Feature_generation_01_Pipeline_Source_Cell13
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell13 ;
  dul:precedes opredict:Step_Feature_generation_01_Pipeline_Source_Cell14 ;
.
opredict:Step_Feature_generation_01_Pipeline_Source_Cell14
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell14 ;
  dul:precedes opredict:Step_Feature_generation_01_Pipeline_Source_Cell15 ;
.
opredict:Step_Feature_generation_01_Pipeline_Source_Cell15
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_Source_Cell15 ;
.
opredict:Step_Feature_generation_Pipeline_OpenPREDICT_ipynb
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Feature_generation_01_Pipeline_OpenPREDICT_ipynb ;
  dul:precedes opredict:Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb ;
  rdfs:label "Feature generation: Pipeline OpenPREDICT.ipynb" ;
.
opredict:Step_Feature_generation_Pipeline_OpenPREDICT_ipynb_v02
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v02 ;
  dul:isDescribedBy opredict:Plan_Feature_generation_Pipeline_OpenPREDICT_ipynb_v02 ;
  dul:precedes opredict:Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02 ;
  rdfs:label "Feature generation: Pipeline OpenPREDICT.ipynb v.0.2" ;
.
opredict:Step_Feature_generation_Pipeline_OpenPREDICT_ipynb_v02_Download_and_Save_Input
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v02 ;
  dul:isDescribedBy opredict:Plan_Feature_generation_Pipeline_OpenPREDICT_ipynb_v02_Download_and_Save_Input ;
  dul:precedes opredict:Step_Feature_generation_Pipeline_OpenPREDICT_ipynb_v02_FeatureGeneration ;
.
opredict:Step_Feature_generation_Pipeline_OpenPREDICT_ipynb_v02_FeatureGeneration
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v02 ;
  dul:isDescribedBy opredict:Plan_Feature_generation_Pipeline_OpenPREDICT_ipynb_v02_FeatureGeneration ;
.
opredict:Step_Format_results_for_presentation
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Format_results_for_presentation ;
  rdfs:label "Format results for presentation" ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell00>
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy <http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell00> ;
  dul:precedes <http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell01> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell01>
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy <http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell01> ;
  dul:precedes <http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell02> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell02>
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy <http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell02> ;
  dul:precedes <http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell03> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell03>
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy <http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell03> ;
  dul:precedes <http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell04> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell04>
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy <http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell04> ;
  dul:precedes <http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell05> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell05>
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy <http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell05> ;
  dul:precedes <http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell06> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell06>
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy <http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell06> ;
  dul:precedes <http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell07> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell07>
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy <http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell07> ;
  dul:precedes <http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell08> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell08>
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy <http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell08> ;
  dul:precedes <http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell09> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell09>
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy <http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell09> ;
.
opredict:Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy <http://purl.org/plex/Instances/OpenPREDICT#Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb> ;
  dul:precedes opredict:Step_Format_results_for_presentation ;
  rdfs:label "Model preparation, train and evaluation Workflow: OpenPREDCIT - ML.ipynb" ;
.
opredict:Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v02 ;
  dul:isDescribedBy opredict:Plan_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02 ;
  dul:precedes opredict:Step_Format_results_for_presentation ;
  rdfs:label "Model preparation, train and evaluation Workflow: OpenPREDCIT - ML.ipynb" ;
.
opredict:Step_Prepare_Input_Data_Files
  rdf:type bpmn:ManualTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Prepare_Input_Data_Files ;
  dul:precedes opredict:Step_Feature_generation_Pipeline_OpenPREDICT_ipynb ;
  rdfs:label "Prepare Input Data Files" ;
.
opredict:Step_Prepare_Input_Data_Files_v02
  rdf:type bpmn:ScriptTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v02 ;
  dul:isDescribedBy opredict:Plan_Prepare_Input_Data_Files_v02 ;
  dul:precedes opredict:Step_Feature_generation_Pipeline_OpenPREDICT_ipynb_v02 ;
  rdfs:label "Prepare Input Data Files" ;
.
opredict:Step_Prepare_triplestore_for_input_data
  rdf:type bpmn:ManualTask ;
  rdf:type p-plan:Step ;
  dc:description "Configure a triplestore to upload all input data as RDF" ;
  p-plan:hasOutputVar opredict:Variable_Triplestore_endpoint_for_input_data ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Prepare_triplestore_for_input_data ;
  dul:precedes opredict:Step_Save_files_in_triplestore ;
.
opredict:Step_Save_Drugbank_dataset
  rdf:type bpmn:ManualTask ;
  rdf:type p-plan:Step ;
  p-plan:hasInputVar opredict:Variable_Drugbank_dataset_online ;
  p-plan:hasOutputVar opredict:Variable_Drugbank_dataset_local ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Save_Drugbank_dataset ;
  rdfs:label "Save Drugbank dataset" ;
.
opredict:Step_Save_Kegg_dataset
  rdf:type bpmn:ManualTask ;
  rdf:type p-plan:Step ;
  p-plan:hasInputVar opredict:Variable_Kegg_dataset_online ;
  p-plan:hasOutputVar opredict:Variable_Kegg_dataset_local ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v02 ;
  dul:isDescribedBy opredict:Plan_Save_Kegg_dataset ;
  rdfs:label "Save Kegg dataset" ;
.
opredict:Step_Save_SIDER_dataset
  rdf:type bpmn:ManualTask ;
  rdf:type p-plan:Step ;
  p-plan:hasInputVar opredict:Variable_SIDER_dataset_online ;
  p-plan:hasOutputVar opredict:Variable_SIDER_dataset_local ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v02 ;
  dul:isDescribedBy opredict:Plan_Save_SIDER_dataset ;
  rdfs:label "Save SIDER dataset" ;
.
opredict:Step_Save_as_drugbank-drug-smiles_tab
  rdf:type bpmn:ManualTask ;
  rdf:type p-plan:Step ;
  p-plan:hasInputVar opredict:Variable_Query_results_DRUG_SMILES_from_DRUGBANK ;
  p-plan:hasOutputVar opredict:Variable_Input_file_drugbank-drug-smiles_tab ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Save_as_drugbank-drug-smiles_tab ;
.
opredict:Step_Save_as_drugbank-drug-target_tab
  rdf:type bpmn:ManualTask ;
  rdf:type p-plan:Step ;
  p-plan:hasInputVar opredict:Variable_Query_results_DRUG_TARGETS_from_DRUGBANK_and_KEGG ;
  p-plan:hasOutputVar opredict:Variable_Input_file_drugbank-drug-target_tab ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Save_as_drugbank-drug-target_tab ;
.
opredict:Step_Save_as_drugbank-sider-se_tab
  rdf:type bpmn:ManualTask ;
  rdf:type p-plan:Step ;
  p-plan:hasInputVar opredict:Variable_Query_results_DRUG_SIDE_EFFECTS_from_SIDER ;
  p-plan:hasOutputVar opredict:Variable_Input_file_drugbank-sider-se_tab ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Save_as_drugbank-sider-se_tab ;
.
opredict:Step_Save_files_in_triplestore
  rdf:type bpmn:ManualTask ;
  rdf:type p-plan:Step ;
  p-plan:hasInputVar opredict:Variable_Triplestore_endpoint_for_input_data ;
  p-plan:hasOutputVar opredict:Variable_Triplestore_endpoint_for_input_data ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Save_files_in_triplestore ;
.
opredict:Step_Save_human_interactome_barabasi
  rdf:type bpmn:ManualTask ;
  rdf:type p-plan:Step ;
  p-plan:hasInputVar opredict:Variable_Human_interactome_barabasi_online ;
  p-plan:hasOutputVar opredict:Variable_Human_interactome_barabasi_local ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Save_human_interactome_barabasi ;
  rdfs:label "Save human interactome barabasi" ;
.
opredict:Step_Save_phenotype_annotations
  rdf:type bpmn:ManualTask ;
  rdf:type p-plan:Step ;
  p-plan:hasInputVar opredict:Variable_Phenotype_annotations_file_online ;
  p-plan:hasOutputVar opredict:Variable_Phenotype_annotations_file_local ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  dul:isDescribedBy opredict:Plan_Save_phenotype_annotations ;
  rdfs:label "Save phenotype annotations" ;
.
opredict:Step_Upload_files_to_a_triplestore
  rdf:type bpmn:ManualTask ;
  rdf:type p-plan:Step ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v01 ;
  p-plan:isStepOfPlan opredict:Plan_Main_Protocol_v02 ;
  dul:isDescribedBy opredict:Plan_Upload_files_to_a_triplestore ;
  dul:precedes opredict:Step_Execute_queries_and_create_input_files_tab ;
.
opredict:Triplestore_endpoint_input_data
  rdf:type fabio:Triplestore ;
  rdf:type dcat:Distribution ;
  dc:description """** TODO: check the best way to represent a triplestore and its endpoints for: 
1- data insertion from files
2- SPARQL endpoint""" ;
  schema:URL "https://graphdb.dumontierlab.com/repositories/bio2rdf_remzi" ;
  schema:URL "http://yasgui.org/#" ;
.
opredict:Usage_Fetch_download-_phenotype_annotations_to_variable
  rdf:type prov:Usage ;
  rdfs:label "Link variable to download- phenotype annotations" ;
  prov:entity <http://purl.org/plex/Instances/OpenPREDICT#Distribution_phenotype_annotation_hpoteam.tab_Build_1263> ;
  prov:entity opredict:Variable_Phenotype_annotations_file_online ;
.
opredict:Usage_Fetch_download-_phenotype_annotations_to_variable_v02
  rdf:type prov:Usage ;
  rdfs:label "Link variable to download- phenotype annotations" ;
  prov:entity <http://purl.org/plex/Instances/OpenPREDICT#Distribution_phenotype_annotation_hpoteam.tab_Build_1266> ;
  prov:entity opredict:Variable_Phenotype_annotations_file_online ;
.
opredict:Usage_Fetch_download_Drugbank_dataset_to_variable
  rdf:type prov:Usage ;
  rdfs:label "Link variable to download Drugbank dataset" ;
  prov:entity <http://purl.org/plex/Instances/OpenPREDICT#Distribution_release-4-drugbank-drugbank.nq.gz> ;
  prov:entity opredict:Variable_Drugbank_dataset_online ;
.
opredict:Usage_Fetch_download_Human_interactome_barabasi_to_variable
  rdf:type prov:Usage ;
  rdfs:label "Link variable to download Human interactome barabasi" ;
  prov:entity <http://purl.org/plex/Instances/OpenPREDICT#Distribution_srep-2016-161017-srep35241-extref-srep35241-s3.txt> ;
  prov:entity opredict:Variable_Human_interactome_barabasi_online ;
.
opredict:Usage_Fetch_download_Kegg_dataset_to_variable
  rdf:type prov:Usage ;
  rdfs:label "Link variable to download Kegg dataset" ;
  prov:entity <http://purl.org/plex/Instances/OpenPREDICT#Distribution_release-4-kegg-kegg-drug.nq.gz> ;
  prov:entity opredict:Variable_Kegg_dataset_online ;
.
opredict:Usage_Fetch_download_SIDER_dataset_to_variable
  rdf:type prov:Usage ;
  rdfs:label "Link variable to download SIDER dataset" ;
  prov:entity <http://purl.org/plex/Instances/OpenPREDICT#Distribution_release-4-sider-sider-se.nq.gz> ;
  prov:entity opredict:Variable_SIDER_dataset_online ;
.
opredict:Usage_Fetch_download_gold_standard_drug_indications
  rdf:type prov:Usage ;
  rdfs:label "Link variable to download gold_standard_drug_indications" ;
  prov:entity <http://purl.org/plex/Instances/OpenPREDICT#Distribution_gold_standard_drug_indications_msb201126-s4.xls> ;
  prov:entity opredict:Variable_gold_standard_drug_indications_file_online ;
  prov:entity opredict:Variable_gold_standard_drug_indications_local ;
.
opredict:Usage_Fetch_download_mesh_annotation_to_variable
  rdf:type prov:Usage ;
  rdfs:label "Link variable to download- mesh_annotation" ;
  prov:entity <http://purl.org/plex/Instances/OpenPREDICT#Distribution_mesh_annotation_mim2mesh.tsv> ;
  prov:entity opredict:Variable_mesh_annotation_file_local ;
  prov:entity opredict:Variable_mesh_annotation_file_online ;
.
opredict:Usage_Fetch_download_pubchem_to_drugbank
  rdf:type prov:Usage ;
  rdfs:label "Link variable to download Pubchem ids" ;
  prov:entity <http://purl.org/plex/Instances/OpenPREDICT#Distribution_pubchem_to_drugbank_pubchem.tsv> ;
  prov:entity opredict:Variable_pubchem_to_drugbank_file_local ;
  prov:entity opredict:Variable_pubchem_to_drugbank_file_online ;
.
opredict:Variable_Drugbank_dataset_local
  rdf:type p-plan:Variable ;
  rdfs:label "Drugbank dataset local" ;
.
opredict:Variable_Drugbank_dataset_online
  rdf:type p-plan:Variable ;
  rdfs:label "Drugbank dataset online" ;
.
opredict:Variable_Human_interactome_barabasi_local
  rdf:type p-plan:Variable ;
  rdfs:label "Human interactome barabasi local" ;
.
opredict:Variable_Human_interactome_barabasi_online
  rdf:type p-plan:Variable ;
  rdfs:label "Human interactome barabasi online" ;
.
opredict:Variable_Input_file_drugbank-drug-smiles_tab
  rdf:type p-plan:Variable ;
.
opredict:Variable_Input_file_drugbank-drug-target_tab
  rdf:type p-plan:Variable ;
.
opredict:Variable_Input_file_drugbank-sider-se_tab
  rdf:type p-plan:Variable ;
.
opredict:Variable_Kegg_dataset_local
  rdf:type p-plan:Variable ;
  rdfs:label "Kegg dataset local" ;
.
opredict:Variable_Kegg_dataset_online
  rdf:type p-plan:Variable ;
  rdfs:label "Kegg dataset online" ;
.
opredict:Variable_Phenotype_annotations_file_local
  rdf:type p-plan:Variable ;
  rdfs:label "Phenotype annotations file local" ;
.
opredict:Variable_Phenotype_annotations_file_online
  rdf:type p-plan:Variable ;
  rdfs:label "Phenotype annotations file online" ;
.
opredict:Variable_Query_results_DRUG_SIDE_EFFECTS_from_SIDER
  rdf:type p-plan:Variable ;
.
opredict:Variable_Query_results_DRUG_SMILES_from_DRUGBANK
  rdf:type p-plan:Variable ;
.
opredict:Variable_Query_results_DRUG_TARGETS_from_DRUGBANK_and_KEGG
  rdf:type p-plan:Variable ;
.
opredict:Variable_SIDER_dataset_local
  rdf:type p-plan:Variable ;
  rdfs:label "SIDER dataset local" ;
.
opredict:Variable_SIDER_dataset_online
  rdf:type p-plan:Variable ;
  rdfs:label "SIDER dataset online" ;
.
opredict:Variable_Triplestore_endpoint_for_input_data
  rdf:type p-plan:Variable ;
.
opredict:Variable_gold_standard_drug_indications_file_online
  rdf:type p-plan:Variable ;
  rdfs:label "gold_standard_drug_indications file online" ;
.
opredict:Variable_gold_standard_drug_indications_local
  rdf:type p-plan:Variable ;
  rdfs:label "gold_standard_drug_indications file local" ;
.
opredict:Variable_mesh_annotation_file_local
  rdf:type p-plan:Variable ;
  rdfs:label "Mesh annotation file local" ;
.
opredict:Variable_mesh_annotation_file_online
  rdf:type p-plan:Variable ;
  rdfs:label "mesh_annotation file online" ;
.
opredict:Variable_pubchem_to_drugbank_file_local
  rdf:type p-plan:Variable ;
  rdfs:label "Pubchem file local" ;
.
opredict:Variable_pubchem_to_drugbank_file_online
  rdf:type p-plan:Variable ;
  rdfs:label "pubchem file online" ;
.
opredict:WorkflowExecutionArtifact_Output_Step_Feature_generation_01_Pipeline_Source_Cell01_Execution_1546300862
  rdf:type opmw:WorkflowExecutionArtifact ;
  dc:description """
      \"text/html\": [
       \"<div>\\n\",
       \"<style scoped>\\n\",
       \"    .dataframe tbody tr th:only-of-type {\\n\",
       \"        vertical-align: middle;\\n\",
       \"    }\\n\",
       \"\\n\",
       \"    .dataframe tbody tr th {\\n\",
       \"        vertical-align: top;\\n\",
       \"    }\\n\",
       \"\\n\",
       \"    .dataframe thead th {\\n\",
       \"        text-align: right;\\n\",
       \"    }\\n\",
       \"</style>\\n\",
       \"<table border=\\\"1\\\" class=\\\"dataframe\\\">\\n\",
       \"  <thead>\\n\",
       \"    <tr style=\\\"text-align: right;\\\">\\n\",
       \"      <th></th>\\n\",
       \"      <th>drugid</th>\\n\",
       \"      <th>smiles</th>\\n\",
       \"    </tr>\\n\",
       \"  </thead>\\n\",
       \"  <tbody>\\n\",
       \"    <tr>\\n\",
       \"      <th>0</th>\\n\",
       \"      <td>DB00014</td>\\n\",
       \"      <td>CC(C)C[C@H](NC(=O)[C@@H](COC(C)(C)C)NC(=O)[C@H...</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>1</th>\\n\",
       \"      <td>DB00035</td>\\n\",
       \"      <td>NC(=O)CC[C@@H]1NC(=O)[C@H](CC2=CC=CC=C2)NC(=O)...</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>2</th>\\n\",
       \"      <td>DB00091</td>\\n\",
       \"      <td>CCC1NC(=O)C(C(O)C(C)CC=CC)N(C)C(=O)C(C(C)C)N(C...</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>3</th>\\n\",
       \"      <td>DB00104</td>\\n\",
       \"      <td>C[C@@H](O)[C@@H](CO)NC(=O)[C@@H]1CSSC[C@H](NC(...</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>4</th>\\n\",
       \"      <td>DB00114</td>\\n\",
       \"      <td>CC1=NC=C(COP(O)(O)=O)C(C=O)=C1O</td>\\n\",
       \"    </tr>\\n\",
       \"  </tbody>\\n\",
       \"</table>\\n\",
       \"</div>\"
      ],
      \"text/plain\": [
       \"    drugid                                             smiles\\n\",
       \"0  DB00014  CC(C)C[C@H](NC(=O)[C@@H](COC(C)(C)C)NC(=O)[C@H...\\n\",
       \"1  DB00035  NC(=O)CC[C@@H]1NC(=O)[C@H](CC2=CC=CC=C2)NC(=O)...\\n\",
       \"2  DB00091  CCC1NC(=O)C(C(O)C(C)CC=CC)N(C)C(=O)C(C(C)C)N(C...\\n\",
       \"3  DB00104  C[C@@H](O)[C@@H](CO)NC(=O)[C@@H]1CSSC[C@H](NC(...\\n\",
       \"4  DB00114                    CC1=NC=C(COP(O)(O)=O)C(C=O)=C1O\"
      ]""" ;
  prov:qualifiedGeneration opredict:Generation_Output_Step_Feature_generation_01_Pipeline_Source_Cell01_Execution_1546300862 ;
.
opredict:WorkflowExecutionArtifact_Output_Step_Feature_generation_01_Pipeline_Source_Cell02_Execution_1546300862
  rdf:type opmw:WorkflowExecutionArtifact ;
  dc:description """\"text\": [
      \"579 drugs have all Target feature \\n\",
      \"579 drugs have all Target GOA feature \\n\",
      \"583 drugs have all Fingerprint feature \\n\",
      \"524 drugs have all Sideeffect feature \\n\"
     ]""" ;
  prov:qualifiedGeneration opredict:Generation_Output_Step_Feature_generation_01_Pipeline_Source_Cell02_Execution_1546300862 ;
.
opredict:WorkflowExecutionArtifact_Output_Step_Feature_generation_01_Pipeline_Source_Cell03_Execution_1546300862
  rdf:type opmw:WorkflowExecutionArtifact ;
  dc:description """\"text\": [
      \"579 drugs have all Target SEQ feature \\n\"
     ]""" ;
  prov:qualifiedGeneration opredict:Generation_Output_Step_Feature_generation_01_Pipeline_Source_Cell03_Execution_1546300862 ;
.
opredict:WorkflowExecutionArtifact_Output_Step_Feature_generation_01_Pipeline_Source_Cell04_Execution_1546300862
  rdf:type opmw:WorkflowExecutionArtifact ;
  dc:description """\"text\": [
      \"579 579 583 524\\n\",
      \"510\\n\"
     ]""" ;
  prov:qualifiedGeneration opredict:Generation_Output_Step_Feature_generation_01_Pipeline_Source_Cell04_Execution_1546300862 ;
.
opredict:WorkflowExecutionArtifact_Output_Step_Feature_generation_01_Pipeline_Source_Cell05_Execution_1546300862
  rdf:type opmw:WorkflowExecutionArtifact ;
  dc:description """\"text/html\": [
       \"<div>\\n\",
       \"<style scoped>\\n\",
       \"    .dataframe tbody tr th:only-of-type {\\n\",
       \"        vertical-align: middle;\\n\",
       \"    }\\n\",
       \"\\n\",
       \"    .dataframe tbody tr th {\\n\",
       \"        vertical-align: top;\\n\",
       \"    }\\n\",
       \"\\n\",
       \"    .dataframe thead th {\\n\",
       \"        text-align: right;\\n\",
       \"    }\\n\",
       \"</style>\\n\",
       \"<table border=\\\"1\\\" class=\\\"dataframe\\\">\\n\",
       \"  <thead>\\n\",
       \"    <tr style=\\\"text-align: right;\\\">\\n\",
       \"      <th></th>\\n\",
       \"      <th>drugid</th>\\n\",
       \"      <th>umlsid</th>\\n\",
       \"    </tr>\\n\",
       \"  </thead>\\n\",
       \"  <tbody>\\n\",
       \"    <tr>\\n\",
       \"      <th>0</th>\\n\",
       \"      <td>DB00583</td>\\n\",
       \"      <td>C0000729</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>1</th>\\n\",
       \"      <td>DB00583</td>\\n\",
       \"      <td>C0000737</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>2</th>\\n\",
       \"      <td>DB00583</td>\\n\",
       \"      <td>C0002418</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>3</th>\\n\",
       \"      <td>DB00583</td>\\n\",
       \"      <td>C0002871</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>4</th>\\n\",
       \"      <td>DB00583</td>\\n\",
       \"      <td>C0003123</td>\\n\",
       \"    </tr>\\n\",
       \"  </tbody>\\n\",
       \"</table>\\n\",
       \"</div>\"
      ],
      \"text/plain\": [
       \"    drugid    umlsid\\n\",
       \"0  DB00583  C0000729\\n\",
       \"1  DB00583  C0000737\\n\",
       \"2  DB00583  C0002418\\n\",
       \"3  DB00583  C0002871\\n\",
       \"4  DB00583  C0003123\"
      ]""" ;
  prov:qualifiedGeneration opredict:Generation_Output_Step_Feature_generation_01_Pipeline_Source_Cell05_Execution_1546300862 ;
.
opredict:WorkflowExecutionArtifact_Output_Step_Feature_generation_01_Pipeline_Source_Cell08_Execution_1546300862
  rdf:type opmw:WorkflowExecutionArtifact ;
  dc:description """\"text/html\": [
       \"<div>\\n\",
       \"<style scoped>\\n\",
       \"    .dataframe tbody tr th:only-of-type {\\n\",
       \"        vertical-align: middle;\\n\",
       \"    }\\n\",
       \"\\n\",
       \"    .dataframe tbody tr th {\\n\",
       \"        vertical-align: top;\\n\",
       \"    }\\n\",
       \"\\n\",
       \"    .dataframe thead th {\\n\",
       \"        text-align: right;\\n\",
       \"    }\\n\",
       \"</style>\\n\",
       \"<table border=\\\"1\\\" class=\\\"dataframe\\\">\\n\",
       \"  <thead>\\n\",
       \"    <tr style=\\\"text-align: right;\\\">\\n\",
       \"      <th></th>\\n\",
       \"      <th>Drug1</th>\\n\",
       \"      <th>Drug2</th>\\n\",
       \"      <th>SE-SIM</th>\\n\",
       \"    </tr>\\n\",
       \"  </thead>\\n\",
       \"  <tbody>\\n\",
       \"    <tr>\\n\",
       \"      <th>0</th>\\n\",
       \"      <td>DB00882</td>\\n\",
       \"      <td>DB00366</td>\\n\",
       \"      <td>0.085502</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>1</th>\\n\",
       \"      <td>DB00882</td>\\n\",
       \"      <td>DB01029</td>\\n\",
       \"      <td>0.131285</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>2</th>\\n\",
       \"      <td>DB00882</td>\\n\",
       \"      <td>DB01217</td>\\n\",
       \"      <td>0.145215</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>3</th>\\n\",
       \"      <td>DB00882</td>\\n\",
       \"      <td>DB00304</td>\\n\",
       \"      <td>0.074890</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>4</th>\\n\",
       \"      <td>DB00882</td>\\n\",
       \"      <td>DB01400</td>\\n\",
       \"      <td>0.076000</td>\\n\",
       \"    </tr>\\n\",
       \"  </tbody>\\n\",
       \"</table>\\n\",
       \"</div>\"
      ],
      \"text/plain\": [
       \"     Drug1    Drug2    SE-SIM\\n\",
       \"0  DB00882  DB00366  0.085502\\n\",
       \"1  DB00882  DB01029  0.131285\\n\",
       \"2  DB00882  DB01217  0.145215\\n\",
       \"3  DB00882  DB00304  0.074890\\n\",
       \"4  DB00882  DB01400  0.076000\"
      ]""" ;
  prov:qualifiedGeneration opredict:Generation_Output_Step_Feature_generation_01_Pipeline_Source_Cell08_Execution_1546300862 ;
.
opredict:WorkflowExecutionArtifact_Output_Step_Feature_generation_01_Pipeline_Source_Cell10_Execution_1546300862
  rdf:type opmw:WorkflowExecutionArtifact ;
  dc:description """\"text/html\": [
       \"<div>\\n\",
       \"<style scoped>\\n\",
       \"    .dataframe tbody tr th:only-of-type {\\n\",
       \"        vertical-align: middle;\\n\",
       \"    }\\n\",
       \"\\n\",
       \"    .dataframe tbody tr th {\\n\",
       \"        vertical-align: top;\\n\",
       \"    }\\n\",
       \"\\n\",
       \"    .dataframe thead th {\\n\",
       \"        text-align: right;\\n\",
       \"    }\\n\",
       \"</style>\\n\",
       \"<table border=\\\"1\\\" class=\\\"dataframe\\\">\\n\",
       \"  <thead>\\n\",
       \"    <tr style=\\\"text-align: right;\\\">\\n\",
       \"      <th></th>\\n\",
       \"      <th>Drug1</th>\\n\",
       \"      <th>Drug2</th>\\n\",
       \"      <th>PPI-SIM</th>\\n\",
       \"    </tr>\\n\",
       \"  </thead>\\n\",
       \"  <tbody>\\n\",
       \"    <tr>\\n\",
       \"      <th>0</th>\\n\",
       \"      <td>DB00882</td>\\n\",
       \"      <td>DB00366</td>\\n\",
       \"      <td>0.044808</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>1</th>\\n\",
       \"      <td>DB00882</td>\\n\",
       \"      <td>DB01029</td>\\n\",
       \"      <td>0.121802</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>2</th>\\n\",
       \"      <td>DB00882</td>\\n\",
       \"      <td>DB01217</td>\\n\",
       \"      <td>0.121802</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>3</th>\\n\",
       \"      <td>DB00882</td>\\n\",
       \"      <td>DB00304</td>\\n\",
       \"      <td>0.331091</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>4</th>\\n\",
       \"      <td>DB00882</td>\\n\",
       \"      <td>DB01400</td>\\n\",
       \"      <td>0.044808</td>\\n\",
       \"    </tr>\\n\",
       \"  </tbody>\\n\",
       \"</table>\\n\",
       \"</div>\"
      ],
      \"text/plain\": [
       \"     Drug1    Drug2   PPI-SIM\\n\",
       \"0  DB00882  DB00366  0.044808\\n\",
       \"1  DB00882  DB01029  0.121802\\n\",
       \"2  DB00882  DB01217  0.121802\\n\",
       \"3  DB00882  DB00304  0.331091\\n\",
       \"4  DB00882  DB01400  0.044808\"
      ]""" ;
  prov:qualifiedGeneration opredict:Generation_Output_Step_Feature_generation_01_Pipeline_Source_Cell10_Execution_1546300862 ;
.
opredict:WorkflowExecutionArtifact_Output_Step_Feature_generation_Pipeline_OpenPREDICT_ipynb_v02_FeatureGeneration_Execution_1546335555
  rdf:type opmw:WorkflowExecutionArtifact ;
  dc:description """\"text/html\": [
       \"<div>\\n\",
       \"<style scoped>\\n\",
       \"    .dataframe tbody tr th:only-of-type {\\n\",
       \"        vertical-align: middle;\\n\",
       \"    }\\n\",
       \"\\n\",
       \"    .dataframe tbody tr th {\\n\",
       \"        vertical-align: top;\\n\",
       \"    }\\n\",
       \"\\n\",
       \"    .dataframe thead th {\\n\",
       \"        text-align: right;\\n\",
       \"    }\\n\",
       \"</style>\\n\",
       \"<table border=\\\"1\\\" class=\\\"dataframe\\\">\\n\",
       \"  <thead>\\n\",
       \"    <tr style=\\\"text-align: right;\\\">\\n\",
       \"      <th></th>\\n\",
       \"      <th>drugid</th>\\n\",
       \"      <th>smiles</th>\\n\",
       \"    </tr>\\n\",
       \"  </thead>\\n\",
       \"  <tbody>\\n\",
       \"    <tr>\\n\",
       \"      <th>0</th>\\n\",
       \"      <td>DB00014</td>\\n\",
       \"      <td>CC(C)C[C@H](NC(=O)[C@@H](COC(C)(C)C)NC(=O)[C@H...</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>1</th>\\n\",
       \"      <td>DB00035</td>\\n\",
       \"      <td>NC(=O)CC[C@@H]1NC(=O)[C@H](CC2=CC=CC=C2)NC(=O)...</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>2</th>\\n\",
       \"      <td>DB00091</td>\\n\",
       \"      <td>CCC1NC(=O)C(C(O)C(C)CC=CC)N(C)C(=O)C(C(C)C)N(C...</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>3</th>\\n\",
       \"      <td>DB00104</td>\\n\",
       \"      <td>C[C@@H](O)[C@@H](CO)NC(=O)[C@@H]1CSSC[C@H](NC(...</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>4</th>\\n\",
       \"      <td>DB00114</td>\\n\",
       \"      <td>CC1=NC=C(COP(O)(O)=O)C(C=O)=C1O</td>\\n\",
       \"    </tr>\\n\",
       \"  </tbody>\\n\",
       \"</table>\\n\",
       \"</div>\"
      ],
      \"text/plain\": [
       \"    drugid                                             smiles\\n\",
       \"0  DB00014  CC(C)C[C@H](NC(=O)[C@@H](COC(C)(C)C)NC(=O)[C@H...\\n\",
       \"1  DB00035  NC(=O)CC[C@@H]1NC(=O)[C@H](CC2=CC=CC=C2)NC(=O)...\\n\",
       \"2  DB00091  CCC1NC(=O)C(C(O)C(C)CC=CC)N(C)C(=O)C(C(C)C)N(C...\\n\",
       \"3  DB00104  C[C@@H](O)[C@@H](CO)NC(=O)[C@@H]1CSSC[C@H](NC(...\\n\",
       \"4  DB00114                    CC1=NC=C(COP(O)(O)=O)C(C=O)=C1O\"
      ]""" ;
  prov:qualifiedGeneration opredict:Generation_Output_Step_Feature_generation_Pipeline_OpenPREDICT_ipynb_v02_FeatureGeneration_Execution_1546335555 ;
.
<http://purl.org/plex/Instances/OpenPREDICT#WorkflowExecutionArtifact_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell01_Execution_1546302862>
  rdf:type opmw:WorkflowExecutionArtifact ;
  dc:description """\"text/html\": [
       \"<div>\\n\",
       \"<style scoped>\\n\",
       \"    .dataframe tbody tr th:only-of-type {\\n\",
       \"        vertical-align: middle;\\n\",
       \"    }\\n\",
       \"\\n\",
       \"    .dataframe tbody tr th {\\n\",
       \"        vertical-align: top;\\n\",
       \"    }\\n\",
       \"\\n\",
       \"    .dataframe thead th {\\n\",
       \"        text-align: right;\\n\",
       \"    }\\n\",
       \"</style>\\n\",
       \"<table border=\\\"1\\\" class=\\\"dataframe\\\">\\n\",
       \"  <thead>\\n\",
       \"    <tr style=\\\"text-align: right;\\\">\\n\",
       \"      <th></th>\\n\",
       \"      <th>Drug</th>\\n\",
       \"      <th>Disease</th>\\n\",
       \"    </tr>\\n\",
       \"  </thead>\\n\",
       \"  <tbody>\\n\",
       \"    <tr>\\n\",
       \"      <th>0</th>\\n\",
       \"      <td>DB00659</td>\\n\",
       \"      <td>103780</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>1</th>\\n\",
       \"      <td>DB00284</td>\\n\",
       \"      <td>125853</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>2</th>\\n\",
       \"      <td>DB00284</td>\\n\",
       \"      <td>125850</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>3</th>\\n\",
       \"      <td>DB00284</td>\\n\",
       \"      <td>125851</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>4</th>\\n\",
       \"      <td>DB00284</td>\\n\",
       \"      <td>600496</td>\\n\",
       \"    </tr>\\n\",
       \"  </tbody>\\n\",
       \"</table>\\n\",
       \"</div>\"
      ],
      \"text/plain\": [
       \"      Drug Disease\\n\",
       \"0  DB00659  103780\\n\",
       \"1  DB00284  125853\\n\",
       \"2  DB00284  125850\\n\",
       \"3  DB00284  125851\\n\",
       \"4  DB00284  600496\"
      ]""" ;
  prov:qualifiedGeneration <http://purl.org/plex/Instances/OpenPREDICT#Generation_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell01_Execution_1546302862> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#WorkflowExecutionArtifact_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell05_Execution_1546302862>
  rdf:type opmw:WorkflowExecutionArtifact ;
  dc:description """\"text/plain\": [
       \"(4123, 1031)\"
      ]""" ;
  prov:qualifiedGeneration <http://purl.org/plex/Instances/OpenPREDICT#Generation_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell05_Execution_1546302862> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#WorkflowExecutionArtifact_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell08_Execution_1546302862>
  rdf:type opmw:WorkflowExecutionArtifact ;
  dc:description """\"text\": [
      \"Test: {'f1': 0.760655737704918, 'average_precision': 0.8566906000076772, 'accuracy': 0.8583899127061105, 'recall': 0.6744186046511628, 'roc_auc': 0.8802152093700281, 'precision': 0.8721804511278195}\\n\"
     ]""" ;
  prov:qualifiedGeneration <http://purl.org/plex/Instances/OpenPREDICT#Generation_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell08_Execution_1546302862> ;
.
<http://purl.org/plex/Instances/OpenPREDICT#WorkflowExecutionArtifact_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell09_Execution_1546302862>
  rdf:type opmw:WorkflowExecutionArtifact ;
  dc:description """text/plain\": [
       \"accuracy             0.833336\\n\",
       \"average_precision    0.810000\\n\",
       \"f1                   0.685671\\n\",
       \"precision            0.918820\\n\",
       \"recall               0.549804\\n\",
       \"roc_auc              0.836133\\n\",
       \"dtype: float64\"
      ]""" ;
  prov:qualifiedGeneration <http://purl.org/plex/Instances/OpenPREDICT#Generation_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML.ipynb_Cell09_Execution_1546302862> ;
.
opredict:WorkflowExecutionArtifact_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02_Execution_1546335555
  rdf:type opmw:WorkflowExecutionArtifact ;
  dc:description """\"text/html\": [
       \"<div>\\n\",
       \"<style scoped>\\n\",
       \"    .dataframe tbody tr th:only-of-type {\\n\",
       \"        vertical-align: middle;\\n\",
       \"    }\\n\",
       \"\\n\",
       \"    .dataframe tbody tr th {\\n\",
       \"        vertical-align: top;\\n\",
       \"    }\\n\",
       \"\\n\",
       \"    .dataframe thead th {\\n\",
       \"        text-align: right;\\n\",
       \"    }\\n\",
       \"</style>\\n\",
       \"<table border=\\\"1\\\" class=\\\"dataframe\\\">\\n\",
       \"  <thead>\\n\",
       \"    <tr style=\\\"text-align: right;\\\">\\n\",
       \"      <th></th>\\n\",
       \"      <th>Drug</th>\\n\",
       \"      <th>Disease</th>\\n\",
       \"    </tr>\\n\",
       \"  </thead>\\n\",
       \"  <tbody>\\n\",
       \"    <tr>\\n\",
       \"      <th>0</th>\\n\",
       \"      <td>DB01148</td>\\n\",
       \"      <td>231200</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>1</th>\\n\",
       \"      <td>DB01148</td>\\n\",
       \"      <td>155100</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>2</th>\\n\",
       \"      <td>DB01148</td>\\n\",
       \"      <td>273800</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>3</th>\\n\",
       \"      <td>DB00575</td>\\n\",
       \"      <td>607554</td>\\n\",
       \"    </tr>\\n\",
       \"    <tr>\\n\",
       \"      <th>4</th>\\n\",
       \"      <td>DB00575</td>\\n\",
       \"      <td>171300</td>\\n\",
       \"    </tr>\\n\",
       \"  </tbody>\\n\",
       \"</table>\\n\",
       \"</div>\"
      ],
      \"text/plain\": [
       \"      Drug Disease\\n\",
       \"0  DB01148  231200\\n\",
       \"1  DB01148  155100\\n\",
       \"2  DB01148  273800\\n\",
       \"3  DB00575  607554\\n\",
       \"4  DB00575  171300\"
      ]""" ;
  prov:qualifiedGeneration opredict:Generation_Output_Step_Model_preparation_train_and_evaluation_Workflow_OpenPREDCIT_-_ML_ipynb_v02_Execution_1546335555 ;
.
fabio:Triplestore
  rdf:type owl:Class ;
  rdfs:isDefinedBy fabio:Triplestore ;
  rdfs:subClassOf owl:Thing ;
.
pwo:hasFirstStep
  rdf:type rdf:Property ;
  rdfs:isDefinedBy "http://purl.org/spar/pwo/hasFirstStep" ;
.
schema:ComputerLanguage
  rdf:type owl:Class ;
  rdfs:subClassOf dc:LinguisticSystem ;
  owl:equivalentClass <https://schema.org/ComputerLanguage> ;
.
schema:URL
  rdf:type rdf:Property ;
  rdfs:range xsd:string ;
.
dul:Workflow
  rdf:type owl:Class ;
  rdfs:comment "A Plan that defines Role(s), Task(s), and a specific structure for tasks to be executed, usually supporting the work of an Organization" ;
  rdfs:seeAlso "http://www.ontologydesignpatterns.org/ont/dul/DUL.owl#Workflow" ;
  rdfs:subClassOf owl:Thing ;
.
dul:isDescribedBy
  rdf:type rdf:Property ;
  rdfs:isDefinedBy "http://www.ontologydesignpatterns.org/ont/dul/DUL.owl#isDescribedBy" ;
.
dul:precedes
  rdf:type rdf:Property ;
  rdfs:isDefinedBy "http://www.ontologydesignpatterns.org/ont/dul/DUL.owl#precedes" ;
.
opmw:WorkflowExecutionArtifact
  rdf:type owl:Class ;
  rdfs:seeAlso "http://www.opmw.org/ontology/WorkflowExecutionArtifact" ;
  rdfs:subClassOf prov:Entity ;
.
dcat:Dataset
  rdf:type owl:Class ;
  rdfs:isDefinedBy "http://www.w3.org/ns/dcat#Dataset" ;
  rdfs:subClassOf owl:Thing ;
.
dcat:Distribution
  rdf:type owl:Class ;
  rdfs:isDefinedBy "http://www.w3.org/ns/dcat#Distribution" ;
  rdfs:subClassOf owl:Thing ;
.
dcat:distribution
  rdf:type rdf:Property ;
  rdfs:isDefinedBy "http://www.w3.org/ns/dcat#distribution" ;
.
dcat:downloadURL
  rdf:type rdf:Property ;
  rdfs:isDefinedBy "http://www.w3.org/ns/dcat#downloadURL" ;
.
dcat:mediaType
  rdf:type rdf:Property ;
  rdfs:domain dcat:Distribution ;
  rdfs:range edam:format_1915 ;
  rdfs:seeAlso "https://www.w3.org/ns/dcat#mediaType" ;
.
mls:EvaluationMeasure
  rdf:type owl:Class ;
  rdfs:seeAlso "http://www.w3.org/ns/mls#EvaluationMeasure" ;
  rdfs:subClassOf owl:Thing ;
.
mls:ModelEvaluation
  rdf:type owl:Class ;
  rdfs:seeAlso "http://www.w3.org/ns/mls#ModelEvaluation" ;
  rdfs:subClassOf opmw:WorkflowExecutionArtifact ;
.
mls:Run
  rdf:type owl:Class ;
  rdfs:seeAlso "http://www.w3.org/ns/mls#Run" ;
  rdfs:subClassOf p-plan:Activity ;
.
mls:specifiedBy
  rdf:type rdf:Property ;
  rdfs:domain mls:ModelEvaluation ;
  rdfs:range mls:EvaluationMeasure ;
  rdfs:seeAlso "http://www.w3.org/ns/mls#specifiedBy" ;
.
prov:Activity
  rdf:type owl:Class ;
  rdfs:seeAlso "http://www.w3.org/ns/prov#Activity" ;
  rdfs:subClassOf owl:Thing ;
.
prov:Agent
  rdf:type owl:Class ;
  rdfs:seeAlso "https://www.w3.org/TR/prov-o/#Agent" ;
  rdfs:subClassOf owl:Thing ;
.
prov:Association
  rdf:type owl:Class ;
  rdfs:seeAlso "https://www.w3.org/TR/prov-o/#Association" ;
  rdfs:subClassOf owl:Thing ;
.
prov:Bundle
  rdf:type owl:Class ;
  rdfs:seeAlso "http://www.w3.org/ns/prov#Bundle" ;
  rdfs:subClassOf prov:Entity ;
.
prov:Entity
  rdf:type owl:Class ;
  rdfs:seeAlso "https://www.w3.org/TR/prov-o/#Entity" ;
  rdfs:subClassOf owl:Thing ;
.
prov:Generation
  rdf:type owl:Class ;
  rdfs:comment "Generation is the completion of production of a new entity by an activity. This entity did not exist before generation and becomes available for usage after this generation." ;
  rdfs:seeAlso "http://www.w3.org/ns/prov#Generation" ;
  rdfs:subClassOf owl:Thing ;
.
prov:Plan
  rdf:type owl:Class ;
  rdfs:seeAlso "https://www.w3.org/TR/prov-o/#Plan" ;
  rdfs:subClassOf prov:Entity ;
.
prov:Role
  rdf:type owl:Class ;
  rdfs:seeAlso "https://www.w3.org/TR/prov-o/#Role" ;
  rdfs:subClassOf owl:Thing ;
.
prov:SoftwareAgent
  rdf:type owl:Class ;
  rdfs:seeAlso "http://www.w3.org/ns/prov#SoftwareAgent" ;
  rdfs:subClassOf prov:Agent ;
.
prov:Usage
  rdf:type owl:Class ;
  rdfs:isDefinedBy "http://www.w3.org/ns/prov#Usage" ;
  rdfs:subClassOf owl:Thing ;
  rdfs:subClassOf prov:EntityInfluence ;
  rdfs:subClassOf prov:InstantaneousEvent ;
.
prov:agent
  rdf:type rdf:Property ;
  rdfs:range prov:Agent ;
  rdfs:seeAlso "https://www.w3.org/TR/prov-o/#p_agent" ;
.
prov:atTime
  rdf:type rdf:Property ;
  rdfs:comment "The PROV data model is implicitly based on a notion of instantaneous events (or just events), that mark transitions in the world. Events include generation, usage, or invalidation of entities, as well as starting or ending of activities. This notion of event is not first-class in the data model, but it is useful for explaining its other concepts and its semantics." ;
  rdfs:range xsd:dateTime ;
  rdfs:seeAlso "http://www.w3.org/ns/prov#atTime" ;
.
prov:entity
  rdf:type rdf:Property ;
  rdfs:isDefinedBy "http://www.w3.org/ns/prov#entity" ;
.
prov:generated
  rdf:type rdf:Property ;
  rdfs:domain prov:Activity ;
  rdfs:range prov:Entity ;
  rdfs:seeAlso "http://www.w3.org/ns/prov#generated" ;
.
prov:hadPlan
  rdf:type rdf:Property ;
  rdfs:domain prov:Association ;
  rdfs:range prov:Plan ;
  rdfs:seeAlso "https://www.w3.org/TR/prov-o/#hadPlan" ;
.
prov:hadRole
  rdf:type rdf:Property ;
  rdfs:domain prov:Association ;
  rdfs:range prov:Role ;
  rdfs:seeAlso "https://www.w3.org/TR/prov-o/#hadRole" ;
.
prov:qualifiedGeneration
  rdf:type rdf:Property ;
  rdfs:comment "Generation is the completion of production of a new entity by an activity. This entity did not exist before generation and becomes available for usage after this generation." ;
  rdfs:domain prov:Entity ;
  rdfs:range prov:Generation ;
  rdfs:seeAlso "http://www.w3.org/ns/prov#qualifiedGeneration" ;
.
prov:qualifiedUsage
  rdf:type rdf:Property ;
  rdfs:isDefinedBy "http://www.w3.org/ns/prov#qualifiedUsage" ;
  rdfs:range prov:Usage ;
.
prov:used
  rdf:type rdf:Property ;
  rdfs:isDefinedBy "http://www.w3.org/ns/prov#used" ;
.
prov:wasAttributedTo
  rdf:type rdf:Property ;
  rdfs:domain prov:Entity ;
  rdfs:range prov:Agent ;
.
prov:wasRevisionOf
  rdf:type rdf:Property ;
  rdfs:domain prov:Entity ;
  rdfs:range prov:Entity ;
  rdfs:seeAlso "http://www.w3.org/ns/prov#wasRevisionOf" ;
.
sh:NodeShape
  rdf:type owl:Class ;
  rdfs:subClassOf owl:Thing ;
.
sh:SPARQLConstraint
  rdf:type owl:Class ;
  rdfs:subClassOf owl:Thing ;
.
sh:select
  rdf:type rdf:Property ;
  rdfs:domain sh:SPARQLConstraint ;
.
sh:sparql
  rdf:type rdf:Property ;
  rdfs:domain sh:NodeShape ;
  rdfs:range sh:SPARQLConstraint ;
.
sh:targetClass
  rdf:type owl:ObjectProperty ;
  rdfs:domain sh:NodeShape ;
  rdfs:range owl:Thing ;
.
reprod:Cell
  rdf:type owl:Class ;
  dc:description "A cell is a multiline text input field in an Interactive Notebook which can either be code cells where code can be excuted or markdown cells where a descriptive text can be provided or raw cells where output can directly be entered. For example, a Jupyter Notebook cell." ;
  rdfs:subClassOf owl:Thing ;
.
